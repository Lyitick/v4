# Анализ рынка финансовых Telegram-ботов и рекомендации по улучшению

## Контекст

Проект — персональный финансовый менеджер в формате Telegram Mini App (aiogram + FastAPI + React). Текущий функционал: распределение доходов по процентам, вишлист с накоплениями, бытовые платежи, повторяющиеся платежи, цели накоплений, БЫТ-напоминания, месячные отчёты, Excel-экспорт.

Проведён анализ 10+ конкурентов и тенденций рынка для выявления возможностей улучшения.

---

## Конкуренты

| Бот / Сервис | Ключевые фишки |
|---|---|
| **Cointry** (@cointrybot) | Одно сообщение = одна транзакция, AI-категоризация, мультивалюта, семейные группы, Mini App с графиками |
| **Экономка** (@enomka_bot) | Полная веб-версия + бот, совместный бюджет для пар, учёт долгов, годовая аналитика, freemium |
| **@Fiinny_bot** | AI-советник: персональные рекомендации, поиск +10% свободных денег, оптимизация кредитов |
| **@whereismymoneybot** | Ультра-простой ввод ("200 кафе"), еженедельные отчёты, минимум действий |
| **МОбс** (@mobsbot) | Google Sheets интеграция, семейные группы, бесплатно для личного использования |
| **BudgetBot** | Предсказание бюджета по трендам, графическая аналитика, PDF-отчёты |
| **TeleExpense** | Стрики, монеты, бейджи (геймификация), Google Sheets синхронизация |
| **YNAB / Copilot / PocketSmith** | AI-категоризация, синхронизация с банками, адаптивные бюджеты, прогнозирование cash flow |

---

## Уникальные сильные стороны текущего приложения

1. **Система распределения доходов по процентам** — ни один конкурент не предлагает проактивное планирование дохода по категориям с автоматическим зачислением в накопления
2. **БЫТ-напоминания** — тонкая настройка по категориям, времени, с возможностью отложить — превосходит конкурентов по глубине
3. **Чеклист бытовых платежей** — уникальный формат "да/нет" с автоматическим списанием из накоплений
4. **Нативный Telegram Mini App** — CSS-переменные Telegram, haptic feedback, гибридный бот + web
5. **Excel-экспорт** — многостраничный XLSX с форматированием (у конкурентов текст или PDF)

---

## Рекомендуемые улучшения

### Уровень 1: Быстрые победы (высокий импакт, малые усилия)

#### 1.1. Учёт произвольных расходов
**Самый критичный пробел.** Сейчас нет возможности записать "потратил 500 на еду". Только распределение доходов и бытовые платежи. Без этого месячные отчёты неполные.

- Новая таблица `расходы` (id, user_id, amount, category, note, created_at)
- Новый API-роутер `/api/expenses`
- Новая страница или секция в Mini App с быстрой формой: сумма + категория + заметка
- Интеграция в существующие отчёты

**Ориентир:** Cointry, @whereismymoneybot — у всех есть запись расходов

**Файлы:** `crud.py` (новая таблица), новый `routers/expenses.py`, `client.ts`, новая страница

#### 1.2. Визуальные графики в отчётах
**Текущие отчёты** — CSS-полоски с процентной шириной. Добавление chart.js или recharts мгновенно преобразит восприятие.

- Круговая/donut диаграмма для категорий (доходы/расходы)
- Столбчатая диаграмма для сравнения по месяцам
- Линия тренда для накоплений
- Бэкенд менять не нужно — данные уже есть

**Ориентир:** Cointry (графики в Mini App), BudgetBot (графическая аналитика)

**Файлы:** `package.json` (+chart.js), `ReportsPage.tsx`, `styles.css`

#### 1.3. Сравнение месяц-к-месяцу в отчётах
**Сейчас отчёт показывает один месяц.** Добавить дельты (стрелки вверх/вниз) vs предыдущий месяц — фронтенд-only изменение.

- Загружать данные за 2 месяца (текущий + предыдущий)
- Показывать % изменения по каждой категории
- Цветовая индикация: зелёный (снижение расходов), красный (рост)

**Файлы:** только `ReportsPage.tsx`

#### 1.4. Лимиты бюджета с уведомлениями о перерасходе
Пользователь распределяет 15% на "Еду" — должен получить предупреждение при приближении к лимиту.

- Новая колонка `budget_limit` в таблице категорий расходов
- Цветовая индикация в UI: зелёный → жёлтый → красный
- Push-уведомление через бот при превышении (инфраструктура уже есть в `_run_byt_scheduler`)

**Ориентир:** YNAB, Simplifi, BudgetBot

---

### Уровень 2: Ключевые улучшения (высокий импакт, средние усилия)

#### 2.1. Быстрый ввод расходов через чат бота
**Главное UX-преимущество Telegram-ботов** — нулевое трение. Отправил "500 такси" в чат — расход записан.

- Новый хэндлер: перехват текста формата `<число> <описание>`
- Regex-парсер -> матч к ближайшей категории расходов
- Инлайн-подтверждение: "500 Транспорт? [Да] [Изменить] [Отмена]"
- Позже: AI-категоризация (Уровень 3)

**Ориентир:** Cointry (1 сообщение = 1 транзакция), @whereismymoneybot

**Файлы:** новый хэндлер в `handlers/`, `common.py`, `main.py`

#### 2.2. Учёт долгов
**Критичная функция для личных финансов.** "Занял Пете 5000" / "Должен за квартиру 2000".

- Новая таблица: `долги` (id, user_id, person, amount, direction, description, is_settled, created_at)
- API: `/api/debts` (CRUD + settle)
- UI: две вкладки (Мне должны / Я должен), итоговый баланс, кнопка "Погашено"
- Интеграция в отчёты

**Ориентир:** Экономка ("мне должны" / "мои долги")

#### 2.3. Мультивалюта
Расширить аудиторию за пределы РФ.

- Колонка `currency` в таблицах (default: "RUB")
- Настройка основной валюты + дополнительных
- API курсов (exchangerate-api.com или CBR XML)
- Отображение в оригинальной валюте + эквивалент

**Ориентир:** Cointry (мультивалюта с автоконвертацией)

#### 2.4. Google Sheets интеграция
Уже есть Excel-экспорт. Google Sheets = real-time синхронизация.

- OAuth2 для Google API
- Авто-синхронизация при каждой транзакции или ежедневный батч
- Toggle в настройках

**Ориентир:** МОбс, TeleExpense, PersonalFinTrackerBot

---

### Уровень 3: Дифференциаторы (высокий импакт, высокие усилия)

#### 3.1. AI-категоризация и финансовый советник
**Фаза A — Авто-категоризация:** Пользователь пишет "200 старбакс" -> AI мапит на "Еда". Использовать OpenAI API или локальную модель.

**Фаза B — Финансовые инсайты:**
- "Расходы на Еду выросли на 30% vs 3-месячный средний"
- "При текущей скорости накоплений, цель достигнута через 4.2 месяца"
- Рекомендации по ребалансировке бюджета

**Ориентир:** Cointry (AI-категоризация), @Fiinny_bot (AI-советник)

#### 3.2. Семейный/совместный бюджет
- Таблицы `groups`, `group_members`
- Бот работает в групповых чатах Telegram
- Расходы: личные vs общие
- Права: админ видит всё, участник — своё + общее

**Ориентир:** Cointry (семейные группы), Экономка (совместный бюджет для пар)

#### 3.3. Прогнозная аналитика
- Анализ 3-6 месяцев истории
- Прогноз: "В следующем месяце расходы ~X"
- ETA по целям: "Цель по [вишлист] будет достигнута к [дата]"
- Сезонные паттерны

**Ориентир:** BudgetBot (предсказание), PocketSmith (cash flow forecast)

#### 3.4. Геймификация
- Стрики (дни подряд с записанными расходами)
- Бейджи: "Первый доход", "7 дней подряд", "Мастер бюджета", "Цель достигнута"
- Очки за действия
- Галерея достижений

**Ориентир:** TeleExpense (стрики, монеты, бейджи)

---

### Уровень 4: Приятные дополнения (низкий приоритет)

| Фича | Описание | Ориентир |
|---|---|---|
| Мультиязычность | react-i18next, файлы локализации | — |
| OCR-сканирование чеков | Фото чека -> парсинг через Google Vision / Tesseract | MoneyNeBot |
| Голосовой ввод | Telegram voice -> Whisper API -> парсинг транзакции | Standalone apps |
| Синхронизация с банком | Open Banking API (сложно для РФ) | YNAB, Copilot |
| Импорт из CSV/других приложений | Upload + маппинг колонок | — |

---

## Монетизация

| Тариф | Что входит | Цена |
|---|---|---|
| **Free** | Учёт расходов, базовые текстовые отчёты, 3 категории, вишлист | 0 |
| **Premium** | Графики, AI-категоризация, AI-инсайты, безлимитные категории, Google Sheets, Excel, долги | 99-199 руб/мес |
| **Family** | Общий бюджет, семейные группы, аналитика по участникам | 199-399 руб/мес |

Оплата через Telegram Payments API (уже в экосистеме Telegram).

---

## Рекомендуемая последовательность реализации

1. **Учёт расходов** (1.1) — закрывает главный пробел
2. **Графики в отчётах** (1.2) — мгновенное визуальное улучшение
3. **Сравнение месяцев** (1.3) — быстрая фронтенд-доработка
4. **Лимиты бюджета** (1.4) — превращает трекер в активного помощника
5. **Быстрый ввод через чат** (2.1) — убирает трение
6. **Учёт долгов** (2.2) — полнота финансовой картины
7. **AI-категоризация** (3.1A) — wow-фактор
8. **Геймификация** (3.4) — удержание пользователей
9. **Монетизация** — подписочная модель
10. **AI-инсайты** (3.1B) — ценность premium
11. **Google Sheets** (2.4) — привлечение новых пользователей
12. **Мультивалюта** (2.3) — расширение аудитории
13. **Семейный бюджет** (3.2) — новый сегмент
14. **Прогнозная аналитика** (3.3) — premium дифференциация
