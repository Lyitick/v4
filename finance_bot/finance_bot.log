[2025-11-25 14:56:00,395] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 14:56:00,396] [INFO] [__main__] Starting bot polling
[2025-11-25 14:56:00,397] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 14:56:00,637] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 14:56:00,876] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 14:56:00,877] [INFO] [aiogram.event] Update id=131879015 is handled. Duration 180 ms by bot id=8440100118
[2025-11-25 14:56:00,897] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 14:56:00,898] [INFO] [aiogram.event] Update id=131879016 is handled. Duration 199 ms by bot id=8440100118
[2025-11-25 14:56:00,919] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 14:56:00,919] [INFO] [aiogram.event] Update id=131879017 is handled. Duration 219 ms by bot id=8440100118
[2025-11-25 14:56:00,937] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 14:56:00,937] [INFO] [aiogram.event] Update id=131879018 is handled. Duration 236 ms by bot id=8440100118
[2025-11-25 14:57:27,080] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 14:57:27,081] [INFO] [aiogram.event] Update id=131879019 is handled. Duration 84 ms by bot id=8440100118
[2025-11-25 14:57:56,254] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 14:57:56,255] [INFO] [aiogram.event] Update id=131879020 is handled. Duration 95 ms by bot id=8440100118
[2025-11-25 14:58:00,888] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 14:58:00,888] [INFO] [aiogram.event] Update id=131879021 is handled. Duration 105 ms by bot id=8440100118
[2025-11-25 14:58:02,102] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 14:58:02,102] [INFO] [aiogram.event] Update id=131879022 is handled. Duration 79 ms by bot id=8440100118
[2025-11-25 14:58:10,082] [INFO] [aiogram.event] Update id=131879023 is handled. Duration 103 ms by bot id=8440100118
[2025-11-25 14:58:14,297] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3000.0
[2025-11-25 14:58:14,480] [INFO] [aiogram.event] Update id=131879024 is handled. Duration 213 ms by bot id=8440100118
[2025-11-25 14:58:22,837] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2000.0
[2025-11-25 14:58:23,038] [INFO] [aiogram.event] Update id=131879025 is handled. Duration 228 ms by bot id=8440100118
[2025-11-25 14:58:26,322] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2000.0
[2025-11-25 14:58:26,464] [INFO] [aiogram.event] Update id=131879026 is handled. Duration 161 ms by bot id=8440100118
[2025-11-25 14:58:33,379] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2000.0
[2025-11-25 14:58:33,586] [INFO] [aiogram.event] Update id=131879027 is handled. Duration 238 ms by bot id=8440100118
[2025-11-25 14:58:36,150] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1000.0
[2025-11-25 14:58:36,237] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 14:58:36,314] [INFO] [aiogram.event] Update id=131879028 is handled. Duration 180 ms by bot id=8440100118
[2025-11-25 14:58:53,690] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 14:58:53,690] [INFO] [aiogram.event] Update id=131879029 is handled. Duration 161 ms by bot id=8440100118
[2025-11-25 14:58:57,875] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-25 14:58:57,947] [INFO] [aiogram.event] Update id=131879030 is handled. Duration 75 ms by bot id=8440100118
[2025-11-25 14:58:59,960] [INFO] [aiogram.event] Update id=131879031 is handled. Duration 69 ms by bot id=8440100118
[2025-11-25 14:59:02,045] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 14:59:02,117] [INFO] [aiogram.event] Update id=131879032 is handled. Duration 73 ms by bot id=8440100118
[2025-11-25 14:59:08,043] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 14:59:08,044] [INFO] [aiogram.event] Update id=131879033 is handled. Duration 70 ms by bot id=8440100118
[2025-11-25 14:59:10,023] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 14:59:10,023] [INFO] [aiogram.event] Update id=131879034 is handled. Duration 160 ms by bot id=8440100118
[2025-11-25 14:59:14,674] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 14:59:14,749] [INFO] [aiogram.event] Update id=131879035 is handled. Duration 75 ms by bot id=8440100118
[2025-11-25 14:59:17,760] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 14:59:17,829] [INFO] [aiogram.event] Update id=131879036 is not handled. Duration 69 ms by bot id=8440100118
[2025-11-25 14:59:17,830] [ERROR] [aiogram.event] Cause exception while process update id=131879036 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 36, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 66, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 14:59:18,336] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 14:59:18,397] [INFO] [aiogram.event] Update id=131879037 is not handled. Duration 62 ms by bot id=8440100118
[2025-11-25 14:59:18,397] [ERROR] [aiogram.event] Cause exception while process update id=131879037 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 36, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 66, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 14:59:19,441] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 14:59:19,514] [INFO] [aiogram.event] Update id=131879038 is not handled. Duration 73 ms by bot id=8440100118
[2025-11-25 14:59:19,514] [ERROR] [aiogram.event] Cause exception while process update id=131879038 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 36, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 66, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 14:59:32,729] [INFO] [aiogram.event] Update id=131879039 is handled. Duration 76 ms by bot id=8440100118
[2025-11-25 14:59:34,323] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 14:59:34,386] [INFO] [aiogram.event] Update id=131879040 is not handled. Duration 63 ms by bot id=8440100118
[2025-11-25 14:59:34,387] [ERROR] [aiogram.event] Cause exception while process update id=131879040 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 36, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 66, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 14:59:36,388] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 14:59:36,388] [INFO] [aiogram.event] Update id=131879041 is handled. Duration 80 ms by bot id=8440100118
[2025-11-25 14:59:37,547] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 14:59:37,547] [INFO] [aiogram.event] Update id=131879042 is handled. Duration 147 ms by bot id=8440100118
[2025-11-25 14:59:41,835] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 14:59:41,912] [INFO] [aiogram.event] Update id=131879043 is handled. Duration 77 ms by bot id=8440100118
[2025-11-25 15:00:33,523] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 15:00:33,524] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 15:00:33,525] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 15:00:33,785] [INFO] [__main__] Bot shutdown complete
[2025-11-25 15:00:33,786] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 15:00:38,045] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 15:00:38,045] [INFO] [__main__] Starting bot polling
[2025-11-25 15:00:38,045] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 15:00:38,212] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 15:00:52,677] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 15:00:52,677] [INFO] [aiogram.event] Update id=131879044 is handled. Duration 219 ms by bot id=8440100118
[2025-11-25 15:00:54,702] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 15:00:54,702] [INFO] [aiogram.event] Update id=131879045 is handled. Duration 108 ms by bot id=8440100118
[2025-11-25 15:00:56,190] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 15:00:56,190] [INFO] [aiogram.event] Update id=131879046 is handled. Duration 75 ms by bot id=8440100118
[2025-11-25 15:00:57,615] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 15:00:57,615] [INFO] [aiogram.event] Update id=131879047 is handled. Duration 360 ms by bot id=8440100118
[2025-11-25 15:00:58,671] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:00:58,752] [INFO] [aiogram.event] Update id=131879048 is handled. Duration 81 ms by bot id=8440100118
[2025-11-25 15:01:01,909] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:01:01,976] [INFO] [aiogram.event] Update id=131879049 is not handled. Duration 68 ms by bot id=8440100118
[2025-11-25 15:01:01,976] [ERROR] [aiogram.event] Cause exception while process update id=131879049 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 36, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 66, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 15:01:03,671] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:01:03,766] [INFO] [aiogram.event] Update id=131879050 is not handled. Duration 95 ms by bot id=8440100118
[2025-11-25 15:01:03,767] [ERROR] [aiogram.event] Cause exception while process update id=131879050 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 36, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 66, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 15:01:05,107] [INFO] [aiogram.event] Update id=131879051 is handled. Duration 128 ms by bot id=8440100118
[2025-11-25 15:01:16,920] [INFO] [aiogram.event] Update id=131879052 is handled. Duration 86 ms by bot id=8440100118
[2025-11-25 15:01:20,646] [INFO] [aiogram.event] Update id=131879053 is handled. Duration 86 ms by bot id=8440100118
[2025-11-25 15:01:27,803] [INFO] [aiogram.event] Update id=131879054 is handled. Duration 83 ms by bot id=8440100118
[2025-11-25 15:01:30,081] [INFO] [database.crud] Added wish 1 for user 838347504
[2025-11-25 15:01:30,163] [INFO] [handlers.callbacks] User 838347504 added wish 1
[2025-11-25 15:01:30,163] [INFO] [aiogram.event] Update id=131879055 is handled. Duration 115 ms by bot id=8440100118
[2025-11-25 15:01:37,618] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 15:01:37,618] [INFO] [aiogram.event] Update id=131879056 is handled. Duration 140 ms by bot id=8440100118
[2025-11-25 15:01:39,178] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 15:01:39,178] [INFO] [aiogram.event] Update id=131879057 is handled. Duration 162 ms by bot id=8440100118
[2025-11-25 15:01:40,278] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 15:01:40,279] [INFO] [aiogram.event] Update id=131879058 is handled. Duration 81 ms by bot id=8440100118
[2025-11-25 15:01:42,094] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 15:01:42,094] [INFO] [aiogram.event] Update id=131879059 is handled. Duration 198 ms by bot id=8440100118
[2025-11-25 15:01:43,222] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:01:43,308] [INFO] [aiogram.event] Update id=131879060 is handled. Duration 86 ms by bot id=8440100118
[2025-11-25 15:01:48,363] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:01:48,442] [INFO] [aiogram.event] Update id=131879061 is handled. Duration 79 ms by bot id=8440100118
[2025-11-25 15:03:48,606] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 15:03:48,608] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 15:03:48,608] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 15:03:48,867] [INFO] [__main__] Bot shutdown complete
[2025-11-25 15:03:48,868] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 15:03:53,203] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 15:03:53,204] [INFO] [__main__] Starting bot polling
[2025-11-25 15:03:53,204] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 15:03:53,356] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 15:03:56,005] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 15:03:56,005] [INFO] [aiogram.event] Update id=131879062 is handled. Duration 176 ms by bot id=8440100118
[2025-11-25 15:03:58,443] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 15:03:58,443] [INFO] [aiogram.event] Update id=131879063 is handled. Duration 151 ms by bot id=8440100118
[2025-11-25 15:03:59,386] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:03:59,471] [INFO] [aiogram.event] Update id=131879064 is handled. Duration 86 ms by bot id=8440100118
[2025-11-25 15:04:04,361] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:04:04,432] [INFO] [aiogram.event] Update id=131879065 is handled. Duration 72 ms by bot id=8440100118
[2025-11-25 15:04:07,009] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 15:04:07,076] [INFO] [aiogram.event] Update id=131879066 is not handled. Duration 68 ms by bot id=8440100118
[2025-11-25 15:04:07,076] [ERROR] [aiogram.event] Cause exception while process update id=131879066 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 36, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 66, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 16:18:28,663] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 16:18:28,665] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 16:18:28,665] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 16:18:28,929] [INFO] [__main__] Bot shutdown complete
[2025-11-25 16:18:28,929] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 16:22:08,148] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 16:22:08,148] [INFO] [__main__] Starting bot polling
[2025-11-25 16:22:08,148] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 16:22:08,311] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 16:22:37,723] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 16:22:37,723] [INFO] [aiogram.event] Update id=131879067 is handled. Duration 264 ms by bot id=8440100118
[2025-11-25 16:22:44,393] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 16:22:44,394] [INFO] [aiogram.event] Update id=131879068 is handled. Duration 145 ms by bot id=8440100118
[2025-11-25 16:22:46,433] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 16:22:46,509] [INFO] [aiogram.event] Update id=131879069 is handled. Duration 77 ms by bot id=8440100118
[2025-11-25 16:22:56,829] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 16:22:56,887] [INFO] [aiogram.event] Update id=131879070 is handled. Duration 59 ms by bot id=8440100118
[2025-11-25 16:23:03,206] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 16:23:03,308] [INFO] [aiogram.event] Update id=131879071 is handled. Duration 103 ms by bot id=8440100118
[2025-11-25 16:23:05,570] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 16:23:05,658] [INFO] [aiogram.event] Update id=131879072 is handled. Duration 88 ms by bot id=8440100118
[2025-11-25 16:23:07,180] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 16:23:07,258] [INFO] [aiogram.event] Update id=131879073 is handled. Duration 78 ms by bot id=8440100118
[2025-11-25 16:23:16,044] [INFO] [database.crud] Fetched wish 1
[2025-11-25 16:23:16,044] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 16:23:16,179] [INFO] [aiogram.event] Update id=131879074 is handled. Duration 135 ms by bot id=8440100118
[2025-11-25 16:23:19,804] [INFO] [database.crud] Fetched wish 1
[2025-11-25 16:23:19,804] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 16:23:19,861] [INFO] [aiogram.event] Update id=131879075 is handled. Duration 58 ms by bot id=8440100118
[2025-11-25 16:23:38,225] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 16:23:38,225] [INFO] [aiogram.event] Update id=131879076 is handled. Duration 134 ms by bot id=8440100118
[2025-11-25 16:23:45,038] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 16:23:45,038] [INFO] [aiogram.event] Update id=131879077 is handled. Duration 76 ms by bot id=8440100118
[2025-11-25 16:23:50,008] [INFO] [aiogram.event] Update id=131879078 is handled. Duration 86 ms by bot id=8440100118
[2025-11-25 16:23:51,364] [INFO] [database.crud] Updated saving for user 838347504 category долги by 300000.0
[2025-11-25 16:23:51,518] [INFO] [aiogram.event] Update id=131879079 is handled. Duration 171 ms by bot id=8440100118
[2025-11-25 16:23:52,687] [INFO] [database.crud] Updated saving for user 838347504 category быт by 200000.0
[2025-11-25 16:23:52,833] [INFO] [aiogram.event] Update id=131879080 is handled. Duration 164 ms by bot id=8440100118
[2025-11-25 16:23:53,859] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 200000.0
[2025-11-25 16:23:54,019] [INFO] [aiogram.event] Update id=131879081 is handled. Duration 190 ms by bot id=8440100118
[2025-11-25 16:23:54,966] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 200000.0
[2025-11-25 16:23:55,293] [INFO] [aiogram.event] Update id=131879082 is handled. Duration 349 ms by bot id=8440100118
[2025-11-25 16:23:57,121] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 100000.0
[2025-11-25 16:23:57,188] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 16:23:57,259] [INFO] [aiogram.event] Update id=131879083 is handled. Duration 144 ms by bot id=8440100118
[2025-11-25 16:24:07,221] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 16:24:07,221] [INFO] [aiogram.event] Update id=131879084 is handled. Duration 155 ms by bot id=8440100118
[2025-11-25 16:24:08,753] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 16:24:08,822] [INFO] [aiogram.event] Update id=131879085 is handled. Duration 70 ms by bot id=8440100118
[2025-11-25 16:24:20,015] [INFO] [database.crud] Fetched wish 1
[2025-11-25 16:24:20,015] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 16:24:20,110] [INFO] [aiogram.event] Update id=131879086 is handled. Duration 96 ms by bot id=8440100118
[2025-11-25 16:24:45,843] [INFO] [handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-11-25 16:24:45,922] [INFO] [aiogram.event] Update id=131879087 is handled. Duration 81 ms by bot id=8440100118
[2025-11-25 16:52:04,024] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 16:52:04,025] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 16:52:15,199] [INFO] [aiogram.dispatcher] Connection established (tryings = 1, bot id = 8440100118)
[2025-11-25 16:52:15,200] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 16:52:15,200] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 16:52:26,359] [INFO] [aiogram.dispatcher] Connection established (tryings = 1, bot id = 8440100118)
[2025-11-25 17:13:12,505] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 17:13:12,507] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 17:13:12,507] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 17:13:12,768] [INFO] [__main__] Bot shutdown complete
[2025-11-25 17:13:12,769] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 17:25:52,747] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 17:25:52,748] [INFO] [__main__] Starting bot polling
[2025-11-25 17:25:52,748] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 17:25:52,929] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 17:34:36,059] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 17:34:36,060] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 17:34:36,060] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 17:34:36,314] [INFO] [__main__] Bot shutdown complete
[2025-11-25 17:34:36,315] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 17:43:54,687] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 17:43:54,687] [INFO] [__main__] Starting bot polling
[2025-11-25 17:43:54,687] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 17:43:54,851] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 17:52:36,582] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 17:52:36,582] [INFO] [aiogram.event] Update id=131879088 is handled. Duration 180 ms by bot id=8440100118
[2025-11-25 17:52:41,583] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 17:52:41,584] [INFO] [aiogram.event] Update id=131879089 is handled. Duration 151 ms by bot id=8440100118
[2025-11-25 17:52:43,196] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 17:52:43,197] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 17:52:43,265] [INFO] [aiogram.event] Update id=131879090 is handled. Duration 69 ms by bot id=8440100118
[2025-11-25 17:52:45,383] [INFO] [database.crud] Fetched wish 1
[2025-11-25 17:52:45,384] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 17:52:45,446] [INFO] [aiogram.event] Update id=131879091 is handled. Duration 63 ms by bot id=8440100118
[2025-11-25 17:52:53,630] [INFO] [database.crud] Fetched wish 1
[2025-11-25 17:52:53,630] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 17:52:53,734] [INFO] [aiogram.event] Update id=131879092 is handled. Duration 105 ms by bot id=8440100118
[2025-11-25 17:54:04,061] [INFO] [handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-11-25 17:54:04,062] [INFO] [handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-11-25 17:54:04,131] [INFO] [aiogram.event] Update id=131879093 is handled. Duration 75 ms by bot id=8440100118
[2025-11-25 17:54:04,247] [INFO] [aiogram.event] Update id=131879094 is handled. Duration 192 ms by bot id=8440100118
[2025-11-25 18:11:13,636] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 18:11:13,637] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 18:11:13,637] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 18:11:13,898] [INFO] [__main__] Bot shutdown complete
[2025-11-25 18:11:13,899] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:11:18,293] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 18:11:18,293] [INFO] [__main__] Starting bot polling
[2025-11-25 18:11:18,294] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 18:11:18,457] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:30:38,927] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 18:30:38,927] [INFO] [aiogram.event] Update id=131879095 is handled. Duration 207 ms by bot id=8440100118
[2025-11-25 18:30:42,018] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:30:42,018] [INFO] [aiogram.event] Update id=131879096 is handled. Duration 265 ms by bot id=8440100118
[2025-11-25 18:30:45,491] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:30:45,491] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:30:45,637] [INFO] [aiogram.event] Update id=131879097 is handled. Duration 146 ms by bot id=8440100118
[2025-11-25 18:30:53,095] [INFO] [database.crud] Fetched wish 1
[2025-11-25 18:30:53,096] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:30:53,117] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -5000.0
[2025-11-25 18:30:53,122] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-25 18:30:53,127] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-25 18:30:53,195] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=Инструменты, savings_category=сбережения, price=5000.00, savings_before=202000.00)
[2025-11-25 18:30:53,195] [INFO] [aiogram.event] Update id=131879098 is handled. Duration 100 ms by bot id=8440100118
[2025-11-25 18:31:01,945] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-25 18:31:02,042] [INFO] [aiogram.event] Update id=131879099 is handled. Duration 100 ms by bot id=8440100118
[2025-11-25 18:31:21,876] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:31:21,876] [INFO] [aiogram.event] Update id=131879100 is handled. Duration 330 ms by bot id=8440100118
[2025-11-25 18:31:25,143] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:25,143] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:25,277] [INFO] [aiogram.event] Update id=131879101 is handled. Duration 134 ms by bot id=8440100118
[2025-11-25 18:31:27,975] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:27,975] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:28,038] [INFO] [aiogram.event] Update id=131879102 is not handled. Duration 63 ms by bot id=8440100118
[2025-11-25 18:31:28,039] [ERROR] [aiogram.event] Cause exception while process update id=131879102 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 42, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 18:31:35,236] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:35,236] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:35,385] [INFO] [aiogram.event] Update id=131879103 is not handled. Duration 150 ms by bot id=8440100118
[2025-11-25 18:31:35,385] [ERROR] [aiogram.event] Cause exception while process update id=131879103 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 42, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 18:31:39,502] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:39,502] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:39,618] [INFO] [aiogram.event] Update id=131879104 is not handled. Duration 116 ms by bot id=8440100118
[2025-11-25 18:31:39,618] [ERROR] [aiogram.event] Cause exception while process update id=131879104 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 42, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 18:31:43,690] [INFO] [aiogram.event] Update id=131879105 is handled. Duration 152 ms by bot id=8440100118
[2025-11-25 18:31:46,481] [INFO] [aiogram.event] Update id=131879106 is handled. Duration 81 ms by bot id=8440100118
[2025-11-25 18:31:50,985] [INFO] [aiogram.event] Update id=131879107 is handled. Duration 70 ms by bot id=8440100118
[2025-11-25 18:31:54,345] [INFO] [aiogram.event] Update id=131879108 is handled. Duration 89 ms by bot id=8440100118
[2025-11-25 18:31:55,963] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-25 18:31:56,146] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-25 18:31:56,146] [INFO] [aiogram.event] Update id=131879109 is handled. Duration 200 ms by bot id=8440100118
[2025-11-25 18:32:04,045] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 18:32:04,045] [INFO] [aiogram.event] Update id=131879110 is handled. Duration 85 ms by bot id=8440100118
[2025-11-25 18:32:05,259] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 18:32:05,259] [INFO] [aiogram.event] Update id=131879111 is handled. Duration 123 ms by bot id=8440100118
[2025-11-25 18:32:06,670] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 18:32:06,670] [INFO] [aiogram.event] Update id=131879112 is handled. Duration 133 ms by bot id=8440100118
[2025-11-25 18:32:07,869] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:32:07,870] [INFO] [aiogram.event] Update id=131879113 is handled. Duration 226 ms by bot id=8440100118
[2025-11-25 18:32:09,155] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:32:09,155] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:32:09,332] [INFO] [aiogram.event] Update id=131879114 is handled. Duration 178 ms by bot id=8440100118
[2025-11-25 18:32:17,757] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 18:32:17,758] [INFO] [aiogram.event] Update id=131879115 is handled. Duration 74 ms by bot id=8440100118
[2025-11-25 18:33:13,134] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:33:13,134] [INFO] [aiogram.event] Update id=131879116 is handled. Duration 223 ms by bot id=8440100118
[2025-11-25 18:36:01,192] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 18:36:01,192] [INFO] [aiogram.event] Update id=131879117 is handled. Duration 83 ms by bot id=8440100118
[2025-11-25 18:36:02,953] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 18:36:02,954] [INFO] [aiogram.event] Update id=131879118 is handled. Duration 85 ms by bot id=8440100118
[2025-11-25 18:36:08,641] [INFO] [aiogram.event] Update id=131879119 is handled. Duration 80 ms by bot id=8440100118
[2025-11-25 18:36:10,121] [INFO] [aiogram.event] Update id=131879120 is not handled. Duration 1 ms by bot id=8440100118
[2025-11-25 18:36:10,121] [ERROR] [aiogram.event] Cause exception while process update id=131879120 by bot id=8440100118
TypeError: can only concatenate str (not "float") to str
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 110, in handle_category_confirmation
    FinanceDatabase().update_saving(user_id=message.from_user.id, category=current["category"], amount_delta=current["amount"])
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\database\crud.py", line 154, in update_saving
    new_value = row["current"] + amount_delta
                ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
TypeError: can only concatenate str (not "float") to str
[2025-11-25 18:36:21,839] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 18:36:21,840] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 18:36:21,840] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 18:36:22,095] [INFO] [__main__] Bot shutdown complete
[2025-11-25 18:36:22,095] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:36:26,690] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 18:36:26,691] [INFO] [__main__] Starting bot polling
[2025-11-25 18:36:26,691] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 18:36:26,857] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:36:38,625] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 18:36:38,625] [INFO] [aiogram.event] Update id=131879121 is handled. Duration 176 ms by bot id=8440100118
[2025-11-25 18:36:40,625] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 18:36:40,625] [INFO] [aiogram.event] Update id=131879122 is handled. Duration 155 ms by bot id=8440100118
[2025-11-25 18:36:47,057] [INFO] [aiogram.event] Update id=131879123 is handled. Duration 132 ms by bot id=8440100118
[2025-11-25 18:36:49,481] [INFO] [aiogram.event] Update id=131879124 is not handled. Duration 2 ms by bot id=8440100118
[2025-11-25 18:36:49,481] [ERROR] [aiogram.event] Cause exception while process update id=131879124 by bot id=8440100118
TypeError: can only concatenate str (not "float") to str
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 110, in handle_category_confirmation
    FinanceDatabase().update_saving(user_id=message.from_user.id, category=current["category"], amount_delta=current["amount"])
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\database\crud.py", line 154, in update_saving
    new_value = row["current"] + amount_delta
                ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
TypeError: can only concatenate str (not "float") to str
[2025-11-25 18:37:06,940] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 18:37:06,941] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 18:37:06,941] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 18:37:07,194] [INFO] [__main__] Bot shutdown complete
[2025-11-25 18:37:07,194] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 19:33:14,988] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 19:33:14,988] [INFO] [__main__] Starting bot polling
[2025-11-25 19:33:14,988] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 19:33:15,151] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 19:33:29,960] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 19:33:29,960] [INFO] [aiogram.event] Update id=131879125 is handled. Duration 183 ms by bot id=8440100118
[2025-11-25 19:33:35,171] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 19:33:35,171] [INFO] [aiogram.event] Update id=131879126 is handled. Duration 95 ms by bot id=8440100118
[2025-11-25 19:33:44,301] [INFO] [aiogram.event] Update id=131879127 is handled. Duration 117 ms by bot id=8440100118
[2025-11-25 19:33:47,281] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3000.0
[2025-11-25 19:33:47,656] [INFO] [aiogram.event] Update id=131879128 is handled. Duration 386 ms by bot id=8440100118
[2025-11-25 19:33:49,258] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2000.0
[2025-11-25 19:33:49,481] [INFO] [aiogram.event] Update id=131879129 is handled. Duration 253 ms by bot id=8440100118
[2025-11-25 19:33:51,401] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2000.0
[2025-11-25 19:33:51,552] [INFO] [aiogram.event] Update id=131879130 is handled. Duration 156 ms by bot id=8440100118
[2025-11-25 19:33:55,414] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2000.0
[2025-11-25 19:33:55,564] [INFO] [aiogram.event] Update id=131879131 is handled. Duration 158 ms by bot id=8440100118
[2025-11-25 19:33:58,463] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1000.0
[2025-11-25 19:33:58,543] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 19:33:58,620] [INFO] [aiogram.event] Update id=131879132 is handled. Duration 168 ms by bot id=8440100118
[2025-11-25 19:34:11,572] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 19:34:11,572] [INFO] [aiogram.event] Update id=131879133 is handled. Duration 158 ms by bot id=8440100118
[2025-11-25 19:34:13,621] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 19:34:13,621] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 19:34:13,753] [INFO] [aiogram.event] Update id=131879134 is handled. Duration 133 ms by bot id=8440100118
[2025-11-25 19:40:07,295] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 19:40:07,296] [INFO] [aiogram.event] Update id=131879135 is handled. Duration 114 ms by bot id=8440100118
[2025-11-25 19:40:09,646] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 19:40:09,646] [INFO] [aiogram.event] Update id=131879136 is handled. Duration 173 ms by bot id=8440100118
[2025-11-25 19:40:37,574] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 19:40:37,574] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 19:40:37,656] [INFO] [aiogram.event] Update id=131879137 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 09:19:15,959] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-26 09:19:16,097] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 09:19:17,178] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:17,178] [WARNING] [aiogram.dispatcher] Sleep for 1.260379 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-26 09:19:18,454] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:18,455] [WARNING] [aiogram.dispatcher] Sleep for 1.657413 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-26 09:19:20,120] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:20,120] [WARNING] [aiogram.dispatcher] Sleep for 2.194204 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-26 09:19:22,330] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:22,330] [WARNING] [aiogram.dispatcher] Sleep for 2.959031 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-11-26 09:19:25,490] [INFO] [aiogram.dispatcher] Connection established (tryings = 5, bot id = 8440100118)
[2025-11-26 09:19:25,497] [INFO] [handlers.common] Fallback triggered. User: 7085072764 State: None Text: Напиши, как ты Вероника
[2025-11-26 09:19:25,498] [INFO] [handlers.common] Fallback triggered. User: 7085072764 State: None Text: Я с тобой всегда
[2025-11-26 09:19:25,671] [INFO] [aiogram.event] Update id=131879139 is handled. Duration 179 ms by bot id=8440100118
[2025-11-26 09:19:25,690] [INFO] [aiogram.event] Update id=131879138 is handled. Duration 198 ms by bot id=8440100118
[2025-11-26 09:45:40,796] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 09:45:40,798] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 09:45:40,798] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 09:45:41,059] [INFO] [__main__] Bot shutdown complete
[2025-11-26 09:45:41,061] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 09:45:46,634] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 09:45:46,634] [INFO] [__main__] Starting bot polling
[2025-11-26 09:45:46,634] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 09:45:46,794] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 09:45:49,894] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 09:45:49,894] [INFO] [aiogram.event] Update id=131879140 is handled. Duration 212 ms by bot id=8440100118
[2025-11-26 09:46:04,603] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 09:46:04,604] [INFO] [aiogram.event] Update id=131879141 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 09:46:10,320] [INFO] [aiogram.event] Update id=131879142 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 09:46:11,865] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3000.0
[2025-11-26 09:46:12,024] [INFO] [aiogram.event] Update id=131879143 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 09:46:17,922] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2000.0
[2025-11-26 09:46:18,066] [INFO] [aiogram.event] Update id=131879144 is handled. Duration 174 ms by bot id=8440100118
[2025-11-26 09:46:19,505] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2000.0
[2025-11-26 09:46:19,646] [INFO] [aiogram.event] Update id=131879145 is handled. Duration 148 ms by bot id=8440100118
[2025-11-26 09:46:21,464] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2000.0
[2025-11-26 09:46:21,635] [INFO] [aiogram.event] Update id=131879146 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 09:46:22,707] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1000.0
[2025-11-26 09:46:22,781] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 09:46:22,857] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:46:22,857] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:46:22,935] [INFO] [aiogram.event] Update id=131879147 is handled. Duration 257 ms by bot id=8440100118
[2025-11-26 09:46:42,998] [INFO] [database.crud] Fetched wish 2
[2025-11-26 09:46:42,998] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:46:43,030] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -766.0
[2025-11-26 09:46:43,034] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 09:46:43,039] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 09:46:43,105] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=Инструменты, savings_category=сбережения, price=766.00, savings_before=4000.00)
[2025-11-26 09:46:43,105] [INFO] [aiogram.event] Update id=131879148 is handled. Duration 108 ms by bot id=8440100118
[2025-11-26 09:46:59,137] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 09:46:59,138] [INFO] [aiogram.event] Update id=131879149 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 09:47:02,522] [INFO] [aiogram.event] Update id=131879150 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 09:47:03,748] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 09:47:03,887] [INFO] [aiogram.event] Update id=131879151 is handled. Duration 145 ms by bot id=8440100118
[2025-11-26 09:47:04,817] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 09:47:04,964] [INFO] [aiogram.event] Update id=131879152 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 09:47:06,035] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 09:47:06,174] [INFO] [aiogram.event] Update id=131879153 is handled. Duration 156 ms by bot id=8440100118
[2025-11-26 09:47:06,947] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 09:47:07,088] [INFO] [aiogram.event] Update id=131879154 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 09:47:08,003] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 09:47:08,078] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 09:47:08,152] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:47:08,153] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:47:08,153] [INFO] [aiogram.event] Update id=131879155 is handled. Duration 174 ms by bot id=8440100118
[2025-11-26 09:47:58,152] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:47:58,152] [INFO] [aiogram.event] Update id=131879156 is handled. Duration 343 ms by bot id=8440100118
[2025-11-26 09:48:17,366] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:17,366] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:17,435] [INFO] [aiogram.event] Update id=131879157 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 09:48:22,347] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:22,347] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:22,408] [INFO] [aiogram.event] Update id=131879158 is not handled. Duration 61 ms by bot id=8440100118
[2025-11-26 09:48:22,408] [ERROR] [aiogram.event] Cause exception while process update id=131879158 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:28,112] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:28,112] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:28,301] [INFO] [aiogram.event] Update id=131879159 is not handled. Duration 189 ms by bot id=8440100118
[2025-11-26 09:48:28,301] [ERROR] [aiogram.event] Cause exception while process update id=131879159 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:30,079] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 09:48:30,145] [INFO] [aiogram.event] Update id=131879160 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 09:48:34,733] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:48:34,733] [INFO] [aiogram.event] Update id=131879161 is handled. Duration 148 ms by bot id=8440100118
[2025-11-26 09:48:36,466] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 09:48:36,547] [INFO] [aiogram.event] Update id=131879162 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 09:48:38,289] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:48:38,290] [INFO] [aiogram.event] Update id=131879163 is handled. Duration 147 ms by bot id=8440100118
[2025-11-26 09:48:41,918] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:41,918] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:41,993] [INFO] [aiogram.event] Update id=131879164 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 09:48:46,047] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:46,048] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:46,153] [INFO] [aiogram.event] Update id=131879165 is not handled. Duration 105 ms by bot id=8440100118
[2025-11-26 09:48:46,153] [ERROR] [aiogram.event] Cause exception while process update id=131879165 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:48,255] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:48,256] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:48,379] [INFO] [aiogram.event] Update id=131879166 is not handled. Duration 124 ms by bot id=8440100118
[2025-11-26 09:48:48,379] [ERROR] [aiogram.event] Cause exception while process update id=131879166 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:50,324] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 09:48:50,324] [INFO] [aiogram.event] Update id=131879167 is handled. Duration 228 ms by bot id=8440100118
[2025-11-26 09:57:36,056] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:57:36,056] [INFO] [aiogram.event] Update id=131879168 is handled. Duration 145 ms by bot id=8440100118
[2025-11-26 09:57:38,343] [INFO] [aiogram.event] Update id=131879169 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 09:57:50,001] [INFO] [aiogram.event] Update id=131879170 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 09:57:54,476] [INFO] [aiogram.event] Update id=131879171 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 09:59:43,735] [INFO] [aiogram.event] Update id=131879172 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 09:59:45,852] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 09:59:45,919] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 09:59:45,919] [INFO] [aiogram.event] Update id=131879173 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 09:59:53,307] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 09:59:53,307] [INFO] [aiogram.event] Update id=131879174 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 09:59:55,004] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:59:55,005] [INFO] [aiogram.event] Update id=131879175 is handled. Duration 241 ms by bot id=8440100118
[2025-11-26 09:59:57,401] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:59:57,402] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:59:57,475] [INFO] [aiogram.event] Update id=131879176 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:14:24,916] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:14:24,917] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:14:24,917] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:14:25,172] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:14:25,173] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:14:29,354] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:14:29,355] [INFO] [__main__] Starting bot polling
[2025-11-26 10:14:29,355] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:14:29,513] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:16:49,699] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:16:49,700] [INFO] [aiogram.event] Update id=131879177 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 10:16:53,471] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:16:53,471] [INFO] [aiogram.event] Update id=131879178 is handled. Duration 309 ms by bot id=8440100118
[2025-11-26 10:16:56,643] [INFO] [aiogram.event] Update id=131879179 is handled. Duration 97 ms by bot id=8440100118
[2025-11-26 10:18:48,151] [INFO] [aiogram.event] Update id=131879180 is handled. Duration 68 ms by bot id=8440100118
[2025-11-26 10:18:52,430] [INFO] [aiogram.event] Update id=131879181 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:19:14,300] [INFO] [aiogram.event] Update id=131879182 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 10:19:19,884] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 10:19:19,996] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 10:19:19,997] [INFO] [aiogram.event] Update id=131879183 is handled. Duration 139 ms by bot id=8440100118
[2025-11-26 10:19:26,107] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:19:26,107] [INFO] [aiogram.event] Update id=131879184 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:19:29,329] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:19:29,329] [INFO] [aiogram.event] Update id=131879185 is handled. Duration 230 ms by bot id=8440100118
[2025-11-26 10:19:30,839] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:19:30,839] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:19:31,031] [INFO] [aiogram.event] Update id=131879186 is handled. Duration 193 ms by bot id=8440100118
[2025-11-26 10:21:21,662] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:21:21,662] [INFO] [aiogram.event] Update id=131879187 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:21:23,556] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:21:23,556] [INFO] [aiogram.event] Update id=131879188 is handled. Duration 106 ms by bot id=8440100118
[2025-11-26 10:21:29,724] [INFO] [aiogram.event] Update id=131879189 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:21:30,976] [INFO] [database.crud] Updated saving for user 838347504 category долги by 300000.0
[2025-11-26 10:21:31,132] [INFO] [aiogram.event] Update id=131879190 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 10:21:32,843] [INFO] [database.crud] Updated saving for user 838347504 category быт by 200000.0
[2025-11-26 10:21:33,176] [INFO] [aiogram.event] Update id=131879191 is handled. Duration 348 ms by bot id=8440100118
[2025-11-26 10:21:34,382] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 200000.0
[2025-11-26 10:21:34,520] [INFO] [aiogram.event] Update id=131879192 is handled. Duration 157 ms by bot id=8440100118
[2025-11-26 10:21:35,993] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 200000.0
[2025-11-26 10:21:36,192] [INFO] [aiogram.event] Update id=131879193 is handled. Duration 205 ms by bot id=8440100118
[2025-11-26 10:21:38,678] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 100000.0
[2025-11-26 10:21:38,748] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:21:38,824] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:21:38,825] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:21:38,897] [INFO] [aiogram.event] Update id=131879194 is handled. Duration 227 ms by bot id=8440100118
[2025-11-26 10:21:53,065] [INFO] [database.crud] Fetched wish 3
[2025-11-26 10:21:53,065] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:21:53,081] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -12000.0
[2025-11-26 10:21:53,085] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 10:21:53,090] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:21:53,156] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=вклад в себя, savings_category=инвестиции, price=12000.00, savings_before=204002.00)
[2025-11-26 10:21:53,156] [INFO] [aiogram.event] Update id=131879195 is handled. Duration 91 ms by bot id=8440100118
[2025-11-26 10:22:06,727] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:22:06,727] [INFO] [aiogram.event] Update id=131879196 is handled. Duration 171 ms by bot id=8440100118
[2025-11-26 10:22:08,836] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:22:08,837] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:22:08,907] [INFO] [aiogram.event] Update id=131879197 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:22:12,476] [INFO] [database.crud] Fetched wish 4
[2025-11-26 10:22:12,476] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:22:12,494] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -12000.0
[2025-11-26 10:22:12,499] [INFO] [database.crud] Marked wish 4 as purchased
[2025-11-26 10:22:12,503] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:22:12,567] [INFO] [handlers.callbacks] User 838347504 purchased wish 4 (wishlist_category=вклад в себя, savings_category=инвестиции, price=12000.00, savings_before=192002.00)
[2025-11-26 10:22:12,567] [INFO] [aiogram.event] Update id=131879198 is handled. Duration 91 ms by bot id=8440100118
[2025-11-26 10:22:28,962] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:22:28,963] [INFO] [aiogram.event] Update id=131879199 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:23:26,650] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:23:26,651] [INFO] [aiogram.event] Update id=131879200 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:23:29,927] [INFO] [aiogram.event] Update id=131879201 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:23:31,289] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:23:31,438] [INFO] [aiogram.event] Update id=131879202 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 10:23:32,182] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:23:32,324] [INFO] [aiogram.event] Update id=131879203 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 10:23:33,219] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:23:33,402] [INFO] [aiogram.event] Update id=131879204 is handled. Duration 203 ms by bot id=8440100118
[2025-11-26 10:23:34,247] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:23:34,400] [INFO] [aiogram.event] Update id=131879205 is handled. Duration 192 ms by bot id=8440100118
[2025-11-26 10:23:35,765] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:23:35,915] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:23:36,037] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:23:36,038] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:23:36,038] [INFO] [aiogram.event] Update id=131879206 is handled. Duration 289 ms by bot id=8440100118
[2025-11-26 10:26:03,693] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:26:03,694] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:26:03,694] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:26:03,947] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:26:03,948] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:29:37,124] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:29:37,124] [INFO] [__main__] Starting bot polling
[2025-11-26 10:29:37,124] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:29:37,160] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:29:37,423] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:29:37,749] [ERROR] [asyncio] Task exception was never retrieved
future: <Task finished name='Task-2' coro=<Dispatcher._polling() done, defined at C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py:339> exception=TelegramNetworkError('HTTP Client says - ClientConnectionError: Connector is closed.')>
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 177, in make_request
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 770, in _request
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 725, in _connect_and_send_request
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\connector.py", line 652, in connect
aiohttp.client_exceptions.ClientConnectionError: Connector is closed.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 362, in _polling
    user: User = await bot.me()
                 ^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 357, in me
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1797, in get_me
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 184, in make_request
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectionError: Connector is closed.
[2025-11-26 10:30:01,598] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:30:01,599] [INFO] [__main__] Starting bot polling
[2025-11-26 10:30:01,599] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:30:01,757] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:30:39,339] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:30:39,339] [INFO] [aiogram.event] Update id=131879207 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 10:30:42,211] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:30:42,211] [INFO] [aiogram.event] Update id=131879208 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:30:47,363] [INFO] [aiogram.event] Update id=131879209 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 10:30:53,997] [ERROR] [database.crud] Failed to update saving for user 838347504 category долги: database is locked
[2025-11-26 10:30:54,148] [INFO] [aiogram.event] Update id=131879210 is handled. Duration 5691 ms by bot id=8440100118
[2025-11-26 10:30:56,840] [ERROR] [database.crud] Failed to update saving for user 838347504 category быт: database is locked
[2025-11-26 10:30:56,984] [INFO] [aiogram.event] Update id=131879211 is handled. Duration 145 ms by bot id=8440100118
[2025-11-26 10:30:58,439] [ERROR] [database.crud] Failed to update saving for user 838347504 category инвестиции: database is locked
[2025-11-26 10:30:58,583] [INFO] [aiogram.event] Update id=131879212 is handled. Duration 144 ms by bot id=8440100118
[2025-11-26 10:31:00,073] [ERROR] [database.crud] Failed to update saving for user 838347504 category сбережения: database is locked
[2025-11-26 10:31:00,262] [INFO] [aiogram.event] Update id=131879213 is handled. Duration 191 ms by bot id=8440100118
[2025-11-26 10:31:01,563] [ERROR] [database.crud] Failed to update saving for user 838347504 category спонтанные траты: database is locked
[2025-11-26 10:31:01,656] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:31:01,737] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:31:01,737] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:31:01,738] [INFO] [aiogram.event] Update id=131879214 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 10:32:53,521] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:32:53,522] [INFO] [aiogram.event] Update id=131879215 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 10:32:55,567] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:32:55,567] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:32:55,643] [INFO] [aiogram.event] Update id=131879216 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:32:57,416] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:32:57,416] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:32:57,501] [INFO] [aiogram.event] Update id=131879217 is not handled. Duration 85 ms by bot id=8440100118
[2025-11-26 10:32:57,501] [ERROR] [aiogram.event] Cause exception while process update id=131879217 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:00,634] [INFO] [aiogram.event] Update id=131879218 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:33:04,864] [INFO] [aiogram.event] Update id=131879219 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:33:08,794] [INFO] [aiogram.event] Update id=131879220 is handled. Duration 98 ms by bot id=8440100118
[2025-11-26 10:33:17,991] [INFO] [aiogram.event] Update id=131879221 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 10:33:19,812] [ERROR] [database.crud] Failed to add wish for user 838347504: database is locked
[2025-11-26 10:33:19,888] [INFO] [handlers.callbacks] User 838347504 added wish 0
[2025-11-26 10:33:19,888] [INFO] [aiogram.event] Update id=131879222 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 10:33:25,874] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 10:33:25,947] [INFO] [aiogram.event] Update id=131879223 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:33:31,505] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:33:31,505] [INFO] [aiogram.event] Update id=131879224 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 10:33:32,612] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:32,612] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:32,681] [INFO] [aiogram.event] Update id=131879225 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:33:34,213] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:34,213] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:34,282] [INFO] [aiogram.event] Update id=131879226 is not handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:33:34,283] [ERROR] [aiogram.event] Cause exception while process update id=131879226 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:35,158] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:35,158] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:35,219] [INFO] [aiogram.event] Update id=131879227 is not handled. Duration 61 ms by bot id=8440100118
[2025-11-26 10:33:35,219] [ERROR] [aiogram.event] Cause exception while process update id=131879227 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:35,678] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:35,679] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:35,798] [INFO] [aiogram.event] Update id=131879228 is not handled. Duration 120 ms by bot id=8440100118
[2025-11-26 10:33:35,798] [ERROR] [aiogram.event] Cause exception while process update id=131879228 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:36,156] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:36,156] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:36,214] [INFO] [aiogram.event] Update id=131879229 is not handled. Duration 58 ms by bot id=8440100118
[2025-11-26 10:33:36,214] [ERROR] [aiogram.event] Cause exception while process update id=131879229 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:35:41,876] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:35:41,877] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:35:41,877] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:35:42,129] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:35:42,129] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:35:46,359] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:35:46,359] [INFO] [__main__] Starting bot polling
[2025-11-26 10:35:46,359] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:35:46,523] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:35:50,140] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:35:50,141] [INFO] [aiogram.event] Update id=131879230 is handled. Duration 172 ms by bot id=8440100118
[2025-11-26 10:35:53,939] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:35:53,939] [INFO] [aiogram.event] Update id=131879231 is handled. Duration 157 ms by bot id=8440100118
[2025-11-26 10:35:55,638] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:35:55,639] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:35:55,706] [INFO] [aiogram.event] Update id=131879232 is handled. Duration 68 ms by bot id=8440100118
[2025-11-26 10:35:59,722] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:35:59,722] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:35:59,953] [INFO] [aiogram.event] Update id=131879233 is not handled. Duration 232 ms by bot id=8440100118
[2025-11-26 10:35:59,954] [ERROR] [aiogram.event] Cause exception while process update id=131879233 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 94, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:36:02,054] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:02,054] [INFO] [aiogram.event] Update id=131879234 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:36:03,255] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:03,255] [INFO] [aiogram.event] Update id=131879235 is handled. Duration 154 ms by bot id=8440100118
[2025-11-26 10:36:04,453] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:36:04,453] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:36:04,518] [INFO] [aiogram.event] Update id=131879236 is handled. Duration 65 ms by bot id=8440100118
[2025-11-26 10:36:06,096] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:06,096] [INFO] [aiogram.event] Update id=131879237 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:36:08,396] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:08,396] [INFO] [aiogram.event] Update id=131879238 is handled. Duration 403 ms by bot id=8440100118
[2025-11-26 10:36:09,567] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:36:09,568] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:36:09,638] [INFO] [aiogram.event] Update id=131879239 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:36:14,351] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:14,351] [INFO] [aiogram.event] Update id=131879240 is handled. Duration 68 ms by bot id=8440100118
[2025-11-26 10:36:18,113] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:18,113] [INFO] [aiogram.event] Update id=131879241 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 10:36:19,813] [INFO] [aiogram.event] Update id=131879242 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 10:36:26,016] [INFO] [aiogram.event] Update id=131879243 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:36:29,133] [INFO] [aiogram.event] Update id=131879244 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:36:30,629] [INFO] [aiogram.event] Update id=131879245 is handled. Duration 128 ms by bot id=8440100118
[2025-11-26 10:36:42,794] [INFO] [database.crud] Added wish 5 for user 838347504
[2025-11-26 10:36:42,924] [INFO] [handlers.callbacks] User 838347504 added wish 5
[2025-11-26 10:36:42,924] [INFO] [aiogram.event] Update id=131879246 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 10:36:47,655] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:47,656] [INFO] [aiogram.event] Update id=131879247 is handled. Duration 244 ms by bot id=8440100118
[2025-11-26 10:36:49,187] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:49,187] [INFO] [aiogram.event] Update id=131879248 is handled. Duration 153 ms by bot id=8440100118
[2025-11-26 10:36:50,438] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:36:50,438] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:36:50,521] [INFO] [aiogram.event] Update id=131879249 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 10:37:11,552] [INFO] [database.crud] Fetched wish 5
[2025-11-26 10:37:11,553] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:37:11,580] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -5567.0
[2025-11-26 10:37:11,584] [INFO] [database.crud] Marked wish 5 as purchased
[2025-11-26 10:37:11,589] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:37:11,662] [INFO] [handlers.callbacks] User 838347504 purchased wish 5 (wishlist_category=кайфы, savings_category=спонтанные траты, price=5567.00, savings_before=102002.00)
[2025-11-26 10:37:11,662] [INFO] [aiogram.event] Update id=131879250 is handled. Duration 111 ms by bot id=8440100118
[2025-11-26 10:37:20,196] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:37:20,196] [INFO] [aiogram.event] Update id=131879251 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:37:23,726] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:37:23,726] [INFO] [aiogram.event] Update id=131879252 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:37:26,899] [INFO] [aiogram.event] Update id=131879253 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:37:28,008] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:37:28,154] [INFO] [aiogram.event] Update id=131879254 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 10:37:29,033] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:37:29,178] [INFO] [aiogram.event] Update id=131879255 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 10:37:30,037] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:37:30,216] [INFO] [aiogram.event] Update id=131879256 is handled. Duration 199 ms by bot id=8440100118
[2025-11-26 10:37:31,003] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:37:31,164] [INFO] [aiogram.event] Update id=131879257 is handled. Duration 178 ms by bot id=8440100118
[2025-11-26 10:37:32,044] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:37:32,235] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:37:32,390] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:37:32,390] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:37:32,390] [INFO] [aiogram.event] Update id=131879258 is handled. Duration 366 ms by bot id=8440100118
[2025-11-26 10:37:51,615] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:37:51,616] [INFO] [aiogram.event] Update id=131879259 is handled. Duration 173 ms by bot id=8440100118
[2025-11-26 10:37:53,333] [INFO] [aiogram.event] Update id=131879260 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:37:59,932] [INFO] [aiogram.event] Update id=131879261 is handled. Duration 196 ms by bot id=8440100118
[2025-11-26 10:38:04,612] [INFO] [aiogram.event] Update id=131879262 is handled. Duration 80 ms by bot id=8440100118
[2025-11-26 10:38:06,210] [INFO] [aiogram.event] Update id=131879263 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 10:38:07,688] [INFO] [database.crud] Added wish 6 for user 838347504
[2025-11-26 10:38:07,754] [INFO] [handlers.callbacks] User 838347504 added wish 6
[2025-11-26 10:38:07,754] [INFO] [aiogram.event] Update id=131879264 is handled. Duration 89 ms by bot id=8440100118
[2025-11-26 10:38:12,619] [INFO] [aiogram.event] Update id=131879265 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 10:38:18,337] [INFO] [aiogram.event] Update id=131879266 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:38:23,357] [INFO] [aiogram.event] Update id=131879267 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:38:24,715] [INFO] [aiogram.event] Update id=131879268 is handled. Duration 120 ms by bot id=8440100118
[2025-11-26 10:38:25,557] [INFO] [database.crud] Added wish 7 for user 838347504
[2025-11-26 10:38:25,623] [INFO] [handlers.callbacks] User 838347504 added wish 7
[2025-11-26 10:38:25,623] [INFO] [aiogram.event] Update id=131879269 is handled. Duration 105 ms by bot id=8440100118
[2025-11-26 10:38:30,005] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:38:30,005] [INFO] [aiogram.event] Update id=131879270 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:38:47,562] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:38:47,562] [INFO] [aiogram.event] Update id=131879271 is handled. Duration 107 ms by bot id=8440100118
[2025-11-26 10:38:51,324] [INFO] [aiogram.event] Update id=131879272 is handled. Duration 118 ms by bot id=8440100118
[2025-11-26 10:38:52,451] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:38:52,648] [INFO] [aiogram.event] Update id=131879273 is handled. Duration 213 ms by bot id=8440100118
[2025-11-26 10:38:53,430] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:38:53,598] [INFO] [aiogram.event] Update id=131879274 is handled. Duration 191 ms by bot id=8440100118
[2025-11-26 10:38:54,451] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:38:54,671] [INFO] [aiogram.event] Update id=131879275 is handled. Duration 258 ms by bot id=8440100118
[2025-11-26 10:38:55,453] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:38:55,607] [INFO] [aiogram.event] Update id=131879276 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 10:38:56,556] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:38:56,633] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:38:56,709] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:38:56,709] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:38:56,795] [INFO] [aiogram.event] Update id=131879277 is handled. Duration 258 ms by bot id=8440100118
[2025-11-26 10:40:23,479] [INFO] [database.crud] Fetched wish 7
[2025-11-26 10:40:23,479] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:40:23,494] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -18000.0
[2025-11-26 10:40:23,499] [INFO] [database.crud] Marked wish 7 as purchased
[2025-11-26 10:40:23,504] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:40:23,574] [INFO] [handlers.callbacks] User 838347504 purchased wish 7 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=18000.00, savings_before=180008.00)
[2025-11-26 10:40:23,574] [INFO] [aiogram.event] Update id=131879278 is handled. Duration 96 ms by bot id=8440100118
[2025-11-26 10:40:27,337] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:40:27,338] [INFO] [aiogram.event] Update id=131879279 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 10:40:31,455] [INFO] [aiogram.event] Update id=131879280 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 10:40:32,826] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:40:32,977] [INFO] [aiogram.event] Update id=131879281 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 10:40:33,862] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:40:34,026] [INFO] [aiogram.event] Update id=131879282 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 10:40:34,828] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:40:34,996] [INFO] [aiogram.event] Update id=131879283 is handled. Duration 185 ms by bot id=8440100118
[2025-11-26 10:40:35,872] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:40:36,021] [INFO] [aiogram.event] Update id=131879284 is handled. Duration 185 ms by bot id=8440100118
[2025-11-26 10:40:37,376] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:40:37,446] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:40:37,520] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:40:37,520] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:40:37,592] [INFO] [aiogram.event] Update id=131879285 is handled. Duration 234 ms by bot id=8440100118
[2025-11-26 10:42:48,166] [INFO] [database.crud] Fetched wish 6
[2025-11-26 10:42:48,167] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:42:48,182] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -10000.0
[2025-11-26 10:42:48,187] [INFO] [database.crud] Marked wish 6 as purchased
[2025-11-26 10:42:48,191] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:42:48,387] [INFO] [handlers.callbacks] User 838347504 purchased wish 6 (wishlist_category=вклад в себя, savings_category=сбережения, price=10000.00, savings_before=203244.00)
[2025-11-26 10:42:48,387] [INFO] [aiogram.event] Update id=131879286 is handled. Duration 222 ms by bot id=8440100118
[2025-11-26 10:42:52,000] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:42:52,000] [INFO] [aiogram.event] Update id=131879287 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:42:57,027] [INFO] [aiogram.event] Update id=131879288 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:42:58,112] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:42:58,288] [INFO] [aiogram.event] Update id=131879289 is handled. Duration 193 ms by bot id=8440100118
[2025-11-26 10:42:59,148] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:42:59,294] [INFO] [aiogram.event] Update id=131879290 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 10:43:00,028] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:43:00,212] [INFO] [aiogram.event] Update id=131879291 is handled. Duration 189 ms by bot id=8440100118
[2025-11-26 10:43:00,980] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:43:01,167] [INFO] [aiogram.event] Update id=131879292 is handled. Duration 202 ms by bot id=8440100118
[2025-11-26 10:43:02,078] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:43:02,166] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:43:02,241] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:43:02,241] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:43:02,242] [INFO] [aiogram.event] Update id=131879293 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 10:47:44,855] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:47:44,856] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:47:44,856] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:47:45,117] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:47:45,118] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:47:59,023] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:47:59,023] [INFO] [__main__] Starting bot polling
[2025-11-26 10:47:59,023] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:47:59,192] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:49:53,752] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:49:53,752] [INFO] [aiogram.event] Update id=131879294 is handled. Duration 189 ms by bot id=8440100118
[2025-11-26 10:49:55,512] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:49:55,512] [INFO] [aiogram.event] Update id=131879295 is handled. Duration 188 ms by bot id=8440100118
[2025-11-26 10:49:58,241] [INFO] [aiogram.event] Update id=131879296 is handled. Duration 115 ms by bot id=8440100118
[2025-11-26 10:50:04,144] [INFO] [aiogram.event] Update id=131879297 is handled. Duration 158 ms by bot id=8440100118
[2025-11-26 10:50:08,525] [INFO] [aiogram.event] Update id=131879298 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 10:50:09,716] [INFO] [aiogram.event] Update id=131879299 is handled. Duration 131 ms by bot id=8440100118
[2025-11-26 10:50:10,758] [INFO] [database.crud] Added wish 1 for user 838347504
[2025-11-26 10:50:10,827] [INFO] [handlers.callbacks] User 838347504 added wish 1
[2025-11-26 10:50:10,828] [INFO] [aiogram.event] Update id=131879300 is handled. Duration 86 ms by bot id=8440100118
[2025-11-26 10:50:14,454] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:50:14,455] [INFO] [aiogram.event] Update id=131879301 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 10:50:16,338] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:50:16,338] [INFO] [aiogram.event] Update id=131879302 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:50:21,897] [INFO] [aiogram.event] Update id=131879303 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:50:23,209] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 10:50:23,445] [INFO] [aiogram.event] Update id=131879304 is handled. Duration 252 ms by bot id=8440100118
[2025-11-26 10:50:24,499] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 10:50:24,651] [INFO] [aiogram.event] Update id=131879305 is handled. Duration 174 ms by bot id=8440100118
[2025-11-26 10:50:25,649] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 10:50:25,788] [INFO] [aiogram.event] Update id=131879306 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 10:50:26,760] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 10:50:26,926] [INFO] [aiogram.event] Update id=131879307 is handled. Duration 182 ms by bot id=8440100118
[2025-11-26 10:50:28,394] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 10:50:28,524] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:50:28,738] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:50:28,738] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:50:28,738] [INFO] [aiogram.event] Update id=131879308 is handled. Duration 381 ms by bot id=8440100118
[2025-11-26 10:50:38,782] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:50:38,782] [INFO] [aiogram.event] Update id=131879309 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:50:42,141] [INFO] [aiogram.event] Update id=131879310 is handled. Duration 95 ms by bot id=8440100118
[2025-11-26 10:50:43,133] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 10:50:43,284] [INFO] [aiogram.event] Update id=131879311 is handled. Duration 166 ms by bot id=8440100118
[2025-11-26 10:50:44,129] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 10:50:44,390] [INFO] [aiogram.event] Update id=131879312 is handled. Duration 267 ms by bot id=8440100118
[2025-11-26 10:50:45,598] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 10:50:45,738] [INFO] [aiogram.event] Update id=131879313 is handled. Duration 156 ms by bot id=8440100118
[2025-11-26 10:50:48,136] [INFO] [aiogram.event] Update id=131879314 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:50:50,872] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 10:50:51,022] [INFO] [aiogram.event] Update id=131879315 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 10:50:52,170] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 10:50:52,276] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:50:52,362] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:50:52,362] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:50:52,441] [INFO] [aiogram.event] Update id=131879316 is handled. Duration 298 ms by bot id=8440100118
[2025-11-26 10:50:57,134] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:50:57,134] [INFO] [aiogram.event] Update id=131879317 is handled. Duration 141 ms by bot id=8440100118
[2025-11-26 10:50:58,101] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:50:58,102] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:50:58,222] [INFO] [aiogram.event] Update id=131879318 is handled. Duration 121 ms by bot id=8440100118
[2025-11-26 10:51:00,853] [INFO] [database.crud] Fetched wish 1
[2025-11-26 10:51:00,853] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:51:00,870] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -20.0
[2025-11-26 10:51:00,875] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-26 10:51:00,880] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:51:00,944] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=кайфы, savings_category=спонтанные траты, price=20.00, savings_before=20.00)
[2025-11-26 10:51:00,944] [INFO] [aiogram.event] Update id=131879319 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 10:51:04,949] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:51:04,949] [INFO] [aiogram.event] Update id=131879320 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 11:56:55,231] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 11:56:55,236] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 11:56:55,237] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 11:56:55,500] [INFO] [__main__] Bot shutdown complete
[2025-11-26 11:56:55,502] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 11:57:06,511] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 11:57:06,512] [INFO] [__main__] Starting bot polling
[2025-11-26 11:57:06,512] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 11:57:06,699] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 11:57:13,094] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 11:57:13,094] [INFO] [aiogram.event] Update id=131879321 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 11:57:15,295] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 11:57:15,296] [INFO] [aiogram.event] Update id=131879322 is handled. Duration 148 ms by bot id=8440100118
[2025-11-26 11:57:17,255] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 11:57:17,256] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 11:57:17,331] [INFO] [aiogram.event] Update id=131879323 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 11:57:18,915] [INFO] [aiogram.event] Update id=131879324 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 11:57:25,660] [INFO] [aiogram.event] Update id=131879325 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 11:57:34,873] [INFO] [aiogram.event] Update id=131879326 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 11:57:36,751] [INFO] [aiogram.event] Update id=131879327 is handled. Duration 298 ms by bot id=8440100118
[2025-11-26 11:57:38,186] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-26 11:57:38,265] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-26 11:57:38,265] [INFO] [aiogram.event] Update id=131879328 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 11:57:52,592] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 11:57:52,593] [INFO] [aiogram.event] Update id=131879329 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 11:57:55,185] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 11:57:55,185] [INFO] [aiogram.event] Update id=131879330 is handled. Duration 147 ms by bot id=8440100118
[2025-11-26 11:58:07,088] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 11:58:07,088] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 11:58:07,158] [INFO] [aiogram.event] Update id=131879331 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 12:00:55,536] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 12:00:55,536] [INFO] [aiogram.event] Update id=131879332 is handled. Duration 79 ms by bot id=8440100118
[2025-11-26 12:00:56,794] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 12:00:56,795] [INFO] [aiogram.event] Update id=131879333 is handled. Duration 141 ms by bot id=8440100118
[2025-11-26 12:01:01,603] [INFO] [aiogram.event] Update id=131879334 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 12:01:02,994] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 12:01:03,174] [INFO] [aiogram.event] Update id=131879335 is handled. Duration 199 ms by bot id=8440100118
[2025-11-26 12:01:04,108] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 12:01:04,321] [INFO] [aiogram.event] Update id=131879336 is handled. Duration 247 ms by bot id=8440100118
[2025-11-26 12:01:05,267] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 12:01:05,448] [INFO] [aiogram.event] Update id=131879337 is handled. Duration 201 ms by bot id=8440100118
[2025-11-26 12:01:06,668] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 12:01:06,830] [INFO] [aiogram.event] Update id=131879338 is handled. Duration 182 ms by bot id=8440100118
[2025-11-26 12:01:08,437] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 12:01:08,599] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 12:01:08,717] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 12:01:08,718] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 12:01:08,814] [INFO] [aiogram.event] Update id=131879339 is handled. Duration 396 ms by bot id=8440100118
[2025-11-26 12:01:12,064] [INFO] [database.crud] Fetched wish 2
[2025-11-26 12:01:12,064] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 12:01:12,086] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -60.0
[2025-11-26 12:01:12,092] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 12:01:12,098] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 12:01:12,184] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 12:01:12,264] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=вклад в себя, savings_category=сбережения, price=60.00, savings_before=60.00)
[2025-11-26 12:01:12,264] [INFO] [aiogram.event] Update id=131879340 is handled. Duration 202 ms by bot id=8440100118
[2025-11-26 12:27:01,838] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 12:27:01,840] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 12:27:01,840] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 12:27:02,094] [INFO] [__main__] Bot shutdown complete
[2025-11-26 12:27:02,094] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 14:45:03,404] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 14:45:03,404] [INFO] [__main__] Starting bot polling
[2025-11-26 14:45:03,405] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 14:45:03,567] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 14:45:39,565] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 14:45:39,565] [INFO] [aiogram.event] Update id=131879341 is handled. Duration 255 ms by bot id=8440100118
[2025-11-26 14:45:41,572] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 14:45:41,572] [INFO] [aiogram.event] Update id=131879342 is handled. Duration 151 ms by bot id=8440100118
[2025-11-26 14:45:43,722] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:45:43,722] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:45:43,791] [INFO] [aiogram.event] Update id=131879343 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 14:45:45,566] [INFO] [aiogram.event] Update id=131879344 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 14:45:53,226] [INFO] [aiogram.event] Update id=131879345 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 14:45:58,357] [INFO] [aiogram.event] Update id=131879346 is handled. Duration 104 ms by bot id=8440100118
[2025-11-26 14:45:59,897] [INFO] [aiogram.event] Update id=131879347 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 14:46:01,309] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 14:46:01,396] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 14:46:01,396] [INFO] [aiogram.event] Update id=131879348 is handled. Duration 112 ms by bot id=8440100118
[2025-11-26 14:46:07,414] [INFO] [aiogram.event] Update id=131879349 is handled. Duration 105 ms by bot id=8440100118
[2025-11-26 14:46:15,318] [INFO] [aiogram.event] Update id=131879350 is handled. Duration 67 ms by bot id=8440100118
[2025-11-26 14:46:20,607] [INFO] [aiogram.event] Update id=131879351 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 14:46:21,928] [INFO] [aiogram.event] Update id=131879352 is handled. Duration 137 ms by bot id=8440100118
[2025-11-26 14:46:22,970] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 14:46:23,116] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 14:46:23,117] [INFO] [aiogram.event] Update id=131879353 is handled. Duration 162 ms by bot id=8440100118
[2025-11-26 14:46:25,866] [INFO] [aiogram.event] Update id=131879354 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 14:46:37,246] [INFO] [aiogram.event] Update id=131879355 is handled. Duration 97 ms by bot id=8440100118
[2025-11-26 14:46:39,612] [INFO] [aiogram.event] Update id=131879356 is handled. Duration 107 ms by bot id=8440100118
[2025-11-26 14:46:41,054] [INFO] [aiogram.event] Update id=131879357 is handled. Duration 254 ms by bot id=8440100118
[2025-11-26 14:46:41,840] [INFO] [database.crud] Added wish 5 for user 838347504
[2025-11-26 14:46:41,909] [INFO] [handlers.callbacks] User 838347504 added wish 5
[2025-11-26 14:46:41,909] [INFO] [aiogram.event] Update id=131879358 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 14:46:45,239] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 14:46:45,239] [INFO] [aiogram.event] Update id=131879359 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 14:46:47,459] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 14:46:47,460] [INFO] [aiogram.event] Update id=131879360 is handled. Duration 153 ms by bot id=8440100118
[2025-11-26 14:46:48,812] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:46:48,812] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:46:48,885] [INFO] [aiogram.event] Update id=131879361 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 14:46:52,362] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:46:52,362] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:46:52,440] [INFO] [aiogram.event] Update id=131879362 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 14:46:53,900] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:46:53,901] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:46:54,024] [INFO] [aiogram.event] Update id=131879363 is handled. Duration 124 ms by bot id=8440100118
[2025-11-26 14:47:13,642] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 14:47:13,642] [INFO] [aiogram.event] Update id=131879364 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 14:47:15,926] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 14:47:15,926] [INFO] [aiogram.event] Update id=131879365 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 14:47:19,639] [INFO] [aiogram.event] Update id=131879366 is handled. Duration 122 ms by bot id=8440100118
[2025-11-26 14:47:20,565] [INFO] [database.crud] Updated saving for user 838347504 category долги by 60.0
[2025-11-26 14:47:20,732] [INFO] [aiogram.event] Update id=131879367 is handled. Duration 201 ms by bot id=8440100118
[2025-11-26 14:47:22,314] [INFO] [database.crud] Updated saving for user 838347504 category быт by 40.0
[2025-11-26 14:47:22,573] [INFO] [aiogram.event] Update id=131879368 is handled. Duration 264 ms by bot id=8440100118
[2025-11-26 14:47:23,543] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 40.0
[2025-11-26 14:47:23,852] [INFO] [aiogram.event] Update id=131879369 is handled. Duration 341 ms by bot id=8440100118
[2025-11-26 14:47:25,204] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 40.0
[2025-11-26 14:47:25,349] [INFO] [aiogram.event] Update id=131879370 is handled. Duration 159 ms by bot id=8440100118
[2025-11-26 14:47:27,010] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 20.0
[2025-11-26 14:47:27,142] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 14:47:27,243] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:47:27,244] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:47:27,368] [INFO] [aiogram.event] Update id=131879371 is handled. Duration 379 ms by bot id=8440100118
[2025-11-26 14:47:41,036] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 14:47:41,036] [INFO] [aiogram.event] Update id=131879372 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 14:47:44,880] [INFO] [aiogram.event] Update id=131879373 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 14:47:46,214] [INFO] [database.crud] Updated saving for user 838347504 category долги by 60.0
[2025-11-26 14:47:46,371] [INFO] [aiogram.event] Update id=131879374 is handled. Duration 179 ms by bot id=8440100118
[2025-11-26 14:47:47,618] [INFO] [database.crud] Updated saving for user 838347504 category быт by 40.0
[2025-11-26 14:47:47,763] [INFO] [aiogram.event] Update id=131879375 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 14:47:49,105] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 40.0
[2025-11-26 14:47:49,273] [INFO] [aiogram.event] Update id=131879376 is handled. Duration 193 ms by bot id=8440100118
[2025-11-26 14:47:50,237] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 40.0
[2025-11-26 14:47:50,379] [INFO] [aiogram.event] Update id=131879377 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 14:47:51,456] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 20.0
[2025-11-26 14:47:51,532] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 14:47:51,603] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:47:51,604] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:47:51,678] [INFO] [aiogram.event] Update id=131879378 is handled. Duration 238 ms by bot id=8440100118
[2025-11-26 14:48:02,251] [INFO] [database.crud] Fetched wish 5
[2025-11-26 14:48:02,251] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:48:02,282] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -50.0
[2025-11-26 14:48:02,286] [INFO] [database.crud] Marked wish 5 as purchased
[2025-11-26 14:48:02,291] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 14:48:02,359] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 14:48:02,438] [INFO] [handlers.callbacks] User 838347504 purchased wish 5 (wishlist_category=кайфы, savings_category=спонтанные траты, price=50.00, savings_before=50.00)
[2025-11-26 14:48:02,438] [INFO] [aiogram.event] Update id=131879379 is handled. Duration 188 ms by bot id=8440100118
[2025-11-26 14:49:18,467] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 14:49:18,467] [INFO] [aiogram.event] Update id=131879380 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 14:49:31,310] [INFO] [aiogram.event] Update id=131879381 is handled. Duration 156 ms by bot id=8440100118
[2025-11-26 14:49:32,444] [INFO] [database.crud] Updated saving for user 838347504 category долги by 90.0
[2025-11-26 14:49:32,685] [INFO] [aiogram.event] Update id=131879382 is handled. Duration 270 ms by bot id=8440100118
[2025-11-26 14:49:33,952] [INFO] [database.crud] Updated saving for user 838347504 category быт by 60.0
[2025-11-26 14:49:34,245] [INFO] [aiogram.event] Update id=131879383 is handled. Duration 310 ms by bot id=8440100118
[2025-11-26 14:49:41,473] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 60.0
[2025-11-26 14:49:41,679] [INFO] [aiogram.event] Update id=131879384 is handled. Duration 223 ms by bot id=8440100118
[2025-11-26 14:49:42,936] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 60.0
[2025-11-26 14:49:43,168] [INFO] [aiogram.event] Update id=131879385 is handled. Duration 248 ms by bot id=8440100118
[2025-11-26 15:25:04,119] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 30.0
[2025-11-26 15:25:04,295] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 15:25:04,376] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 15:25:04,377] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 15:25:04,457] [INFO] [aiogram.event] Update id=131879386 is handled. Duration 355 ms by bot id=8440100118
[2025-11-26 15:25:08,848] [INFO] [database.crud] Fetched wish 3
[2025-11-26 15:25:08,848] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 15:25:08,879] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -50.0
[2025-11-26 15:25:08,886] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 15:25:08,891] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 15:25:08,964] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 15:25:09,079] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=50.00, savings_before=200.00)
[2025-11-26 15:25:09,080] [INFO] [aiogram.event] Update id=131879387 is handled. Duration 232 ms by bot id=8440100118
[2025-11-26 17:00:25,092] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 17:00:25,095] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 17:00:25,095] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 17:00:25,352] [INFO] [__main__] Bot shutdown complete
[2025-11-26 17:00:25,353] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:00:30,095] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 17:00:30,096] [INFO] [__main__] Starting bot polling
[2025-11-26 17:00:30,096] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 17:00:30,274] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:00:37,172] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 17:00:37,172] [INFO] [aiogram.event] Update id=131879388 is handled. Duration 230 ms by bot id=8440100118
[2025-11-26 17:00:40,236] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 17:00:40,237] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 17:00:40,237] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 17:00:40,490] [INFO] [__main__] Bot shutdown complete
[2025-11-26 17:00:40,490] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:00:52,032] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 17:00:52,032] [INFO] [__main__] Starting bot polling
[2025-11-26 17:00:52,033] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 17:00:52,190] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:01:00,285] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 17:01:00,285] [INFO] [aiogram.event] Update id=131879389 is handled. Duration 236 ms by bot id=8440100118
[2025-11-26 17:01:02,769] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:01:02,769] [INFO] [aiogram.event] Update id=131879390 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 17:01:05,068] [INFO] [aiogram.event] Update id=131879391 is handled. Duration 144 ms by bot id=8440100118
[2025-11-26 17:01:09,764] [INFO] [aiogram.event] Update id=131879392 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 17:01:14,603] [INFO] [aiogram.event] Update id=131879393 is handled. Duration 599 ms by bot id=8440100118
[2025-11-26 17:01:17,386] [INFO] [aiogram.event] Update id=131879394 is handled. Duration 1513 ms by bot id=8440100118
[2025-11-26 17:01:18,339] [INFO] [database.crud] Added wish 1 for user 838347504
[2025-11-26 17:01:18,410] [INFO] [handlers.callbacks] User 838347504 added wish 1
[2025-11-26 17:01:18,410] [INFO] [aiogram.event] Update id=131879395 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 17:01:21,061] [INFO] [aiogram.event] Update id=131879396 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 17:01:26,495] [INFO] [aiogram.event] Update id=131879397 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 17:01:32,982] [INFO] [aiogram.event] Update id=131879398 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 17:01:34,184] [INFO] [aiogram.event] Update id=131879399 is handled. Duration 129 ms by bot id=8440100118
[2025-11-26 17:01:35,157] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-26 17:01:35,226] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-26 17:01:35,226] [INFO] [aiogram.event] Update id=131879400 is handled. Duration 90 ms by bot id=8440100118
[2025-11-26 17:01:38,279] [INFO] [aiogram.event] Update id=131879401 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 17:01:41,851] [INFO] [aiogram.event] Update id=131879402 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 17:01:54,137] [INFO] [aiogram.event] Update id=131879403 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 17:01:56,985] [INFO] [aiogram.event] Update id=131879404 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 17:01:58,137] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 17:01:58,404] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 17:01:58,404] [INFO] [aiogram.event] Update id=131879405 is handled. Duration 272 ms by bot id=8440100118
[2025-11-26 17:02:01,717] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:01,717] [INFO] [aiogram.event] Update id=131879406 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 17:02:03,127] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:02:03,127] [INFO] [aiogram.event] Update id=131879407 is handled. Duration 97 ms by bot id=8440100118
[2025-11-26 17:02:05,568] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:05,568] [INFO] [aiogram.event] Update id=131879408 is handled. Duration 89 ms by bot id=8440100118
[2025-11-26 17:02:06,648] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:02:06,648] [INFO] [aiogram.event] Update id=131879409 is handled. Duration 150 ms by bot id=8440100118
[2025-11-26 17:02:07,394] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:07,395] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:07,468] [INFO] [aiogram.event] Update id=131879410 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 17:02:09,928] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:09,929] [INFO] [aiogram.event] Update id=131879411 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 17:02:11,368] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:02:11,368] [INFO] [aiogram.event] Update id=131879412 is handled. Duration 330 ms by bot id=8440100118
[2025-11-26 17:02:12,562] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:12,562] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:12,691] [INFO] [aiogram.event] Update id=131879413 is handled. Duration 129 ms by bot id=8440100118
[2025-11-26 17:02:14,024] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:14,024] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:14,116] [INFO] [aiogram.event] Update id=131879414 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 17:02:16,020] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:16,020] [INFO] [aiogram.event] Update id=131879415 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 17:02:16,962] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:02:16,962] [INFO] [aiogram.event] Update id=131879416 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 17:02:21,200] [INFO] [aiogram.event] Update id=131879417 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 17:02:24,319] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:02:24,466] [INFO] [aiogram.event] Update id=131879418 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 17:02:25,827] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:02:25,983] [INFO] [aiogram.event] Update id=131879419 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 17:02:27,166] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:02:27,314] [INFO] [aiogram.event] Update id=131879420 is handled. Duration 164 ms by bot id=8440100118
[2025-11-26 17:02:28,730] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:02:28,874] [INFO] [aiogram.event] Update id=131879421 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 17:02:30,172] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:02:30,246] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:02:30,328] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:30,328] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:30,419] [INFO] [aiogram.event] Update id=131879422 is handled. Duration 253 ms by bot id=8440100118
[2025-11-26 17:02:34,625] [INFO] [database.crud] Fetched wish 1
[2025-11-26 17:02:34,625] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:34,641] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -20.0
[2025-11-26 17:02:34,646] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-26 17:02:34,650] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 17:02:34,756] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:02:34,848] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 17:02:34,848] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 17:02:34,848] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=20.00, savings_before=20.00)
[2025-11-26 17:02:34,848] [INFO] [aiogram.event] Update id=131879423 is handled. Duration 224 ms by bot id=8440100118
[2025-11-26 17:02:58,490] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:02:58,490] [INFO] [aiogram.event] Update id=131879424 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 17:03:03,945] [INFO] [aiogram.event] Update id=131879425 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 17:03:05,216] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:03:05,357] [INFO] [aiogram.event] Update id=131879426 is handled. Duration 147 ms by bot id=8440100118
[2025-11-26 17:03:06,274] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:03:06,432] [INFO] [aiogram.event] Update id=131879427 is handled. Duration 179 ms by bot id=8440100118
[2025-11-26 17:03:07,334] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:03:07,504] [INFO] [aiogram.event] Update id=131879428 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 17:03:08,727] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:03:08,971] [INFO] [aiogram.event] Update id=131879429 is handled. Duration 272 ms by bot id=8440100118
[2025-11-26 17:03:10,174] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:03:10,317] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:03:10,413] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:03:10,414] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:03:10,503] [INFO] [aiogram.event] Update id=131879430 is handled. Duration 345 ms by bot id=8440100118
[2025-11-26 17:03:13,985] [INFO] [database.crud] Fetched wish 2
[2025-11-26 17:03:13,985] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:03:13,989] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -20.0
[2025-11-26 17:03:13,994] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 17:03:13,997] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 17:03:14,068] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:03:14,166] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 17:03:14,166] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 17:03:14,166] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=вклад в себя, savings_category=сбережения, price=20.00, savings_before=40.00)
[2025-11-26 17:03:14,166] [INFO] [aiogram.event] Update id=131879431 is handled. Duration 182 ms by bot id=8440100118
[2025-11-26 17:14:55,611] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 17:14:55,613] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 17:14:55,613] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 17:14:55,865] [INFO] [__main__] Bot shutdown complete
[2025-11-26 17:14:55,865] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:14:59,960] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 17:14:59,961] [INFO] [__main__] Starting bot polling
[2025-11-26 17:14:59,961] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 17:15:00,128] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:20:54,598] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:20:54,598] [INFO] [aiogram.event] Update id=131879432 is handled. Duration 521 ms by bot id=8440100118
[2025-11-26 17:20:55,771] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:20:55,772] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:20:55,870] [INFO] [aiogram.event] Update id=131879433 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 17:21:09,612] [INFO] [aiogram.event] Update id=131879434 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 17:21:13,904] [INFO] [aiogram.event] Update id=131879435 is handled. Duration 144 ms by bot id=8440100118
[2025-11-26 17:21:19,561] [INFO] [aiogram.event] Update id=131879436 is handled. Duration 1103 ms by bot id=8440100118
[2025-11-26 17:21:22,756] [INFO] [aiogram.event] Update id=131879437 is handled. Duration 2060 ms by bot id=8440100118
[2025-11-26 17:21:23,808] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 17:21:23,886] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 17:21:23,886] [INFO] [aiogram.event] Update id=131879438 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 17:21:26,941] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:21:26,941] [INFO] [aiogram.event] Update id=131879439 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 17:21:27,830] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:21:27,830] [INFO] [aiogram.event] Update id=131879440 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 17:21:30,873] [INFO] [aiogram.event] Update id=131879441 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 17:21:31,978] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:21:32,124] [INFO] [aiogram.event] Update id=131879442 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 17:21:33,085] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:21:33,248] [INFO] [aiogram.event] Update id=131879443 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 17:21:34,013] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:21:34,171] [INFO] [aiogram.event] Update id=131879444 is handled. Duration 189 ms by bot id=8440100118
[2025-11-26 17:21:35,425] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:21:35,575] [INFO] [aiogram.event] Update id=131879445 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 17:21:37,093] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:21:37,171] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:21:37,255] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:21:37,255] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:21:37,342] [INFO] [aiogram.event] Update id=131879446 is handled. Duration 274 ms by bot id=8440100118
[2025-11-26 17:21:46,173] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:21:46,174] [INFO] [aiogram.event] Update id=131879447 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 17:21:49,146] [INFO] [aiogram.event] Update id=131879448 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 17:21:50,315] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:21:50,465] [INFO] [aiogram.event] Update id=131879449 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 17:21:51,591] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:21:51,743] [INFO] [aiogram.event] Update id=131879450 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 17:21:52,688] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:21:52,835] [INFO] [aiogram.event] Update id=131879451 is handled. Duration 163 ms by bot id=8440100118
[2025-11-26 17:21:53,956] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:21:54,099] [INFO] [aiogram.event] Update id=131879452 is handled. Duration 149 ms by bot id=8440100118
[2025-11-26 17:21:55,243] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:21:55,317] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:21:55,398] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:21:55,398] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:21:55,473] [INFO] [aiogram.event] Update id=131879453 is handled. Duration 236 ms by bot id=8440100118
[2025-11-26 17:22:02,169] [INFO] [database.crud] Fetched wish 3
[2025-11-26 17:22:02,169] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:22:02,189] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -10.0
[2025-11-26 17:22:02,194] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 17:22:02,198] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 17:22:02,510] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:22:02,798] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 17:22:02,798] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 17:22:03,052] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=кайфы, savings_category=спонтанные траты, price=10.00, savings_before=40.00)
[2025-11-26 17:22:03,052] [INFO] [aiogram.event] Update id=131879454 is handled. Duration 883 ms by bot id=8440100118
[2025-11-26 18:18:33,108] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:18:33,110] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:18:33,110] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:18:33,367] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:18:33,367] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:18:37,895] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:18:37,896] [INFO] [__main__] Starting bot polling
[2025-11-26 18:18:37,896] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:18:38,071] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:19:00,687] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:19:00,688] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:19:00,688] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:19:00,940] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:19:00,941] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:19:22,647] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:19:22,647] [INFO] [__main__] Starting bot polling
[2025-11-26 18:19:22,647] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:19:22,803] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:19:34,623] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 18:19:34,623] [INFO] [aiogram.event] Update id=131879455 is handled. Duration 208 ms by bot id=8440100118
[2025-11-26 18:19:36,347] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:19:36,347] [INFO] [aiogram.event] Update id=131879456 is handled. Duration 157 ms by bot id=8440100118
[2025-11-26 18:19:38,233] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:19:38,233] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:19:38,346] [INFO] [aiogram.event] Update id=131879457 is handled. Duration 114 ms by bot id=8440100118
[2025-11-26 18:19:41,201] [INFO] [aiogram.event] Update id=131879458 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 18:21:48,111] [INFO] [aiogram.event] Update id=131879459 is handled. Duration 79 ms by bot id=8440100118
[2025-11-26 18:21:51,779] [INFO] [aiogram.event] Update id=131879460 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 18:21:55,338] [INFO] [aiogram.event] Update id=131879461 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 18:21:56,889] [INFO] [aiogram.event] Update id=131879462 is handled. Duration 130 ms by bot id=8440100118
[2025-11-26 18:21:58,140] [INFO] [database.crud] Added wish 1 for user 838347504
[2025-11-26 18:21:58,214] [INFO] [handlers.callbacks] User 838347504 added wish 1
[2025-11-26 18:21:58,214] [INFO] [aiogram.event] Update id=131879463 is handled. Duration 88 ms by bot id=8440100118
[2025-11-26 18:22:00,484] [INFO] [aiogram.event] Update id=131879464 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:22:10,329] [INFO] [aiogram.event] Update id=131879465 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 18:22:13,648] [INFO] [aiogram.event] Update id=131879466 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 18:22:15,271] [INFO] [aiogram.event] Update id=131879467 is handled. Duration 369 ms by bot id=8440100118
[2025-11-26 18:22:16,144] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-26 18:22:16,250] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-26 18:22:16,250] [INFO] [aiogram.event] Update id=131879468 is handled. Duration 110 ms by bot id=8440100118
[2025-11-26 18:22:20,158] [INFO] [aiogram.event] Update id=131879469 is handled. Duration 153 ms by bot id=8440100118
[2025-11-26 18:22:23,534] [INFO] [aiogram.event] Update id=131879470 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 18:22:26,678] [INFO] [aiogram.event] Update id=131879471 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 18:22:27,829] [INFO] [aiogram.event] Update id=131879472 is handled. Duration 121 ms by bot id=8440100118
[2025-11-26 18:22:29,186] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 18:22:29,260] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 18:22:29,260] [INFO] [aiogram.event] Update id=131879473 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 18:22:31,886] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:22:31,886] [INFO] [aiogram.event] Update id=131879474 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 18:22:34,366] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:22:34,367] [INFO] [aiogram.event] Update id=131879475 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 18:22:38,945] [INFO] [aiogram.event] Update id=131879476 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 18:22:40,835] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:22:40,990] [INFO] [aiogram.event] Update id=131879477 is handled. Duration 171 ms by bot id=8440100118
[2025-11-26 18:22:42,174] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:22:42,328] [INFO] [aiogram.event] Update id=131879478 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 18:22:43,424] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:22:43,576] [INFO] [aiogram.event] Update id=131879479 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:22:44,648] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:22:44,840] [INFO] [aiogram.event] Update id=131879480 is handled. Duration 200 ms by bot id=8440100118
[2025-11-26 18:22:45,987] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:22:46,138] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:22:46,305] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:22:46,306] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:22:46,390] [INFO] [aiogram.event] Update id=131879481 is handled. Duration 408 ms by bot id=8440100118
[2025-11-26 18:22:48,865] [INFO] [database.crud] Fetched wish 1
[2025-11-26 18:22:48,865] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:22:48,880] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -20.0
[2025-11-26 18:22:48,884] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-26 18:22:48,889] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:22:48,958] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:22:49,046] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:22:49,047] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:22:49,166] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=20.00, savings_before=20.00)
[2025-11-26 18:22:49,166] [INFO] [aiogram.event] Update id=131879482 is handled. Duration 302 ms by bot id=8440100118
[2025-11-26 18:25:15,707] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:25:15,708] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:25:15,708] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:25:15,968] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:25:15,969] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:25:20,265] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:25:20,265] [INFO] [__main__] Starting bot polling
[2025-11-26 18:25:20,265] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:25:20,431] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:25:27,112] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 18:25:27,112] [INFO] [aiogram.event] Update id=131879483 is handled. Duration 273 ms by bot id=8440100118
[2025-11-26 18:25:30,073] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:25:30,074] [INFO] [aiogram.event] Update id=131879484 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 18:25:33,527] [INFO] [aiogram.event] Update id=131879485 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:25:34,648] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:25:34,832] [INFO] [aiogram.event] Update id=131879486 is handled. Duration 201 ms by bot id=8440100118
[2025-11-26 18:25:35,623] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:25:35,902] [INFO] [aiogram.event] Update id=131879487 is handled. Duration 285 ms by bot id=8440100118
[2025-11-26 18:25:36,668] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:25:36,919] [INFO] [aiogram.event] Update id=131879488 is handled. Duration 273 ms by bot id=8440100118
[2025-11-26 18:25:38,057] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:25:38,208] [INFO] [aiogram.event] Update id=131879489 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:25:39,385] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:25:39,456] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:25:39,552] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:25:39,552] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:25:39,629] [INFO] [aiogram.event] Update id=131879490 is handled. Duration 263 ms by bot id=8440100118
[2025-11-26 18:25:41,401] [INFO] [database.crud] Fetched wish 2
[2025-11-26 18:25:41,402] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:25:41,421] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -20.0
[2025-11-26 18:25:41,426] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 18:25:41,430] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:25:41,512] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:25:41,599] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:25:41,600] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:25:41,694] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=вклад в себя, savings_category=сбережения, price=20.00, savings_before=40.00)
[2025-11-26 18:25:41,694] [INFO] [aiogram.event] Update id=131879491 is handled. Duration 293 ms by bot id=8440100118
[2025-11-26 18:26:01,073] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:26:01,074] [INFO] [aiogram.event] Update id=131879492 is handled. Duration 176 ms by bot id=8440100118
[2025-11-26 18:26:04,269] [INFO] [aiogram.event] Update id=131879493 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:26:13,600] [INFO] [aiogram.event] Update id=131879494 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 18:26:16,797] [INFO] [aiogram.event] Update id=131879495 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:26:18,447] [INFO] [aiogram.event] Update id=131879496 is handled. Duration 394 ms by bot id=8440100118
[2025-11-26 18:26:19,754] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 18:26:19,824] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 18:26:19,824] [INFO] [aiogram.event] Update id=131879497 is handled. Duration 90 ms by bot id=8440100118
[2025-11-26 18:26:49,462] [INFO] [aiogram.event] Update id=131879498 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 18:26:58,916] [INFO] [aiogram.event] Update id=131879499 is handled. Duration 98 ms by bot id=8440100118
[2025-11-26 18:27:02,549] [INFO] [aiogram.event] Update id=131879500 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:27:03,989] [INFO] [aiogram.event] Update id=131879501 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 18:27:05,272] [INFO] [database.crud] Added wish 5 for user 838347504
[2025-11-26 18:27:05,345] [INFO] [handlers.callbacks] User 838347504 added wish 5
[2025-11-26 18:27:05,346] [INFO] [aiogram.event] Update id=131879502 is handled. Duration 96 ms by bot id=8440100118
[2025-11-26 18:27:10,517] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:27:10,518] [INFO] [aiogram.event] Update id=131879503 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 18:27:11,583] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:27:11,583] [INFO] [aiogram.event] Update id=131879504 is handled. Duration 136 ms by bot id=8440100118
[2025-11-26 18:27:14,771] [INFO] [aiogram.event] Update id=131879505 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 18:27:15,657] [INFO] [database.crud] Updated saving for user 838347504 category долги by 600.0
[2025-11-26 18:27:15,949] [INFO] [aiogram.event] Update id=131879506 is handled. Duration 321 ms by bot id=8440100118
[2025-11-26 18:27:22,947] [INFO] [database.crud] Updated saving for user 838347504 category быт by 400.0
[2025-11-26 18:27:23,184] [INFO] [aiogram.event] Update id=131879507 is handled. Duration 253 ms by bot id=8440100118
[2025-11-26 18:27:24,220] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 400.0
[2025-11-26 18:27:24,378] [INFO] [aiogram.event] Update id=131879508 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 18:27:25,434] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 400.0
[2025-11-26 18:27:25,613] [INFO] [aiogram.event] Update id=131879509 is handled. Duration 198 ms by bot id=8440100118
[2025-11-26 18:27:26,760] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 200.0
[2025-11-26 18:27:26,881] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:26,977] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:26,978] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:27:27,061] [INFO] [aiogram.event] Update id=131879510 is handled. Duration 307 ms by bot id=8440100118
[2025-11-26 18:27:32,959] [INFO] [database.crud] Fetched wish 3
[2025-11-26 18:27:32,959] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:32,975] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -10.0
[2025-11-26 18:27:32,981] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 18:27:32,986] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:27:33,284] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:33,518] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:27:33,519] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:27:33,721] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=кайфы, savings_category=спонтанные траты, price=10.00, savings_before=220.00)
[2025-11-26 18:27:33,721] [INFO] [aiogram.event] Update id=131879511 is handled. Duration 763 ms by bot id=8440100118
[2025-11-26 18:27:38,165] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:27:38,165] [INFO] [aiogram.event] Update id=131879512 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 18:27:39,396] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:27:39,397] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:39,555] [INFO] [aiogram.event] Update id=131879513 is handled. Duration 158 ms by bot id=8440100118
[2025-11-26 18:27:40,954] [INFO] [database.crud] Fetched wish 4
[2025-11-26 18:27:40,955] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:40,982] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -20.0
[2025-11-26 18:27:40,987] [INFO] [database.crud] Marked wish 4 as purchased
[2025-11-26 18:27:40,991] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:27:41,070] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:41,148] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:27:41,148] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:27:41,207] [INFO] [handlers.callbacks] User 838347504 purchased wish 4 (wishlist_category=вклад в себя, savings_category=сбережения, price=20.00, savings_before=420.00)
[2025-11-26 18:27:41,207] [INFO] [aiogram.event] Update id=131879514 is handled. Duration 253 ms by bot id=8440100118
[2025-11-26 18:27:43,453] [INFO] [database.crud] Fetched wish 5
[2025-11-26 18:27:43,453] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:43,473] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -30.0
[2025-11-26 18:27:43,478] [INFO] [database.crud] Marked wish 5 as purchased
[2025-11-26 18:27:43,482] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:27:43,549] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:43,627] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:27:43,627] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:27:43,688] [INFO] [handlers.callbacks] User 838347504 purchased wish 5 (wishlist_category=вклад в себя, savings_category=сбережения, price=30.00, savings_before=400.00)
[2025-11-26 18:27:43,688] [INFO] [aiogram.event] Update id=131879515 is handled. Duration 236 ms by bot id=8440100118
[2025-11-26 18:29:31,177] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:29:31,177] [INFO] [aiogram.event] Update id=131879516 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 18:41:03,286] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:41:03,288] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:41:03,288] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:41:03,540] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:41:03,541] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:41:07,702] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:41:07,703] [INFO] [__main__] Starting bot polling
[2025-11-26 18:41:07,703] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:41:07,865] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:41:09,619] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 18:41:09,619] [INFO] [aiogram.event] Update id=131879517 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 18:41:16,263] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:41:16,263] [INFO] [aiogram.event] Update id=131879518 is handled. Duration 264 ms by bot id=8440100118
[2025-11-26 18:41:17,871] [INFO] [aiogram.event] Update id=131879519 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 18:41:22,076] [INFO] [aiogram.event] Update id=131879520 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 18:41:25,516] [INFO] [aiogram.event] Update id=131879521 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 18:41:27,014] [INFO] [aiogram.event] Update id=131879522 is handled. Duration 136 ms by bot id=8440100118
[2025-11-26 18:41:28,019] [INFO] [database.crud] Added wish 6 for user 838347504
[2025-11-26 18:41:28,086] [INFO] [handlers.callbacks] User 838347504 added wish 6
[2025-11-26 18:41:28,086] [INFO] [aiogram.event] Update id=131879523 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 18:41:32,523] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:41:32,523] [INFO] [aiogram.event] Update id=131879524 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:41:33,503] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:41:33,503] [INFO] [aiogram.event] Update id=131879525 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 18:41:34,790] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:41:34,790] [INFO] [aiogram.event] Update id=131879526 is handled. Duration 142 ms by bot id=8440100118
[2025-11-26 18:41:35,688] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:41:35,688] [INFO] [aiogram.event] Update id=131879527 is handled. Duration 107 ms by bot id=8440100118
[2025-11-26 18:41:41,680] [INFO] [aiogram.event] Update id=131879528 is handled. Duration 285 ms by bot id=8440100118
[2025-11-26 18:41:43,134] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:41:43,924] [INFO] [aiogram.event] Update id=131879529 is handled. Duration 814 ms by bot id=8440100118
[2025-11-26 18:41:45,025] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:41:45,177] [INFO] [aiogram.event] Update id=131879530 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 18:41:46,261] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:41:46,462] [INFO] [aiogram.event] Update id=131879531 is handled. Duration 217 ms by bot id=8440100118
[2025-11-26 18:41:47,412] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:41:47,561] [INFO] [aiogram.event] Update id=131879532 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 18:41:48,905] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:41:48,981] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:41:49,053] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:41:49,054] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:41:49,134] [INFO] [aiogram.event] Update id=131879533 is handled. Duration 252 ms by bot id=8440100118
[2025-11-26 18:42:05,696] [INFO] [aiogram.event] Update id=131879534 is handled. Duration 205 ms by bot id=8440100118
[2025-11-26 18:42:08,524] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:42:08,525] [INFO] [aiogram.event] Update id=131879535 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 18:42:10,725] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:10,725] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:10,835] [INFO] [aiogram.event] Update id=131879536 is handled. Duration 110 ms by bot id=8440100118
[2025-11-26 18:42:12,786] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:12,786] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:12,863] [INFO] [aiogram.event] Update id=131879537 is not handled. Duration 77 ms by bot id=8440100118
[2025-11-26 18:42:12,863] [ERROR] [aiogram.event] Cause exception while process update id=131879537 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 41, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 98, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 18:42:15,366] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:15,367] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:15,450] [INFO] [aiogram.event] Update id=131879538 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 18:42:16,712] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:16,712] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:16,775] [INFO] [aiogram.event] Update id=131879539 is not handled. Duration 63 ms by bot id=8440100118
[2025-11-26 18:42:16,775] [ERROR] [aiogram.event] Cause exception while process update id=131879539 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 41, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 98, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 18:42:18,805] [INFO] [aiogram.event] Update id=131879540 is handled. Duration 103 ms by bot id=8440100118
[2025-11-26 18:42:23,647] [INFO] [aiogram.event] Update id=131879541 is handled. Duration 79 ms by bot id=8440100118
[2025-11-26 18:42:27,358] [INFO] [aiogram.event] Update id=131879542 is handled. Duration 131 ms by bot id=8440100118
[2025-11-26 18:42:28,633] [INFO] [aiogram.event] Update id=131879543 is handled. Duration 200 ms by bot id=8440100118
[2025-11-26 18:42:30,047] [INFO] [database.crud] Added wish 7 for user 838347504
[2025-11-26 18:42:30,221] [INFO] [handlers.callbacks] User 838347504 added wish 7
[2025-11-26 18:42:30,221] [INFO] [aiogram.event] Update id=131879544 is handled. Duration 194 ms by bot id=8440100118
[2025-11-26 18:42:32,978] [INFO] [aiogram.event] Update id=131879545 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:42:38,626] [INFO] [aiogram.event] Update id=131879546 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:42:46,511] [INFO] [aiogram.event] Update id=131879547 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:42:47,698] [INFO] [aiogram.event] Update id=131879548 is handled. Duration 128 ms by bot id=8440100118
[2025-11-26 18:42:48,450] [INFO] [database.crud] Added wish 8 for user 838347504
[2025-11-26 18:42:48,523] [INFO] [handlers.callbacks] User 838347504 added wish 8
[2025-11-26 18:42:48,524] [INFO] [aiogram.event] Update id=131879549 is handled. Duration 108 ms by bot id=8440100118
[2025-11-26 18:42:51,320] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:42:51,320] [INFO] [aiogram.event] Update id=131879550 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:42:53,966] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:42:53,966] [INFO] [aiogram.event] Update id=131879551 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 18:42:57,128] [INFO] [aiogram.event] Update id=131879552 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:42:58,244] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:42:58,405] [INFO] [aiogram.event] Update id=131879553 is handled. Duration 178 ms by bot id=8440100118
[2025-11-26 18:42:59,202] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:42:59,354] [INFO] [aiogram.event] Update id=131879554 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:43:00,207] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:43:00,389] [INFO] [aiogram.event] Update id=131879555 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 18:43:01,247] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:43:01,724] [INFO] [aiogram.event] Update id=131879556 is handled. Duration 513 ms by bot id=8440100118
[2025-11-26 18:43:02,876] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:43:02,967] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:43:03,040] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:43:03,040] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:43:03,129] [INFO] [aiogram.event] Update id=131879557 is handled. Duration 275 ms by bot id=8440100118
[2025-11-26 18:43:10,637] [INFO] [database.crud] Fetched wish 6
[2025-11-26 18:43:10,638] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:43:10,653] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -30.0
[2025-11-26 18:43:10,657] [INFO] [database.crud] Marked wish 6 as purchased
[2025-11-26 18:43:10,662] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:43:10,729] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:43:10,814] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:43:10,814] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:43:10,990] [INFO] [handlers.callbacks] User 838347504 purchased wish 6 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=30.00, savings_before=460.00)
[2025-11-26 18:43:10,990] [INFO] [aiogram.event] Update id=131879558 is handled. Duration 353 ms by bot id=8440100118
[2025-11-26 18:44:43,485] [INFO] [aiogram.event] Update id=131879559 is handled. Duration 203 ms by bot id=8440100118
[2025-11-26 18:44:45,295] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:44:45,295] [INFO] [aiogram.event] Update id=131879560 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 18:44:48,708] [INFO] [aiogram.event] Update id=131879561 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 18:44:50,396] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:44:50,544] [INFO] [aiogram.event] Update id=131879562 is handled. Duration 164 ms by bot id=8440100118
[2025-11-26 18:44:51,411] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:44:51,583] [INFO] [aiogram.event] Update id=131879563 is handled. Duration 188 ms by bot id=8440100118
[2025-11-26 18:44:52,521] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:44:52,727] [INFO] [aiogram.event] Update id=131879564 is handled. Duration 213 ms by bot id=8440100118
[2025-11-26 18:44:53,912] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:44:54,103] [INFO] [aiogram.event] Update id=131879565 is handled. Duration 197 ms by bot id=8440100118
[2025-11-26 18:44:55,222] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:44:55,318] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:44:55,395] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:55,395] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:44:55,477] [INFO] [aiogram.event] Update id=131879566 is handled. Duration 260 ms by bot id=8440100118
[2025-11-26 18:44:57,010] [INFO] [database.crud] Fetched wish 7
[2025-11-26 18:44:57,010] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:57,035] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -20.0
[2025-11-26 18:44:57,040] [INFO] [database.crud] Marked wish 7 as purchased
[2025-11-26 18:44:57,045] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:44:57,115] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:44:57,191] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:57,191] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:44:57,321] [INFO] [handlers.callbacks] User 838347504 purchased wish 7 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=20.00, savings_before=450.00)
[2025-11-26 18:44:57,322] [INFO] [aiogram.event] Update id=131879567 is handled. Duration 312 ms by bot id=8440100118
[2025-11-26 18:44:58,331] [INFO] [database.crud] Fetched wish 8
[2025-11-26 18:44:58,331] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:58,347] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -40.0
[2025-11-26 18:44:58,352] [INFO] [database.crud] Marked wish 8 as purchased
[2025-11-26 18:44:58,357] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:44:58,443] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:44:58,521] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:58,522] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:44:58,578] [INFO] [handlers.callbacks] User 838347504 purchased wish 8 (wishlist_category=кайфы, savings_category=спонтанные траты, price=40.00, savings_before=240.00)
[2025-11-26 18:44:58,578] [INFO] [aiogram.event] Update id=131879568 is handled. Duration 248 ms by bot id=8440100118
[2025-11-26 18:59:52,777] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:59:52,778] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:59:52,779] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:59:53,042] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:59:53,042] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:59:57,515] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:59:57,515] [INFO] [__main__] Starting bot polling
[2025-11-26 18:59:57,516] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:59:57,672] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 19:00:03,328] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 19:00:03,561] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-26 19:00:03,561] [INFO] [aiogram.event] Update id=131879569 is handled. Duration 235 ms by bot id=8440100118
[2025-11-26 19:00:14,980] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 19:00:14,981] [INFO] [aiogram.event] Update id=131879570 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 19:00:16,088] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 19:00:16,176] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-26 19:00:16,177] [INFO] [aiogram.event] Update id=131879571 is handled. Duration 90 ms by bot id=8440100118
[2025-11-26 19:00:18,199] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 19:00:18,297] [INFO] [aiogram.event] Update id=131879572 is handled. Duration 101 ms by bot id=8440100118
[2025-11-26 20:03:44,211] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-26 20:03:44,211] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 20:03:45,218] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 20:03:45,219] [WARNING] [aiogram.dispatcher] Sleep for 1.243916 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-26 20:03:46,473] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 20:03:46,473] [WARNING] [aiogram.dispatcher] Sleep for 1.732415 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 12:10:29,446] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:10:29,447] [INFO] [__main__] Starting bot polling
[2025-11-27 12:10:29,447] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:10:29,632] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:33:56,367] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:33:56,369] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:33:56,369] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:33:56,621] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:33:56,622] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:34:00,887] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:34:00,888] [INFO] [__main__] Starting bot polling
[2025-11-27 12:34:00,888] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:34:01,077] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:34:03,611] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:34:03,612] [INFO] [aiogram.event] Update id=131879573 is handled. Duration 198 ms by bot id=8440100118
[2025-11-27 12:34:07,229] [INFO] [aiogram.event] Update id=131879574 is handled. Duration 87 ms by bot id=8440100118
[2025-11-27 12:34:24,577] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-27 12:34:24,888] [INFO] [aiogram.event] Update id=131879575 is handled. Duration 553 ms by bot id=8440100118
[2025-11-27 12:34:31,454] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 12:34:31,454] [INFO] [aiogram.event] Update id=131879576 is handled. Duration 75 ms by bot id=8440100118
[2025-11-27 12:34:32,986] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:34:32,987] [INFO] [aiogram.event] Update id=131879577 is handled. Duration 84 ms by bot id=8440100118
[2025-11-27 12:34:38,213] [INFO] [aiogram.event] Update id=131879578 is handled. Duration 75 ms by bot id=8440100118
[2025-11-27 12:35:53,555] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 12:35:53,556] [INFO] [aiogram.event] Update id=131879579 is handled. Duration 76 ms by bot id=8440100118
[2025-11-27 12:35:54,687] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:35:54,772] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:35:54,772] [INFO] [aiogram.event] Update id=131879580 is handled. Duration 86 ms by bot id=8440100118
[2025-11-27 12:35:57,074] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:35:57,159] [INFO] [aiogram.event] Update id=131879581 is handled. Duration 87 ms by bot id=8440100118
[2025-11-27 12:35:58,176] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:35:58,266] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:35:58,266] [INFO] [aiogram.event] Update id=131879582 is handled. Duration 91 ms by bot id=8440100118
[2025-11-27 12:35:59,175] [INFO] [aiogram.event] Update id=131879583 is handled. Duration 131 ms by bot id=8440100118
[2025-11-27 12:36:01,795] [INFO] [aiogram.event] Update id=131879584 is handled. Duration 134 ms by bot id=8440100118
[2025-11-27 12:36:04,019] [INFO] [aiogram.event] Update id=131879585 is handled. Duration 74 ms by bot id=8440100118
[2025-11-27 12:36:05,399] [INFO] [aiogram.event] Update id=131879586 is handled. Duration 125 ms by bot id=8440100118
[2025-11-27 12:37:05,981] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:37:06,192] [INFO] [aiogram.event] Update id=131879587 is handled. Duration 213 ms by bot id=8440100118
[2025-11-27 12:48:47,034] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:48:47,035] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:48:47,035] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:48:47,288] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:48:47,288] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:48:51,674] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:48:51,674] [INFO] [__main__] Starting bot polling
[2025-11-27 12:48:51,674] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:48:51,843] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:49:00,901] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:49:01,062] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:49:01,062] [INFO] [aiogram.event] Update id=131879588 is handled. Duration 163 ms by bot id=8440100118
[2025-11-27 12:49:02,557] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:49:02,688] [INFO] [aiogram.event] Update id=131879589 is handled. Duration 134 ms by bot id=8440100118
[2025-11-27 12:49:18,626] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:49:18,703] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:49:18,703] [INFO] [aiogram.event] Update id=131879590 is handled. Duration 78 ms by bot id=8440100118
[2025-11-27 12:49:25,374] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 12:49:25,374] [INFO] [aiogram.event] Update id=131879591 is handled. Duration 85 ms by bot id=8440100118
[2025-11-27 12:49:26,456] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:49:26,456] [INFO] [aiogram.event] Update id=131879592 is handled. Duration 72 ms by bot id=8440100118
[2025-11-27 12:49:29,946] [INFO] [aiogram.event] Update id=131879593 is handled. Duration 181 ms by bot id=8440100118
[2025-11-27 12:49:41,464] [INFO] [aiogram.event] Update id=131879594 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:15,648] [INFO] [aiogram.event] Update id=131879595 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:17,671] [INFO] [aiogram.event] Update id=131879596 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:17,848] [INFO] [aiogram.event] Update id=131879597 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:29,993] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:50:29,994] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:50:29,994] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:50:30,245] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:50:30,246] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:50:34,880] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:50:34,880] [INFO] [__main__] Starting bot polling
[2025-11-27 12:50:34,881] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:50:35,037] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:50:37,408] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 12:50:37,408] [INFO] [aiogram.event] Update id=131879598 is handled. Duration 220 ms by bot id=8440100118
[2025-11-27 12:50:40,366] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:50:40,444] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:50:40,444] [INFO] [aiogram.event] Update id=131879599 is handled. Duration 79 ms by bot id=8440100118
[2025-11-27 12:50:41,627] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:50:41,799] [INFO] [aiogram.event] Update id=131879600 is handled. Duration 175 ms by bot id=8440100118
[2025-11-27 12:50:50,086] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:50:50,086] [INFO] [aiogram.event] Update id=131879601 is handled. Duration 77 ms by bot id=8440100118
[2025-11-27 12:50:54,195] [INFO] [aiogram.event] Update id=131879602 is handled. Duration 339 ms by bot id=8440100118
[2025-11-27 12:50:58,242] [INFO] [aiogram.event] Update id=131879603 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:51:06,847] [INFO] [aiogram.event] Update id=131879604 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:53:26,441] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:53:26,442] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:53:26,442] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:53:26,706] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:53:26,707] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:17:12,739] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 13:17:12,739] [INFO] [__main__] Starting bot polling
[2025-11-27 13:17:12,740] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 13:17:12,904] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:17:32,422] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 13:17:32,422] [INFO] [aiogram.event] Update id=131879605 is handled. Duration 209 ms by bot id=8440100118
[2025-11-27 13:17:35,027] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 13:17:35,028] [INFO] [aiogram.event] Update id=131879606 is handled. Duration 107 ms by bot id=8440100118
[2025-11-27 13:17:38,667] [INFO] [aiogram.event] Update id=131879607 is not handled. Duration 51 ms by bot id=8440100118
[2025-11-27 13:17:38,668] [ERROR] [aiogram.event] Cause exception while process update id=131879607 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 133, in process_income_amount
    await _remove_reply_keyboard_silently(message)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 96, in _remove_reply_keyboard_silently
    removal_message = await message.answer("\u200b", reply_markup=ReplyKeyboardRemove())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-11-27 13:18:06,509] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 13:18:06,509] [INFO] [aiogram.event] Update id=131879608 is handled. Duration 67 ms by bot id=8440100118
[2025-11-27 13:18:08,389] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 13:18:08,549] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 13:18:08,549] [INFO] [aiogram.event] Update id=131879609 is handled. Duration 162 ms by bot id=8440100118
[2025-11-27 13:18:10,171] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 13:18:10,248] [INFO] [aiogram.event] Update id=131879610 is handled. Duration 80 ms by bot id=8440100118
[2025-11-27 13:24:50,339] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 13:24:50,341] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 13:24:50,341] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 13:24:50,598] [INFO] [__main__] Bot shutdown complete
[2025-11-27 13:24:50,599] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:24:55,272] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 13:24:55,272] [INFO] [__main__] Starting bot polling
[2025-11-27 13:24:55,272] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 13:24:55,437] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:25:12,524] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 13:25:12,524] [INFO] [aiogram.event] Update id=131879611 is handled. Duration 304 ms by bot id=8440100118
[2025-11-27 13:25:13,655] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 13:25:13,655] [INFO] [aiogram.event] Update id=131879612 is handled. Duration 74 ms by bot id=8440100118
[2025-11-27 13:25:18,640] [INFO] [aiogram.event] Update id=131879613 is handled. Duration 709 ms by bot id=8440100118
[2025-11-27 13:25:47,843] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-27 13:25:48,081] [INFO] [aiogram.event] Update id=131879614 is handled. Duration 478 ms by bot id=8440100118
[2025-11-27 13:25:49,192] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-27 13:25:49,358] [INFO] [aiogram.event] Update id=131879615 is handled. Duration 304 ms by bot id=8440100118
[2025-11-27 13:25:50,424] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-27 13:25:50,568] [INFO] [aiogram.event] Update id=131879616 is handled. Duration 283 ms by bot id=8440100118
[2025-11-27 13:25:51,613] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-27 13:25:51,760] [INFO] [aiogram.event] Update id=131879617 is handled. Duration 294 ms by bot id=8440100118
[2025-11-27 13:25:52,959] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-27 13:25:53,033] [INFO] [database.crud] Fetched savings for user 8440100118
[2025-11-27 13:25:53,111] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-27 13:25:53,112] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-27 13:25:53,112] [INFO] [aiogram.event] Update id=131879618 is handled. Duration 282 ms by bot id=8440100118
[2025-11-27 13:26:01,065] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 13:26:01,065] [INFO] [aiogram.event] Update id=131879619 is handled. Duration 77 ms by bot id=8440100118
[2025-11-27 13:26:06,358] [INFO] [aiogram.event] Update id=131879620 is handled. Duration 274 ms by bot id=8440100118
[2025-11-27 16:31:28,901] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 16:31:28,905] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 16:31:28,905] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 16:31:29,161] [INFO] [__main__] Bot shutdown complete
[2025-11-27 16:31:29,162] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 16:31:33,946] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 16:31:33,947] [INFO] [__main__] Starting bot polling
[2025-11-27 16:31:33,947] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 16:31:34,114] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 16:32:01,418] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 16:32:01,418] [INFO] [aiogram.event] Update id=131879621 is handled. Duration 182 ms by bot id=8440100118
[2025-11-27 16:32:02,726] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 16:32:02,808] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 16:32:02,809] [INFO] [aiogram.event] Update id=131879622 is handled. Duration 85 ms by bot id=8440100118
[2025-11-27 16:32:03,813] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 16:32:03,885] [INFO] [aiogram.event] Update id=131879623 is handled. Duration 74 ms by bot id=8440100118
[2025-11-27 16:33:01,914] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 16:33:01,914] [INFO] [aiogram.event] Update id=131879624 is handled. Duration 82 ms by bot id=8440100118
[2025-11-27 16:33:05,272] [INFO] [aiogram.event] Update id=131879625 is not handled. Duration 53 ms by bot id=8440100118
[2025-11-27 16:33:05,272] [ERROR] [aiogram.event] Cause exception while process update id=131879625 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 133, in process_income_amount
    await _remove_reply_keyboard_silently(message)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 96, in _remove_reply_keyboard_silently
    removal_message = await message.answer("\u200b", reply_markup=ReplyKeyboardRemove())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-11-27 17:15:21,921] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 17:15:21,923] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 17:15:21,924] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:15:22,186] [INFO] [__main__] Bot shutdown complete
[2025-11-27 17:15:22,187] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:15:30,313] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 17:15:30,313] [INFO] [__main__] Starting bot polling
[2025-11-27 17:15:30,314] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 17:15:30,487] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:15:34,218] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 17:15:34,219] [INFO] [aiogram.event] Update id=131879626 is handled. Duration 182 ms by bot id=8440100118
[2025-11-27 17:15:35,839] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 17:15:35,840] [INFO] [aiogram.event] Update id=131879627 is handled. Duration 81 ms by bot id=8440100118
[2025-11-27 17:15:38,795] [INFO] [aiogram.event] Update id=131879628 is handled. Duration 78 ms by bot id=8440100118
[2025-11-27 17:15:40,228] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-27 17:15:40,378] [INFO] [aiogram.event] Update id=131879629 is handled. Duration 317 ms by bot id=8440100118
[2025-11-27 17:15:41,755] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-27 17:15:41,966] [INFO] [aiogram.event] Update id=131879630 is handled. Duration 376 ms by bot id=8440100118
[2025-11-27 17:15:43,198] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-27 17:15:43,486] [INFO] [aiogram.event] Update id=131879631 is handled. Duration 660 ms by bot id=8440100118
[2025-11-27 17:15:44,352] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-27 17:15:44,500] [INFO] [aiogram.event] Update id=131879632 is handled. Duration 350 ms by bot id=8440100118
[2025-11-27 17:15:46,174] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-27 17:15:46,340] [INFO] [database.crud] Fetched savings for user 8440100118
[2025-11-27 17:15:46,444] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-27 17:15:46,444] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-27 17:15:46,445] [INFO] [aiogram.event] Update id=131879633 is handled. Duration 454 ms by bot id=8440100118
[2025-11-27 17:44:19,631] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 17:44:19,631] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:44:20,637] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:44:20,637] [WARNING] [aiogram.dispatcher] Sleep for 1.229382 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 17:44:21,876] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:44:21,876] [WARNING] [aiogram.dispatcher] Sleep for 1.601177 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 17:44:23,484] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:44:23,484] [WARNING] [aiogram.dispatcher] Sleep for 1.974760 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-27 17:44:37,667] [INFO] [aiogram.dispatcher] Connection established (tryings = 4, bot id = 8440100118)
[2025-11-27 17:54:00,172] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 17:54:00,174] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 17:54:00,174] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:54:00,433] [INFO] [__main__] Bot shutdown complete
[2025-11-27 17:54:00,434] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:54:11,372] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 17:54:11,372] [INFO] [__main__] Starting bot polling
[2025-11-27 17:54:11,373] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 17:54:12,540] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:55:23,032] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 17:55:23,032] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:55:30,815] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Подключение к сети было разорвано локальной системой]
[2025-11-27 17:55:30,815] [WARNING] [aiogram.dispatcher] Sleep for 1.174954 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 17:55:32,005] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:32,005] [WARNING] [aiogram.dispatcher] Sleep for 1.489172 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 17:55:33,504] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:33,504] [WARNING] [aiogram.dispatcher] Sleep for 1.811539 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-27 17:55:35,318] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:35,318] [WARNING] [aiogram.dispatcher] Sleep for 2.171544 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-11-27 17:55:37,507] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:37,507] [WARNING] [aiogram.dispatcher] Sleep for 2.768948 seconds and try again... (tryings = 5, bot id = 8440100118)
[2025-11-27 17:55:40,285] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:40,286] [WARNING] [aiogram.dispatcher] Sleep for 3.654658 seconds and try again... (tryings = 6, bot id = 8440100118)
[2025-11-27 17:55:43,957] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:43,958] [WARNING] [aiogram.dispatcher] Sleep for 4.797862 seconds and try again... (tryings = 7, bot id = 8440100118)
[2025-11-27 17:56:04,059] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorSSLError: Cannot connect to host api.telegram.org:443 ssl:default [[SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:1032)]
[2025-11-27 17:56:04,060] [WARNING] [aiogram.dispatcher] Sleep for 4.880425 seconds and try again... (tryings = 8, bot id = 8440100118)
[2025-11-27 17:56:09,539] [INFO] [aiogram.dispatcher] Connection established (tryings = 9, bot id = 8440100118)
[2025-11-27 17:56:09,544] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 17:56:09,958] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 17:56:09,958] [INFO] [aiogram.event] Update id=131879634 is handled. Duration 417 ms by bot id=8440100118
[2025-11-27 17:56:16,371] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 17:56:16,547] [INFO] [aiogram.event] Update id=131879635 is handled. Duration 181 ms by bot id=8440100118
[2025-11-27 17:57:57,040] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 17:57:57,040] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:58:09,636] [INFO] [aiogram.dispatcher] Connection established (tryings = 1, bot id = 8440100118)
[2025-11-27 18:05:07,794] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 18:05:07,794] [INFO] [aiogram.event] Update id=131879636 is handled. Duration 903 ms by bot id=8440100118
[2025-11-27 18:20:24,265] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 18:20:24,266] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 18:20:25,279] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:20:25,280] [WARNING] [aiogram.dispatcher] Sleep for 1.266278 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 18:20:38,458] [INFO] [aiogram.dispatcher] Connection established (tryings = 2, bot id = 8440100118)
[2025-11-27 18:43:45,394] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 18:43:45,394] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 18:43:46,410] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:46,410] [WARNING] [aiogram.dispatcher] Sleep for 1.475970 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 18:43:47,895] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:47,896] [WARNING] [aiogram.dispatcher] Sleep for 1.948630 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 18:43:49,856] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:49,857] [WARNING] [aiogram.dispatcher] Sleep for 2.581776 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-27 18:43:52,447] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:52,447] [WARNING] [aiogram.dispatcher] Sleep for 3.377698 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-11-27 18:43:55,830] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:55,830] [WARNING] [aiogram.dispatcher] Sleep for 4.314681 seconds and try again... (tryings = 5, bot id = 8440100118)
[2025-11-27 18:44:00,157] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:00,157] [WARNING] [aiogram.dispatcher] Sleep for 4.824583 seconds and try again... (tryings = 6, bot id = 8440100118)
[2025-11-27 18:44:04,991] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:04,991] [WARNING] [aiogram.dispatcher] Sleep for 4.856746 seconds and try again... (tryings = 7, bot id = 8440100118)
[2025-11-27 18:44:09,857] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:09,857] [WARNING] [aiogram.dispatcher] Sleep for 5.164817 seconds and try again... (tryings = 8, bot id = 8440100118)
[2025-11-27 18:44:15,035] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:15,035] [WARNING] [aiogram.dispatcher] Sleep for 4.684514 seconds and try again... (tryings = 9, bot id = 8440100118)
[2025-11-27 18:44:19,732] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:19,732] [WARNING] [aiogram.dispatcher] Sleep for 4.896067 seconds and try again... (tryings = 10, bot id = 8440100118)
[2025-11-27 18:44:24,635] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:24,635] [WARNING] [aiogram.dispatcher] Sleep for 5.058570 seconds and try again... (tryings = 11, bot id = 8440100118)
[2025-11-27 18:44:29,697] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:29,697] [WARNING] [aiogram.dispatcher] Sleep for 5.023360 seconds and try again... (tryings = 12, bot id = 8440100118)
[2025-11-27 18:44:34,736] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:34,737] [WARNING] [aiogram.dispatcher] Sleep for 5.013694 seconds and try again... (tryings = 13, bot id = 8440100118)
[2025-11-27 18:44:39,763] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:39,763] [WARNING] [aiogram.dispatcher] Sleep for 5.056434 seconds and try again... (tryings = 14, bot id = 8440100118)
[2025-11-27 18:44:44,832] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:44,832] [WARNING] [aiogram.dispatcher] Sleep for 5.025322 seconds and try again... (tryings = 15, bot id = 8440100118)
[2025-11-27 18:44:49,864] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:49,864] [WARNING] [aiogram.dispatcher] Sleep for 4.899981 seconds and try again... (tryings = 16, bot id = 8440100118)
[2025-11-27 18:44:54,765] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:54,766] [WARNING] [aiogram.dispatcher] Sleep for 4.830646 seconds and try again... (tryings = 17, bot id = 8440100118)
[2025-11-27 18:44:59,610] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:59,611] [WARNING] [aiogram.dispatcher] Sleep for 4.956331 seconds and try again... (tryings = 18, bot id = 8440100118)
[2025-11-27 18:45:04,569] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:45:04,569] [WARNING] [aiogram.dispatcher] Sleep for 4.910033 seconds and try again... (tryings = 19, bot id = 8440100118)
[2025-11-27 18:45:09,496] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:45:09,496] [WARNING] [aiogram.dispatcher] Sleep for 4.884456 seconds and try again... (tryings = 20, bot id = 8440100118)
[2025-11-27 18:45:14,398] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:45:14,398] [WARNING] [aiogram.dispatcher] Sleep for 5.097972 seconds and try again... (tryings = 21, bot id = 8440100118)
[2025-11-27 18:45:35,026] [INFO] [aiogram.dispatcher] Connection established (tryings = 22, bot id = 8440100118)
[2025-11-27 18:53:55,700] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 18:53:55,701] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 18:53:55,701] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 18:53:55,959] [INFO] [__main__] Bot shutdown complete
[2025-11-27 18:53:55,960] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 18:54:00,344] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 18:54:00,344] [INFO] [__main__] Starting bot polling
[2025-11-27 18:54:00,345] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 18:54:00,828] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 18:54:47,876] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 18:54:47,877] [INFO] [aiogram.event] Update id=131879637 is handled. Duration 756 ms by bot id=8440100118
[2025-11-27 18:54:49,780] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 18:54:49,781] [INFO] [aiogram.event] Update id=131879638 is handled. Duration 225 ms by bot id=8440100118
[2025-11-27 18:54:54,075] [INFO] [aiogram.event] Update id=131879639 is not handled. Duration 122 ms by bot id=8440100118
[2025-11-27 18:54:54,075] [ERROR] [aiogram.event] Cause exception while process update id=131879639 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 179, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 19:13:11,965] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 19:13:11,966] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 19:13:11,967] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 19:13:12,226] [INFO] [__main__] Bot shutdown complete
[2025-11-27 19:13:12,227] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:13:16,869] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 19:13:16,869] [INFO] [__main__] Starting bot polling
[2025-11-27 19:13:16,870] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 19:13:17,347] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:14:17,470] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 19:14:17,470] [INFO] [aiogram.event] Update id=131879640 is handled. Duration 1751 ms by bot id=8440100118
[2025-11-27 19:14:20,656] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 19:14:20,657] [INFO] [aiogram.event] Update id=131879641 is handled. Duration 1409 ms by bot id=8440100118
[2025-11-27 19:14:26,727] [INFO] [aiogram.event] Update id=131879642 is handled. Duration 454 ms by bot id=8440100118
[2025-11-27 19:14:33,427] [INFO] [aiogram.event] Update id=131879643 is handled. Duration 282 ms by bot id=8440100118
[2025-11-27 19:14:35,633] [INFO] [aiogram.event] Update id=131879644 is handled. Duration 549 ms by bot id=8440100118
[2025-11-27 19:14:37,463] [INFO] [aiogram.event] Update id=131879645 is handled. Duration 486 ms by bot id=8440100118
[2025-11-27 19:14:38,835] [INFO] [aiogram.event] Update id=131879646 is handled. Duration 333 ms by bot id=8440100118
[2025-11-27 19:14:40,203] [INFO] [aiogram.event] Update id=131879647 is handled. Duration 237 ms by bot id=8440100118
[2025-11-27 19:14:41,686] [INFO] [aiogram.event] Update id=131879648 is handled. Duration 263 ms by bot id=8440100118
[2025-11-27 19:14:42,946] [INFO] [aiogram.event] Update id=131879649 is handled. Duration 402 ms by bot id=8440100118
[2025-11-27 19:14:43,404] [INFO] [aiogram.event] Update id=131879650 is handled. Duration 634 ms by bot id=8440100118
[2025-11-27 19:14:43,521] [INFO] [aiogram.event] Update id=131879651 is handled. Duration 512 ms by bot id=8440100118
[2025-11-27 19:14:45,102] [INFO] [aiogram.event] Update id=131879652 is handled. Duration 454 ms by bot id=8440100118
[2025-11-27 19:14:45,423] [INFO] [aiogram.event] Update id=131879653 is handled. Duration 450 ms by bot id=8440100118
[2025-11-27 19:14:45,556] [INFO] [aiogram.event] Update id=131879654 is handled. Duration 452 ms by bot id=8440100118
[2025-11-27 19:14:46,968] [INFO] [aiogram.event] Update id=131879655 is handled. Duration 504 ms by bot id=8440100118
[2025-11-27 19:14:48,178] [INFO] [aiogram.event] Update id=131879656 is handled. Duration 247 ms by bot id=8440100118
[2025-11-27 19:14:48,423] [INFO] [aiogram.event] Update id=131879657 is handled. Duration 345 ms by bot id=8440100118
[2025-11-27 19:14:48,526] [INFO] [aiogram.event] Update id=131879658 is handled. Duration 210 ms by bot id=8440100118
[2025-11-27 19:14:48,799] [INFO] [aiogram.event] Update id=131879659 is handled. Duration 210 ms by bot id=8440100118
[2025-11-27 19:14:49,163] [INFO] [aiogram.event] Update id=131879660 is handled. Duration 266 ms by bot id=8440100118
[2025-11-27 19:14:49,578] [INFO] [aiogram.event] Update id=131879661 is handled. Duration 357 ms by bot id=8440100118
[2025-11-27 19:14:49,709] [INFO] [aiogram.event] Update id=131879662 is handled. Duration 288 ms by bot id=8440100118
[2025-11-27 19:14:50,034] [INFO] [aiogram.event] Update id=131879663 is handled. Duration 390 ms by bot id=8440100118
[2025-11-27 19:14:50,228] [INFO] [aiogram.event] Update id=131879664 is handled. Duration 352 ms by bot id=8440100118
[2025-11-27 19:14:51,949] [INFO] [aiogram.event] Update id=131879665 is handled. Duration 287 ms by bot id=8440100118
[2025-11-27 19:14:53,228] [INFO] [aiogram.event] Update id=131879666 is handled. Duration 295 ms by bot id=8440100118
[2025-11-27 19:14:53,545] [INFO] [aiogram.event] Update id=131879667 is handled. Duration 265 ms by bot id=8440100118
[2025-11-27 19:14:55,031] [INFO] [aiogram.event] Update id=131879668 is handled. Duration 507 ms by bot id=8440100118
[2025-11-27 19:14:55,525] [INFO] [aiogram.event] Update id=131879669 is handled. Duration 489 ms by bot id=8440100118
[2025-11-27 19:14:55,667] [INFO] [aiogram.event] Update id=131879670 is handled. Duration 425 ms by bot id=8440100118
[2025-11-27 19:14:56,422] [INFO] [aiogram.event] Update id=131879671 is handled. Duration 1093 ms by bot id=8440100118
[2025-11-27 19:14:58,937] [INFO] [aiogram.event] Update id=131879672 is handled. Duration 729 ms by bot id=8440100118
[2025-11-27 19:15:07,786] [INFO] [aiogram.event] Update id=131879673 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:15:12,064] [INFO] [aiogram.event] Update id=131879674 is handled. Duration 1 ms by bot id=8440100118
[2025-11-27 19:15:28,601] [INFO] [aiogram.event] Update id=131879675 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:15:29,390] [INFO] [aiogram.event] Update id=131879676 is handled. Duration 1 ms by bot id=8440100118
[2025-11-27 19:15:30,675] [INFO] [aiogram.event] Update id=131879677 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:15:31,146] [INFO] [aiogram.event] Update id=131879678 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:39:21,790] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 19:39:21,791] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 19:39:21,791] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 19:39:22,054] [INFO] [__main__] Bot shutdown complete
[2025-11-27 19:39:22,055] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:39:29,655] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 19:39:29,655] [INFO] [__main__] Starting bot polling
[2025-11-27 19:39:29,656] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 19:39:30,027] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:41:38,923] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 19:41:38,924] [INFO] [aiogram.event] Update id=131879679 is handled. Duration 488 ms by bot id=8440100118
[2025-11-27 19:41:42,516] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 19:41:42,517] [INFO] [aiogram.event] Update id=131879680 is handled. Duration 523 ms by bot id=8440100118
[2025-11-27 19:41:43,860] [INFO] [aiogram.event] Update id=131879681 is handled. Duration 305 ms by bot id=8440100118
[2025-11-27 19:41:44,298] [INFO] [aiogram.event] Update id=131879682 is handled. Duration 574 ms by bot id=8440100118
[2025-11-27 20:07:27,303] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 20:07:27,305] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 20:07:27,305] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 20:07:27,557] [INFO] [__main__] Bot shutdown complete
[2025-11-27 20:07:27,558] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 20:07:36,161] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 20:07:36,161] [INFO] [__main__] Starting bot polling
[2025-11-27 20:07:36,162] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 20:07:36,687] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 20:07:44,519] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 20:07:44,520] [INFO] [aiogram.event] Update id=131879683 is handled. Duration 305 ms by bot id=8440100118
[2025-11-27 20:07:47,229] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 20:07:47,230] [INFO] [aiogram.event] Update id=131879684 is handled. Duration 333 ms by bot id=8440100118
[2025-11-27 20:07:49,052] [INFO] [aiogram.event] Update id=131879685 is not handled. Duration 152 ms by bot id=8440100118
[2025-11-27 20:07:49,052] [ERROR] [aiogram.event] Cause exception while process update id=131879685 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 20:07:49,310] [INFO] [aiogram.event] Update id=131879686 is not handled. Duration 209 ms by bot id=8440100118
[2025-11-27 20:07:49,310] [ERROR] [aiogram.event] Cause exception while process update id=131879686 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 20:07:49,442] [INFO] [aiogram.event] Update id=131879687 is not handled. Duration 120 ms by bot id=8440100118
[2025-11-27 20:07:49,442] [ERROR] [aiogram.event] Cause exception while process update id=131879687 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 20:07:49,726] [INFO] [aiogram.event] Update id=131879688 is not handled. Duration 118 ms by bot id=8440100118
[2025-11-27 20:07:49,726] [ERROR] [aiogram.event] Cause exception while process update id=131879688 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-12-04 00:15:38,723] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 00:15:38,724] [INFO] [__main__] Starting bot polling
[2025-12-04 00:15:38,724] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 00:15:39,205] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 00:15:48,537] [INFO] [handlers.start] User 838347504 started bot
[2025-12-04 00:15:48,537] [INFO] [aiogram.event] Update id=131879689 is handled. Duration 644 ms by bot id=8440100118
[2025-12-04 00:15:51,243] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-12-04 00:15:51,243] [INFO] [aiogram.event] Update id=131879690 is handled. Duration 541 ms by bot id=8440100118
[2025-12-04 00:15:53,418] [INFO] [aiogram.event] Update id=131879691 is not handled. Duration 178 ms by bot id=8440100118
[2025-12-04 00:15:53,418] [ERROR] [aiogram.event] Cause exception while process update id=131879691 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-12-04 08:59:08,760] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-12-04 08:59:08,761] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 08:59:09,766] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:09,767] [WARNING] [aiogram.dispatcher] Sleep for 1.343808 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-12-04 08:59:11,118] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:11,118] [WARNING] [aiogram.dispatcher] Sleep for 1.642843 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-12-04 08:59:12,775] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:12,776] [WARNING] [aiogram.dispatcher] Sleep for 2.047595 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-12-04 08:59:14,831] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:14,831] [WARNING] [aiogram.dispatcher] Sleep for 2.787261 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-12-04 08:59:17,635] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:17,635] [WARNING] [aiogram.dispatcher] Sleep for 3.597123 seconds and try again... (tryings = 5, bot id = 8440100118)
[2025-12-04 08:59:21,239] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:21,239] [WARNING] [aiogram.dispatcher] Sleep for 4.758203 seconds and try again... (tryings = 6, bot id = 8440100118)
[2025-12-04 08:59:26,006] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:26,006] [WARNING] [aiogram.dispatcher] Sleep for 5.013991 seconds and try again... (tryings = 7, bot id = 8440100118)
[2025-12-04 08:59:41,209] [INFO] [aiogram.dispatcher] Connection established (tryings = 8, bot id = 8440100118)
[2025-12-04 16:25:45,609] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 16:25:45,614] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 16:25:45,614] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 16:25:45,880] [INFO] [__main__] Bot shutdown complete
[2025-12-04 16:25:45,894] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 16:25:51,614] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 16:25:51,614] [INFO] [__main__] Starting bot polling
[2025-12-04 16:25:51,614] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 16:25:51,864] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 16:25:55,148] [INFO] [handlers.start] User 192487529 started bot
[2025-12-04 16:25:55,149] [INFO] [aiogram.event] Update id=131879692 is handled. Duration 218 ms by bot id=8440100118
[2025-12-04 16:25:58,374] [INFO] [handlers.finances] User 192487529 started income calculation
[2025-12-04 16:25:58,374] [INFO] [aiogram.event] Update id=131879693 is handled. Duration 377 ms by bot id=8440100118
[2025-12-04 18:57:53,363] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 18:57:53,368] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 18:57:53,369] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 18:57:53,622] [INFO] [__main__] Bot shutdown complete
[2025-12-04 18:57:53,624] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 18:57:57,880] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 18:57:57,881] [INFO] [__main__] Starting bot polling
[2025-12-04 18:57:57,881] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 18:57:58,059] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 18:58:34,909] [INFO] [handlers.start] User 838347504 started bot
[2025-12-04 18:58:34,909] [INFO] [aiogram.event] Update id=131879694 is handled. Duration 238 ms by bot id=8440100118
[2025-12-04 18:58:45,119] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-12-04 18:58:45,119] [INFO] [aiogram.event] Update id=131879695 is handled. Duration 214 ms by bot id=8440100118
[2025-12-04 18:58:48,458] [WARNING] [handlers.finances] Failed to edit income message 3139: Telegram server says - Bad Request: message can't be edited
[2025-12-04 18:58:48,619] [INFO] [aiogram.event] Update id=131879696 is handled. Duration 216 ms by bot id=8440100118
[2025-12-04 18:58:51,818] [INFO] [aiogram.event] Update id=131879697 is handled. Duration 221 ms by bot id=8440100118
[2025-12-04 18:59:02,097] [INFO] [aiogram.event] Update id=131879698 is handled. Duration 170 ms by bot id=8440100118
[2025-12-04 18:59:17,354] [INFO] [aiogram.event] Update id=131879699 is handled. Duration 150 ms by bot id=8440100118
[2025-12-04 18:59:18,075] [INFO] [aiogram.event] Update id=131879700 is handled. Duration 157 ms by bot id=8440100118
[2025-12-04 18:59:19,261] [INFO] [aiogram.event] Update id=131879701 is handled. Duration 270 ms by bot id=8440100118
[2025-12-04 18:59:21,302] [INFO] [aiogram.event] Update id=131879702 is handled. Duration 211 ms by bot id=8440100118
[2025-12-04 18:59:23,098] [INFO] [aiogram.event] Update id=131879703 is handled. Duration 444 ms by bot id=8440100118
[2025-12-04 18:59:29,371] [INFO] [handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-04 18:59:29,449] [INFO] [aiogram.event] Update id=131879704 is handled. Duration 80 ms by bot id=8440100118
[2025-12-04 21:37:55,711] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 21:37:55,717] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 21:37:55,718] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 21:37:55,971] [INFO] [__main__] Bot shutdown complete
[2025-12-04 21:37:55,973] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 21:38:02,009] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 21:38:02,010] [INFO] [__main__] Starting bot polling
[2025-12-04 21:38:02,010] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 21:38:02,209] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 21:38:10,589] [INFO] [handlers.start] User 838347504 started bot
[2025-12-04 21:38:10,589] [INFO] [aiogram.event] Update id=131879705 is handled. Duration 201 ms by bot id=8440100118
[2025-12-04 21:38:12,352] [INFO] [aiogram.event] Update id=131879706 is not handled. Duration 146 ms by bot id=8440100118
[2025-12-04 21:38:12,352] [ERROR] [aiogram.event] Cause exception while process update id=131879706 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 136, in start_income_flow
    await message.answer("\u200b", reply_markup=income_calculator_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-12-04 21:38:32,453] [INFO] [aiogram.event] Update id=131879707 is not handled. Duration 223 ms by bot id=8440100118
[2025-12-04 21:38:32,453] [ERROR] [aiogram.event] Cause exception while process update id=131879707 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 136, in start_income_flow
    await message.answer("\u200b", reply_markup=income_calculator_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-12-04 21:38:38,764] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 21:38:38,767] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 21:38:38,767] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 21:38:39,030] [INFO] [__main__] Bot shutdown complete
[2025-12-04 21:38:39,030] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 21:38:45,240] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 21:38:45,241] [INFO] [__main__] Starting bot polling
[2025-12-04 21:38:45,241] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 21:38:45,454] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 17:43:54,687] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 17:43:54,687] [INFO] [__main__] Starting bot polling
[2025-11-25 17:43:54,687] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 17:43:54,851] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 17:52:36,582] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 17:52:36,582] [INFO] [aiogram.event] Update id=131879088 is handled. Duration 180 ms by bot id=8440100118
[2025-11-25 17:52:41,583] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 17:52:41,584] [INFO] [aiogram.event] Update id=131879089 is handled. Duration 151 ms by bot id=8440100118
[2025-11-25 17:52:43,196] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 17:52:43,197] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 17:52:43,265] [INFO] [aiogram.event] Update id=131879090 is handled. Duration 69 ms by bot id=8440100118
[2025-11-25 17:52:45,383] [INFO] [database.crud] Fetched wish 1
[2025-11-25 17:52:45,384] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 17:52:45,446] [INFO] [aiogram.event] Update id=131879091 is handled. Duration 63 ms by bot id=8440100118
[2025-11-25 17:52:53,630] [INFO] [database.crud] Fetched wish 1
[2025-11-25 17:52:53,630] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 17:52:53,734] [INFO] [aiogram.event] Update id=131879092 is handled. Duration 105 ms by bot id=8440100118
[2025-11-25 17:54:04,061] [INFO] [handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-11-25 17:54:04,062] [INFO] [handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-11-25 17:54:04,131] [INFO] [aiogram.event] Update id=131879093 is handled. Duration 75 ms by bot id=8440100118
[2025-11-25 17:54:04,247] [INFO] [aiogram.event] Update id=131879094 is handled. Duration 192 ms by bot id=8440100118
[2025-11-25 18:11:13,636] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 18:11:13,637] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 18:11:13,637] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 18:11:13,898] [INFO] [__main__] Bot shutdown complete
[2025-11-25 18:11:13,899] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:11:18,293] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 18:11:18,293] [INFO] [__main__] Starting bot polling
[2025-11-25 18:11:18,294] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 18:11:18,457] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:30:38,927] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 18:30:38,927] [INFO] [aiogram.event] Update id=131879095 is handled. Duration 207 ms by bot id=8440100118
[2025-11-25 18:30:42,018] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:30:42,018] [INFO] [aiogram.event] Update id=131879096 is handled. Duration 265 ms by bot id=8440100118
[2025-11-25 18:30:45,491] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:30:45,491] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:30:45,637] [INFO] [aiogram.event] Update id=131879097 is handled. Duration 146 ms by bot id=8440100118
[2025-11-25 18:30:53,095] [INFO] [database.crud] Fetched wish 1
[2025-11-25 18:30:53,096] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:30:53,117] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -5000.0
[2025-11-25 18:30:53,122] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-25 18:30:53,127] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-25 18:30:53,195] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=Инструменты, savings_category=сбережения, price=5000.00, savings_before=202000.00)
[2025-11-25 18:30:53,195] [INFO] [aiogram.event] Update id=131879098 is handled. Duration 100 ms by bot id=8440100118
[2025-11-25 18:31:01,945] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-25 18:31:02,042] [INFO] [aiogram.event] Update id=131879099 is handled. Duration 100 ms by bot id=8440100118
[2025-11-25 18:31:21,876] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:31:21,876] [INFO] [aiogram.event] Update id=131879100 is handled. Duration 330 ms by bot id=8440100118
[2025-11-25 18:31:25,143] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:25,143] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:25,277] [INFO] [aiogram.event] Update id=131879101 is handled. Duration 134 ms by bot id=8440100118
[2025-11-25 18:31:27,975] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:27,975] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:28,038] [INFO] [aiogram.event] Update id=131879102 is not handled. Duration 63 ms by bot id=8440100118
[2025-11-25 18:31:28,039] [ERROR] [aiogram.event] Cause exception while process update id=131879102 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 42, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 18:31:35,236] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:35,236] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:35,385] [INFO] [aiogram.event] Update id=131879103 is not handled. Duration 150 ms by bot id=8440100118
[2025-11-25 18:31:35,385] [ERROR] [aiogram.event] Cause exception while process update id=131879103 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 42, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 18:31:39,502] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:31:39,502] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:31:39,618] [INFO] [aiogram.event] Update id=131879104 is not handled. Duration 116 ms by bot id=8440100118
[2025-11-25 18:31:39,618] [ERROR] [aiogram.event] Cause exception while process update id=131879104 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 42, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-25 18:31:43,690] [INFO] [aiogram.event] Update id=131879105 is handled. Duration 152 ms by bot id=8440100118
[2025-11-25 18:31:46,481] [INFO] [aiogram.event] Update id=131879106 is handled. Duration 81 ms by bot id=8440100118
[2025-11-25 18:31:50,985] [INFO] [aiogram.event] Update id=131879107 is handled. Duration 70 ms by bot id=8440100118
[2025-11-25 18:31:54,345] [INFO] [aiogram.event] Update id=131879108 is handled. Duration 89 ms by bot id=8440100118
[2025-11-25 18:31:55,963] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-25 18:31:56,146] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-25 18:31:56,146] [INFO] [aiogram.event] Update id=131879109 is handled. Duration 200 ms by bot id=8440100118
[2025-11-25 18:32:04,045] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 18:32:04,045] [INFO] [aiogram.event] Update id=131879110 is handled. Duration 85 ms by bot id=8440100118
[2025-11-25 18:32:05,259] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 18:32:05,259] [INFO] [aiogram.event] Update id=131879111 is handled. Duration 123 ms by bot id=8440100118
[2025-11-25 18:32:06,670] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 18:32:06,670] [INFO] [aiogram.event] Update id=131879112 is handled. Duration 133 ms by bot id=8440100118
[2025-11-25 18:32:07,869] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:32:07,870] [INFO] [aiogram.event] Update id=131879113 is handled. Duration 226 ms by bot id=8440100118
[2025-11-25 18:32:09,155] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 18:32:09,155] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 18:32:09,332] [INFO] [aiogram.event] Update id=131879114 is handled. Duration 178 ms by bot id=8440100118
[2025-11-25 18:32:17,757] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 18:32:17,758] [INFO] [aiogram.event] Update id=131879115 is handled. Duration 74 ms by bot id=8440100118
[2025-11-25 18:33:13,134] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 18:33:13,134] [INFO] [aiogram.event] Update id=131879116 is handled. Duration 223 ms by bot id=8440100118
[2025-11-25 18:36:01,192] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 18:36:01,192] [INFO] [aiogram.event] Update id=131879117 is handled. Duration 83 ms by bot id=8440100118
[2025-11-25 18:36:02,953] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 18:36:02,954] [INFO] [aiogram.event] Update id=131879118 is handled. Duration 85 ms by bot id=8440100118
[2025-11-25 18:36:08,641] [INFO] [aiogram.event] Update id=131879119 is handled. Duration 80 ms by bot id=8440100118
[2025-11-25 18:36:10,121] [INFO] [aiogram.event] Update id=131879120 is not handled. Duration 1 ms by bot id=8440100118
[2025-11-25 18:36:10,121] [ERROR] [aiogram.event] Cause exception while process update id=131879120 by bot id=8440100118
TypeError: can only concatenate str (not "float") to str
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 110, in handle_category_confirmation
    FinanceDatabase().update_saving(user_id=message.from_user.id, category=current["category"], amount_delta=current["amount"])
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\database\crud.py", line 154, in update_saving
    new_value = row["current"] + amount_delta
                ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
TypeError: can only concatenate str (not "float") to str
[2025-11-25 18:36:21,839] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 18:36:21,840] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 18:36:21,840] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 18:36:22,095] [INFO] [__main__] Bot shutdown complete
[2025-11-25 18:36:22,095] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:36:26,690] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 18:36:26,691] [INFO] [__main__] Starting bot polling
[2025-11-25 18:36:26,691] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 18:36:26,857] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 18:36:38,625] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 18:36:38,625] [INFO] [aiogram.event] Update id=131879121 is handled. Duration 176 ms by bot id=8440100118
[2025-11-25 18:36:40,625] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 18:36:40,625] [INFO] [aiogram.event] Update id=131879122 is handled. Duration 155 ms by bot id=8440100118
[2025-11-25 18:36:47,057] [INFO] [aiogram.event] Update id=131879123 is handled. Duration 132 ms by bot id=8440100118
[2025-11-25 18:36:49,481] [INFO] [aiogram.event] Update id=131879124 is not handled. Duration 2 ms by bot id=8440100118
[2025-11-25 18:36:49,481] [ERROR] [aiogram.event] Cause exception while process update id=131879124 by bot id=8440100118
TypeError: can only concatenate str (not "float") to str
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 110, in handle_category_confirmation
    FinanceDatabase().update_saving(user_id=message.from_user.id, category=current["category"], amount_delta=current["amount"])
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\database\crud.py", line 154, in update_saving
    new_value = row["current"] + amount_delta
                ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
TypeError: can only concatenate str (not "float") to str
[2025-11-25 18:37:06,940] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-25 18:37:06,941] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-25 18:37:06,941] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-25 18:37:07,194] [INFO] [__main__] Bot shutdown complete
[2025-11-25 18:37:07,194] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 19:33:14,988] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-25 19:33:14,988] [INFO] [__main__] Starting bot polling
[2025-11-25 19:33:14,988] [INFO] [aiogram.dispatcher] Start polling
[2025-11-25 19:33:15,151] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-25 19:33:29,960] [INFO] [handlers.start] User 838347504 started bot
[2025-11-25 19:33:29,960] [INFO] [aiogram.event] Update id=131879125 is handled. Duration 183 ms by bot id=8440100118
[2025-11-25 19:33:35,171] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-25 19:33:35,171] [INFO] [aiogram.event] Update id=131879126 is handled. Duration 95 ms by bot id=8440100118
[2025-11-25 19:33:44,301] [INFO] [aiogram.event] Update id=131879127 is handled. Duration 117 ms by bot id=8440100118
[2025-11-25 19:33:47,281] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3000.0
[2025-11-25 19:33:47,656] [INFO] [aiogram.event] Update id=131879128 is handled. Duration 386 ms by bot id=8440100118
[2025-11-25 19:33:49,258] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2000.0
[2025-11-25 19:33:49,481] [INFO] [aiogram.event] Update id=131879129 is handled. Duration 253 ms by bot id=8440100118
[2025-11-25 19:33:51,401] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2000.0
[2025-11-25 19:33:51,552] [INFO] [aiogram.event] Update id=131879130 is handled. Duration 156 ms by bot id=8440100118
[2025-11-25 19:33:55,414] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2000.0
[2025-11-25 19:33:55,564] [INFO] [aiogram.event] Update id=131879131 is handled. Duration 158 ms by bot id=8440100118
[2025-11-25 19:33:58,463] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1000.0
[2025-11-25 19:33:58,543] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-25 19:33:58,620] [INFO] [aiogram.event] Update id=131879132 is handled. Duration 168 ms by bot id=8440100118
[2025-11-25 19:34:11,572] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 19:34:11,572] [INFO] [aiogram.event] Update id=131879133 is handled. Duration 158 ms by bot id=8440100118
[2025-11-25 19:34:13,621] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 19:34:13,621] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 19:34:13,753] [INFO] [aiogram.event] Update id=131879134 is handled. Duration 133 ms by bot id=8440100118
[2025-11-25 19:40:07,295] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-25 19:40:07,296] [INFO] [aiogram.event] Update id=131879135 is handled. Duration 114 ms by bot id=8440100118
[2025-11-25 19:40:09,646] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-25 19:40:09,646] [INFO] [aiogram.event] Update id=131879136 is handled. Duration 173 ms by bot id=8440100118
[2025-11-25 19:40:37,574] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-25 19:40:37,574] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-25 19:40:37,656] [INFO] [aiogram.event] Update id=131879137 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 09:19:15,959] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-26 09:19:16,097] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 09:19:17,178] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:17,178] [WARNING] [aiogram.dispatcher] Sleep for 1.260379 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-26 09:19:18,454] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:18,455] [WARNING] [aiogram.dispatcher] Sleep for 1.657413 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-26 09:19:20,120] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:20,120] [WARNING] [aiogram.dispatcher] Sleep for 2.194204 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-26 09:19:22,330] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 09:19:22,330] [WARNING] [aiogram.dispatcher] Sleep for 2.959031 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-11-26 09:19:25,490] [INFO] [aiogram.dispatcher] Connection established (tryings = 5, bot id = 8440100118)
[2025-11-26 09:19:25,497] [INFO] [handlers.common] Fallback triggered. User: 7085072764 State: None Text: Напиши, как ты Вероника
[2025-11-26 09:19:25,498] [INFO] [handlers.common] Fallback triggered. User: 7085072764 State: None Text: Я с тобой всегда
[2025-11-26 09:19:25,671] [INFO] [aiogram.event] Update id=131879139 is handled. Duration 179 ms by bot id=8440100118
[2025-11-26 09:19:25,690] [INFO] [aiogram.event] Update id=131879138 is handled. Duration 198 ms by bot id=8440100118
[2025-11-26 09:45:40,796] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 09:45:40,798] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 09:45:40,798] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 09:45:41,059] [INFO] [__main__] Bot shutdown complete
[2025-11-26 09:45:41,061] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 09:45:46,634] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 09:45:46,634] [INFO] [__main__] Starting bot polling
[2025-11-26 09:45:46,634] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 09:45:46,794] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 09:45:49,894] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 09:45:49,894] [INFO] [aiogram.event] Update id=131879140 is handled. Duration 212 ms by bot id=8440100118
[2025-11-26 09:46:04,603] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 09:46:04,604] [INFO] [aiogram.event] Update id=131879141 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 09:46:10,320] [INFO] [aiogram.event] Update id=131879142 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 09:46:11,865] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3000.0
[2025-11-26 09:46:12,024] [INFO] [aiogram.event] Update id=131879143 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 09:46:17,922] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2000.0
[2025-11-26 09:46:18,066] [INFO] [aiogram.event] Update id=131879144 is handled. Duration 174 ms by bot id=8440100118
[2025-11-26 09:46:19,505] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2000.0
[2025-11-26 09:46:19,646] [INFO] [aiogram.event] Update id=131879145 is handled. Duration 148 ms by bot id=8440100118
[2025-11-26 09:46:21,464] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2000.0
[2025-11-26 09:46:21,635] [INFO] [aiogram.event] Update id=131879146 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 09:46:22,707] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1000.0
[2025-11-26 09:46:22,781] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 09:46:22,857] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:46:22,857] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:46:22,935] [INFO] [aiogram.event] Update id=131879147 is handled. Duration 257 ms by bot id=8440100118
[2025-11-26 09:46:42,998] [INFO] [database.crud] Fetched wish 2
[2025-11-26 09:46:42,998] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:46:43,030] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -766.0
[2025-11-26 09:46:43,034] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 09:46:43,039] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 09:46:43,105] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=Инструменты, savings_category=сбережения, price=766.00, savings_before=4000.00)
[2025-11-26 09:46:43,105] [INFO] [aiogram.event] Update id=131879148 is handled. Duration 108 ms by bot id=8440100118
[2025-11-26 09:46:59,137] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 09:46:59,138] [INFO] [aiogram.event] Update id=131879149 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 09:47:02,522] [INFO] [aiogram.event] Update id=131879150 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 09:47:03,748] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 09:47:03,887] [INFO] [aiogram.event] Update id=131879151 is handled. Duration 145 ms by bot id=8440100118
[2025-11-26 09:47:04,817] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 09:47:04,964] [INFO] [aiogram.event] Update id=131879152 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 09:47:06,035] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 09:47:06,174] [INFO] [aiogram.event] Update id=131879153 is handled. Duration 156 ms by bot id=8440100118
[2025-11-26 09:47:06,947] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 09:47:07,088] [INFO] [aiogram.event] Update id=131879154 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 09:47:08,003] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 09:47:08,078] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 09:47:08,152] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:47:08,153] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:47:08,153] [INFO] [aiogram.event] Update id=131879155 is handled. Duration 174 ms by bot id=8440100118
[2025-11-26 09:47:58,152] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:47:58,152] [INFO] [aiogram.event] Update id=131879156 is handled. Duration 343 ms by bot id=8440100118
[2025-11-26 09:48:17,366] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:17,366] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:17,435] [INFO] [aiogram.event] Update id=131879157 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 09:48:22,347] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:22,347] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:22,408] [INFO] [aiogram.event] Update id=131879158 is not handled. Duration 61 ms by bot id=8440100118
[2025-11-26 09:48:22,408] [ERROR] [aiogram.event] Cause exception while process update id=131879158 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:28,112] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:28,112] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:28,301] [INFO] [aiogram.event] Update id=131879159 is not handled. Duration 189 ms by bot id=8440100118
[2025-11-26 09:48:28,301] [ERROR] [aiogram.event] Cause exception while process update id=131879159 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:30,079] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 09:48:30,145] [INFO] [aiogram.event] Update id=131879160 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 09:48:34,733] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:48:34,733] [INFO] [aiogram.event] Update id=131879161 is handled. Duration 148 ms by bot id=8440100118
[2025-11-26 09:48:36,466] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 09:48:36,547] [INFO] [aiogram.event] Update id=131879162 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 09:48:38,289] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:48:38,290] [INFO] [aiogram.event] Update id=131879163 is handled. Duration 147 ms by bot id=8440100118
[2025-11-26 09:48:41,918] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:41,918] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:41,993] [INFO] [aiogram.event] Update id=131879164 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 09:48:46,047] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:46,048] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:46,153] [INFO] [aiogram.event] Update id=131879165 is not handled. Duration 105 ms by bot id=8440100118
[2025-11-26 09:48:46,153] [ERROR] [aiogram.event] Cause exception while process update id=131879165 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:48,255] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:48:48,256] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:48:48,379] [INFO] [aiogram.event] Update id=131879166 is not handled. Duration 124 ms by bot id=8440100118
[2025-11-26 09:48:48,379] [ERROR] [aiogram.event] Cause exception while process update id=131879166 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 68, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 09:48:50,324] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 09:48:50,324] [INFO] [aiogram.event] Update id=131879167 is handled. Duration 228 ms by bot id=8440100118
[2025-11-26 09:57:36,056] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:57:36,056] [INFO] [aiogram.event] Update id=131879168 is handled. Duration 145 ms by bot id=8440100118
[2025-11-26 09:57:38,343] [INFO] [aiogram.event] Update id=131879169 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 09:57:50,001] [INFO] [aiogram.event] Update id=131879170 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 09:57:54,476] [INFO] [aiogram.event] Update id=131879171 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 09:59:43,735] [INFO] [aiogram.event] Update id=131879172 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 09:59:45,852] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 09:59:45,919] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 09:59:45,919] [INFO] [aiogram.event] Update id=131879173 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 09:59:53,307] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 09:59:53,307] [INFO] [aiogram.event] Update id=131879174 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 09:59:55,004] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 09:59:55,005] [INFO] [aiogram.event] Update id=131879175 is handled. Duration 241 ms by bot id=8440100118
[2025-11-26 09:59:57,401] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 09:59:57,402] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 09:59:57,475] [INFO] [aiogram.event] Update id=131879176 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:14:24,916] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:14:24,917] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:14:24,917] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:14:25,172] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:14:25,173] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:14:29,354] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:14:29,355] [INFO] [__main__] Starting bot polling
[2025-11-26 10:14:29,355] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:14:29,513] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:16:49,699] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:16:49,700] [INFO] [aiogram.event] Update id=131879177 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 10:16:53,471] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:16:53,471] [INFO] [aiogram.event] Update id=131879178 is handled. Duration 309 ms by bot id=8440100118
[2025-11-26 10:16:56,643] [INFO] [aiogram.event] Update id=131879179 is handled. Duration 97 ms by bot id=8440100118
[2025-11-26 10:18:48,151] [INFO] [aiogram.event] Update id=131879180 is handled. Duration 68 ms by bot id=8440100118
[2025-11-26 10:18:52,430] [INFO] [aiogram.event] Update id=131879181 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:19:14,300] [INFO] [aiogram.event] Update id=131879182 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 10:19:19,884] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 10:19:19,996] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 10:19:19,997] [INFO] [aiogram.event] Update id=131879183 is handled. Duration 139 ms by bot id=8440100118
[2025-11-26 10:19:26,107] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:19:26,107] [INFO] [aiogram.event] Update id=131879184 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:19:29,329] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:19:29,329] [INFO] [aiogram.event] Update id=131879185 is handled. Duration 230 ms by bot id=8440100118
[2025-11-26 10:19:30,839] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:19:30,839] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:19:31,031] [INFO] [aiogram.event] Update id=131879186 is handled. Duration 193 ms by bot id=8440100118
[2025-11-26 10:21:21,662] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:21:21,662] [INFO] [aiogram.event] Update id=131879187 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:21:23,556] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:21:23,556] [INFO] [aiogram.event] Update id=131879188 is handled. Duration 106 ms by bot id=8440100118
[2025-11-26 10:21:29,724] [INFO] [aiogram.event] Update id=131879189 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:21:30,976] [INFO] [database.crud] Updated saving for user 838347504 category долги by 300000.0
[2025-11-26 10:21:31,132] [INFO] [aiogram.event] Update id=131879190 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 10:21:32,843] [INFO] [database.crud] Updated saving for user 838347504 category быт by 200000.0
[2025-11-26 10:21:33,176] [INFO] [aiogram.event] Update id=131879191 is handled. Duration 348 ms by bot id=8440100118
[2025-11-26 10:21:34,382] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 200000.0
[2025-11-26 10:21:34,520] [INFO] [aiogram.event] Update id=131879192 is handled. Duration 157 ms by bot id=8440100118
[2025-11-26 10:21:35,993] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 200000.0
[2025-11-26 10:21:36,192] [INFO] [aiogram.event] Update id=131879193 is handled. Duration 205 ms by bot id=8440100118
[2025-11-26 10:21:38,678] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 100000.0
[2025-11-26 10:21:38,748] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:21:38,824] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:21:38,825] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:21:38,897] [INFO] [aiogram.event] Update id=131879194 is handled. Duration 227 ms by bot id=8440100118
[2025-11-26 10:21:53,065] [INFO] [database.crud] Fetched wish 3
[2025-11-26 10:21:53,065] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:21:53,081] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -12000.0
[2025-11-26 10:21:53,085] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 10:21:53,090] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:21:53,156] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=вклад в себя, savings_category=инвестиции, price=12000.00, savings_before=204002.00)
[2025-11-26 10:21:53,156] [INFO] [aiogram.event] Update id=131879195 is handled. Duration 91 ms by bot id=8440100118
[2025-11-26 10:22:06,727] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:22:06,727] [INFO] [aiogram.event] Update id=131879196 is handled. Duration 171 ms by bot id=8440100118
[2025-11-26 10:22:08,836] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:22:08,837] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:22:08,907] [INFO] [aiogram.event] Update id=131879197 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:22:12,476] [INFO] [database.crud] Fetched wish 4
[2025-11-26 10:22:12,476] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:22:12,494] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -12000.0
[2025-11-26 10:22:12,499] [INFO] [database.crud] Marked wish 4 as purchased
[2025-11-26 10:22:12,503] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:22:12,567] [INFO] [handlers.callbacks] User 838347504 purchased wish 4 (wishlist_category=вклад в себя, savings_category=инвестиции, price=12000.00, savings_before=192002.00)
[2025-11-26 10:22:12,567] [INFO] [aiogram.event] Update id=131879198 is handled. Duration 91 ms by bot id=8440100118
[2025-11-26 10:22:28,962] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:22:28,963] [INFO] [aiogram.event] Update id=131879199 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:23:26,650] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:23:26,651] [INFO] [aiogram.event] Update id=131879200 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:23:29,927] [INFO] [aiogram.event] Update id=131879201 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:23:31,289] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:23:31,438] [INFO] [aiogram.event] Update id=131879202 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 10:23:32,182] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:23:32,324] [INFO] [aiogram.event] Update id=131879203 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 10:23:33,219] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:23:33,402] [INFO] [aiogram.event] Update id=131879204 is handled. Duration 203 ms by bot id=8440100118
[2025-11-26 10:23:34,247] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:23:34,400] [INFO] [aiogram.event] Update id=131879205 is handled. Duration 192 ms by bot id=8440100118
[2025-11-26 10:23:35,765] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:23:35,915] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:23:36,037] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:23:36,038] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:23:36,038] [INFO] [aiogram.event] Update id=131879206 is handled. Duration 289 ms by bot id=8440100118
[2025-11-26 10:26:03,693] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:26:03,694] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:26:03,694] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:26:03,947] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:26:03,948] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:29:37,124] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:29:37,124] [INFO] [__main__] Starting bot polling
[2025-11-26 10:29:37,124] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:29:37,160] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:29:37,423] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:29:37,749] [ERROR] [asyncio] Task exception was never retrieved
future: <Task finished name='Task-2' coro=<Dispatcher._polling() done, defined at C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py:339> exception=TelegramNetworkError('HTTP Client says - ClientConnectionError: Connector is closed.')>
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 177, in make_request
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 1488, in __aenter__
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 770, in _request
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 725, in _connect_and_send_request
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\connector.py", line 652, in connect
aiohttp.client_exceptions.ClientConnectionError: Connector is closed.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 362, in _polling
    user: User = await bot.me()
                 ^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 357, in me
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1797, in get_me
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 184, in make_request
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectionError: Connector is closed.
[2025-11-26 10:30:01,598] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:30:01,599] [INFO] [__main__] Starting bot polling
[2025-11-26 10:30:01,599] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:30:01,757] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:30:39,339] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:30:39,339] [INFO] [aiogram.event] Update id=131879207 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 10:30:42,211] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:30:42,211] [INFO] [aiogram.event] Update id=131879208 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:30:47,363] [INFO] [aiogram.event] Update id=131879209 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 10:30:53,997] [ERROR] [database.crud] Failed to update saving for user 838347504 category долги: database is locked
[2025-11-26 10:30:54,148] [INFO] [aiogram.event] Update id=131879210 is handled. Duration 5691 ms by bot id=8440100118
[2025-11-26 10:30:56,840] [ERROR] [database.crud] Failed to update saving for user 838347504 category быт: database is locked
[2025-11-26 10:30:56,984] [INFO] [aiogram.event] Update id=131879211 is handled. Duration 145 ms by bot id=8440100118
[2025-11-26 10:30:58,439] [ERROR] [database.crud] Failed to update saving for user 838347504 category инвестиции: database is locked
[2025-11-26 10:30:58,583] [INFO] [aiogram.event] Update id=131879212 is handled. Duration 144 ms by bot id=8440100118
[2025-11-26 10:31:00,073] [ERROR] [database.crud] Failed to update saving for user 838347504 category сбережения: database is locked
[2025-11-26 10:31:00,262] [INFO] [aiogram.event] Update id=131879213 is handled. Duration 191 ms by bot id=8440100118
[2025-11-26 10:31:01,563] [ERROR] [database.crud] Failed to update saving for user 838347504 category спонтанные траты: database is locked
[2025-11-26 10:31:01,656] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:31:01,737] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:31:01,737] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:31:01,738] [INFO] [aiogram.event] Update id=131879214 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 10:32:53,521] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:32:53,522] [INFO] [aiogram.event] Update id=131879215 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 10:32:55,567] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:32:55,567] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:32:55,643] [INFO] [aiogram.event] Update id=131879216 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:32:57,416] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:32:57,416] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:32:57,501] [INFO] [aiogram.event] Update id=131879217 is not handled. Duration 85 ms by bot id=8440100118
[2025-11-26 10:32:57,501] [ERROR] [aiogram.event] Cause exception while process update id=131879217 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:00,634] [INFO] [aiogram.event] Update id=131879218 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:33:04,864] [INFO] [aiogram.event] Update id=131879219 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:33:08,794] [INFO] [aiogram.event] Update id=131879220 is handled. Duration 98 ms by bot id=8440100118
[2025-11-26 10:33:17,991] [INFO] [aiogram.event] Update id=131879221 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 10:33:19,812] [ERROR] [database.crud] Failed to add wish for user 838347504: database is locked
[2025-11-26 10:33:19,888] [INFO] [handlers.callbacks] User 838347504 added wish 0
[2025-11-26 10:33:19,888] [INFO] [aiogram.event] Update id=131879222 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 10:33:25,874] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 10:33:25,947] [INFO] [aiogram.event] Update id=131879223 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:33:31,505] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:33:31,505] [INFO] [aiogram.event] Update id=131879224 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 10:33:32,612] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:32,612] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:32,681] [INFO] [aiogram.event] Update id=131879225 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:33:34,213] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:34,213] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:34,282] [INFO] [aiogram.event] Update id=131879226 is not handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:33:34,283] [ERROR] [aiogram.event] Cause exception while process update id=131879226 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:35,158] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:35,158] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:35,219] [INFO] [aiogram.event] Update id=131879227 is not handled. Duration 61 ms by bot id=8440100118
[2025-11-26 10:33:35,219] [ERROR] [aiogram.event] Cause exception while process update id=131879227 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:35,678] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:35,679] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:35,798] [INFO] [aiogram.event] Update id=131879228 is not handled. Duration 120 ms by bot id=8440100118
[2025-11-26 10:33:35,798] [ERROR] [aiogram.event] Cause exception while process update id=131879228 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:33:36,156] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:33:36,156] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:33:36,214] [INFO] [aiogram.event] Update id=131879229 is not handled. Duration 58 ms by bot id=8440100118
[2025-11-26 10:33:36,214] [ERROR] [aiogram.event] Cause exception while process update id=131879229 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 73, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:35:41,876] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:35:41,877] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:35:41,877] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:35:42,129] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:35:42,129] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:35:46,359] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:35:46,359] [INFO] [__main__] Starting bot polling
[2025-11-26 10:35:46,359] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:35:46,523] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:35:50,140] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:35:50,141] [INFO] [aiogram.event] Update id=131879230 is handled. Duration 172 ms by bot id=8440100118
[2025-11-26 10:35:53,939] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:35:53,939] [INFO] [aiogram.event] Update id=131879231 is handled. Duration 157 ms by bot id=8440100118
[2025-11-26 10:35:55,638] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:35:55,639] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:35:55,706] [INFO] [aiogram.event] Update id=131879232 is handled. Duration 68 ms by bot id=8440100118
[2025-11-26 10:35:59,722] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:35:59,722] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:35:59,953] [INFO] [aiogram.event] Update id=131879233 is not handled. Duration 232 ms by bot id=8440100118
[2025-11-26 10:35:59,954] [ERROR] [aiogram.event] Cause exception while process update id=131879233 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 37, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 94, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 10:36:02,054] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:02,054] [INFO] [aiogram.event] Update id=131879234 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:36:03,255] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:03,255] [INFO] [aiogram.event] Update id=131879235 is handled. Duration 154 ms by bot id=8440100118
[2025-11-26 10:36:04,453] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:36:04,453] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:36:04,518] [INFO] [aiogram.event] Update id=131879236 is handled. Duration 65 ms by bot id=8440100118
[2025-11-26 10:36:06,096] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:06,096] [INFO] [aiogram.event] Update id=131879237 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:36:08,396] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:08,396] [INFO] [aiogram.event] Update id=131879238 is handled. Duration 403 ms by bot id=8440100118
[2025-11-26 10:36:09,567] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:36:09,568] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:36:09,638] [INFO] [aiogram.event] Update id=131879239 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:36:14,351] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:14,351] [INFO] [aiogram.event] Update id=131879240 is handled. Duration 68 ms by bot id=8440100118
[2025-11-26 10:36:18,113] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:18,113] [INFO] [aiogram.event] Update id=131879241 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 10:36:19,813] [INFO] [aiogram.event] Update id=131879242 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 10:36:26,016] [INFO] [aiogram.event] Update id=131879243 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:36:29,133] [INFO] [aiogram.event] Update id=131879244 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:36:30,629] [INFO] [aiogram.event] Update id=131879245 is handled. Duration 128 ms by bot id=8440100118
[2025-11-26 10:36:42,794] [INFO] [database.crud] Added wish 5 for user 838347504
[2025-11-26 10:36:42,924] [INFO] [handlers.callbacks] User 838347504 added wish 5
[2025-11-26 10:36:42,924] [INFO] [aiogram.event] Update id=131879246 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 10:36:47,655] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:36:47,656] [INFO] [aiogram.event] Update id=131879247 is handled. Duration 244 ms by bot id=8440100118
[2025-11-26 10:36:49,187] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:36:49,187] [INFO] [aiogram.event] Update id=131879248 is handled. Duration 153 ms by bot id=8440100118
[2025-11-26 10:36:50,438] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:36:50,438] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:36:50,521] [INFO] [aiogram.event] Update id=131879249 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 10:37:11,552] [INFO] [database.crud] Fetched wish 5
[2025-11-26 10:37:11,553] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:37:11,580] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -5567.0
[2025-11-26 10:37:11,584] [INFO] [database.crud] Marked wish 5 as purchased
[2025-11-26 10:37:11,589] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:37:11,662] [INFO] [handlers.callbacks] User 838347504 purchased wish 5 (wishlist_category=кайфы, savings_category=спонтанные траты, price=5567.00, savings_before=102002.00)
[2025-11-26 10:37:11,662] [INFO] [aiogram.event] Update id=131879250 is handled. Duration 111 ms by bot id=8440100118
[2025-11-26 10:37:20,196] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:37:20,196] [INFO] [aiogram.event] Update id=131879251 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:37:23,726] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:37:23,726] [INFO] [aiogram.event] Update id=131879252 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:37:26,899] [INFO] [aiogram.event] Update id=131879253 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:37:28,008] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:37:28,154] [INFO] [aiogram.event] Update id=131879254 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 10:37:29,033] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:37:29,178] [INFO] [aiogram.event] Update id=131879255 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 10:37:30,037] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:37:30,216] [INFO] [aiogram.event] Update id=131879256 is handled. Duration 199 ms by bot id=8440100118
[2025-11-26 10:37:31,003] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:37:31,164] [INFO] [aiogram.event] Update id=131879257 is handled. Duration 178 ms by bot id=8440100118
[2025-11-26 10:37:32,044] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:37:32,235] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:37:32,390] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:37:32,390] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:37:32,390] [INFO] [aiogram.event] Update id=131879258 is handled. Duration 366 ms by bot id=8440100118
[2025-11-26 10:37:51,615] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:37:51,616] [INFO] [aiogram.event] Update id=131879259 is handled. Duration 173 ms by bot id=8440100118
[2025-11-26 10:37:53,333] [INFO] [aiogram.event] Update id=131879260 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 10:37:59,932] [INFO] [aiogram.event] Update id=131879261 is handled. Duration 196 ms by bot id=8440100118
[2025-11-26 10:38:04,612] [INFO] [aiogram.event] Update id=131879262 is handled. Duration 80 ms by bot id=8440100118
[2025-11-26 10:38:06,210] [INFO] [aiogram.event] Update id=131879263 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 10:38:07,688] [INFO] [database.crud] Added wish 6 for user 838347504
[2025-11-26 10:38:07,754] [INFO] [handlers.callbacks] User 838347504 added wish 6
[2025-11-26 10:38:07,754] [INFO] [aiogram.event] Update id=131879264 is handled. Duration 89 ms by bot id=8440100118
[2025-11-26 10:38:12,619] [INFO] [aiogram.event] Update id=131879265 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 10:38:18,337] [INFO] [aiogram.event] Update id=131879266 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:38:23,357] [INFO] [aiogram.event] Update id=131879267 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:38:24,715] [INFO] [aiogram.event] Update id=131879268 is handled. Duration 120 ms by bot id=8440100118
[2025-11-26 10:38:25,557] [INFO] [database.crud] Added wish 7 for user 838347504
[2025-11-26 10:38:25,623] [INFO] [handlers.callbacks] User 838347504 added wish 7
[2025-11-26 10:38:25,623] [INFO] [aiogram.event] Update id=131879269 is handled. Duration 105 ms by bot id=8440100118
[2025-11-26 10:38:30,005] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:38:30,005] [INFO] [aiogram.event] Update id=131879270 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 10:38:47,562] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:38:47,562] [INFO] [aiogram.event] Update id=131879271 is handled. Duration 107 ms by bot id=8440100118
[2025-11-26 10:38:51,324] [INFO] [aiogram.event] Update id=131879272 is handled. Duration 118 ms by bot id=8440100118
[2025-11-26 10:38:52,451] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:38:52,648] [INFO] [aiogram.event] Update id=131879273 is handled. Duration 213 ms by bot id=8440100118
[2025-11-26 10:38:53,430] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:38:53,598] [INFO] [aiogram.event] Update id=131879274 is handled. Duration 191 ms by bot id=8440100118
[2025-11-26 10:38:54,451] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:38:54,671] [INFO] [aiogram.event] Update id=131879275 is handled. Duration 258 ms by bot id=8440100118
[2025-11-26 10:38:55,453] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:38:55,607] [INFO] [aiogram.event] Update id=131879276 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 10:38:56,556] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:38:56,633] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:38:56,709] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:38:56,709] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:38:56,795] [INFO] [aiogram.event] Update id=131879277 is handled. Duration 258 ms by bot id=8440100118
[2025-11-26 10:40:23,479] [INFO] [database.crud] Fetched wish 7
[2025-11-26 10:40:23,479] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:40:23,494] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -18000.0
[2025-11-26 10:40:23,499] [INFO] [database.crud] Marked wish 7 as purchased
[2025-11-26 10:40:23,504] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:40:23,574] [INFO] [handlers.callbacks] User 838347504 purchased wish 7 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=18000.00, savings_before=180008.00)
[2025-11-26 10:40:23,574] [INFO] [aiogram.event] Update id=131879278 is handled. Duration 96 ms by bot id=8440100118
[2025-11-26 10:40:27,337] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:40:27,338] [INFO] [aiogram.event] Update id=131879279 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 10:40:31,455] [INFO] [aiogram.event] Update id=131879280 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 10:40:32,826] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:40:32,977] [INFO] [aiogram.event] Update id=131879281 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 10:40:33,862] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:40:34,026] [INFO] [aiogram.event] Update id=131879282 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 10:40:34,828] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:40:34,996] [INFO] [aiogram.event] Update id=131879283 is handled. Duration 185 ms by bot id=8440100118
[2025-11-26 10:40:35,872] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:40:36,021] [INFO] [aiogram.event] Update id=131879284 is handled. Duration 185 ms by bot id=8440100118
[2025-11-26 10:40:37,376] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:40:37,446] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:40:37,520] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:40:37,520] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:40:37,592] [INFO] [aiogram.event] Update id=131879285 is handled. Duration 234 ms by bot id=8440100118
[2025-11-26 10:42:48,166] [INFO] [database.crud] Fetched wish 6
[2025-11-26 10:42:48,167] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:42:48,182] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -10000.0
[2025-11-26 10:42:48,187] [INFO] [database.crud] Marked wish 6 as purchased
[2025-11-26 10:42:48,191] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:42:48,387] [INFO] [handlers.callbacks] User 838347504 purchased wish 6 (wishlist_category=вклад в себя, savings_category=сбережения, price=10000.00, savings_before=203244.00)
[2025-11-26 10:42:48,387] [INFO] [aiogram.event] Update id=131879286 is handled. Duration 222 ms by bot id=8440100118
[2025-11-26 10:42:52,000] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:42:52,000] [INFO] [aiogram.event] Update id=131879287 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 10:42:57,027] [INFO] [aiogram.event] Update id=131879288 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 10:42:58,112] [INFO] [database.crud] Updated saving for user 838347504 category долги by 3.0
[2025-11-26 10:42:58,288] [INFO] [aiogram.event] Update id=131879289 is handled. Duration 193 ms by bot id=8440100118
[2025-11-26 10:42:59,148] [INFO] [database.crud] Updated saving for user 838347504 category быт by 2.0
[2025-11-26 10:42:59,294] [INFO] [aiogram.event] Update id=131879290 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 10:43:00,028] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 2.0
[2025-11-26 10:43:00,212] [INFO] [aiogram.event] Update id=131879291 is handled. Duration 189 ms by bot id=8440100118
[2025-11-26 10:43:00,980] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 2.0
[2025-11-26 10:43:01,167] [INFO] [aiogram.event] Update id=131879292 is handled. Duration 202 ms by bot id=8440100118
[2025-11-26 10:43:02,078] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 1.0
[2025-11-26 10:43:02,166] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:43:02,241] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:43:02,241] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:43:02,242] [INFO] [aiogram.event] Update id=131879293 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 10:47:44,855] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 10:47:44,856] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 10:47:44,856] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 10:47:45,117] [INFO] [__main__] Bot shutdown complete
[2025-11-26 10:47:45,118] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:47:59,023] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 10:47:59,023] [INFO] [__main__] Starting bot polling
[2025-11-26 10:47:59,023] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 10:47:59,192] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 10:49:53,752] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 10:49:53,752] [INFO] [aiogram.event] Update id=131879294 is handled. Duration 189 ms by bot id=8440100118
[2025-11-26 10:49:55,512] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:49:55,512] [INFO] [aiogram.event] Update id=131879295 is handled. Duration 188 ms by bot id=8440100118
[2025-11-26 10:49:58,241] [INFO] [aiogram.event] Update id=131879296 is handled. Duration 115 ms by bot id=8440100118
[2025-11-26 10:50:04,144] [INFO] [aiogram.event] Update id=131879297 is handled. Duration 158 ms by bot id=8440100118
[2025-11-26 10:50:08,525] [INFO] [aiogram.event] Update id=131879298 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 10:50:09,716] [INFO] [aiogram.event] Update id=131879299 is handled. Duration 131 ms by bot id=8440100118
[2025-11-26 10:50:10,758] [INFO] [database.crud] Added wish 1 for user 838347504
[2025-11-26 10:50:10,827] [INFO] [handlers.callbacks] User 838347504 added wish 1
[2025-11-26 10:50:10,828] [INFO] [aiogram.event] Update id=131879300 is handled. Duration 86 ms by bot id=8440100118
[2025-11-26 10:50:14,454] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:50:14,455] [INFO] [aiogram.event] Update id=131879301 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 10:50:16,338] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:50:16,338] [INFO] [aiogram.event] Update id=131879302 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 10:50:21,897] [INFO] [aiogram.event] Update id=131879303 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:50:23,209] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 10:50:23,445] [INFO] [aiogram.event] Update id=131879304 is handled. Duration 252 ms by bot id=8440100118
[2025-11-26 10:50:24,499] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 10:50:24,651] [INFO] [aiogram.event] Update id=131879305 is handled. Duration 174 ms by bot id=8440100118
[2025-11-26 10:50:25,649] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 10:50:25,788] [INFO] [aiogram.event] Update id=131879306 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 10:50:26,760] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 10:50:26,926] [INFO] [aiogram.event] Update id=131879307 is handled. Duration 182 ms by bot id=8440100118
[2025-11-26 10:50:28,394] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 10:50:28,524] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:50:28,738] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:50:28,738] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:50:28,738] [INFO] [aiogram.event] Update id=131879308 is handled. Duration 381 ms by bot id=8440100118
[2025-11-26 10:50:38,782] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 10:50:38,782] [INFO] [aiogram.event] Update id=131879309 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 10:50:42,141] [INFO] [aiogram.event] Update id=131879310 is handled. Duration 95 ms by bot id=8440100118
[2025-11-26 10:50:43,133] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 10:50:43,284] [INFO] [aiogram.event] Update id=131879311 is handled. Duration 166 ms by bot id=8440100118
[2025-11-26 10:50:44,129] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 10:50:44,390] [INFO] [aiogram.event] Update id=131879312 is handled. Duration 267 ms by bot id=8440100118
[2025-11-26 10:50:45,598] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 10:50:45,738] [INFO] [aiogram.event] Update id=131879313 is handled. Duration 156 ms by bot id=8440100118
[2025-11-26 10:50:48,136] [INFO] [aiogram.event] Update id=131879314 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 10:50:50,872] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 10:50:51,022] [INFO] [aiogram.event] Update id=131879315 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 10:50:52,170] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 10:50:52,276] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 10:50:52,362] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:50:52,362] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:50:52,441] [INFO] [aiogram.event] Update id=131879316 is handled. Duration 298 ms by bot id=8440100118
[2025-11-26 10:50:57,134] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 10:50:57,134] [INFO] [aiogram.event] Update id=131879317 is handled. Duration 141 ms by bot id=8440100118
[2025-11-26 10:50:58,101] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 10:50:58,102] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:50:58,222] [INFO] [aiogram.event] Update id=131879318 is handled. Duration 121 ms by bot id=8440100118
[2025-11-26 10:51:00,853] [INFO] [database.crud] Fetched wish 1
[2025-11-26 10:51:00,853] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 10:51:00,870] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -20.0
[2025-11-26 10:51:00,875] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-26 10:51:00,880] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 10:51:00,944] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=кайфы, savings_category=спонтанные траты, price=20.00, savings_before=20.00)
[2025-11-26 10:51:00,944] [INFO] [aiogram.event] Update id=131879319 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 10:51:04,949] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 10:51:04,949] [INFO] [aiogram.event] Update id=131879320 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 11:56:55,231] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 11:56:55,236] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 11:56:55,237] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 11:56:55,500] [INFO] [__main__] Bot shutdown complete
[2025-11-26 11:56:55,502] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 11:57:06,511] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 11:57:06,512] [INFO] [__main__] Starting bot polling
[2025-11-26 11:57:06,512] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 11:57:06,699] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 11:57:13,094] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 11:57:13,094] [INFO] [aiogram.event] Update id=131879321 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 11:57:15,295] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 11:57:15,296] [INFO] [aiogram.event] Update id=131879322 is handled. Duration 148 ms by bot id=8440100118
[2025-11-26 11:57:17,255] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 11:57:17,256] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 11:57:17,331] [INFO] [aiogram.event] Update id=131879323 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 11:57:18,915] [INFO] [aiogram.event] Update id=131879324 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 11:57:25,660] [INFO] [aiogram.event] Update id=131879325 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 11:57:34,873] [INFO] [aiogram.event] Update id=131879326 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 11:57:36,751] [INFO] [aiogram.event] Update id=131879327 is handled. Duration 298 ms by bot id=8440100118
[2025-11-26 11:57:38,186] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-26 11:57:38,265] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-26 11:57:38,265] [INFO] [aiogram.event] Update id=131879328 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 11:57:52,592] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 11:57:52,593] [INFO] [aiogram.event] Update id=131879329 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 11:57:55,185] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 11:57:55,185] [INFO] [aiogram.event] Update id=131879330 is handled. Duration 147 ms by bot id=8440100118
[2025-11-26 11:58:07,088] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 11:58:07,088] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 11:58:07,158] [INFO] [aiogram.event] Update id=131879331 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 12:00:55,536] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 12:00:55,536] [INFO] [aiogram.event] Update id=131879332 is handled. Duration 79 ms by bot id=8440100118
[2025-11-26 12:00:56,794] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 12:00:56,795] [INFO] [aiogram.event] Update id=131879333 is handled. Duration 141 ms by bot id=8440100118
[2025-11-26 12:01:01,603] [INFO] [aiogram.event] Update id=131879334 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 12:01:02,994] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 12:01:03,174] [INFO] [aiogram.event] Update id=131879335 is handled. Duration 199 ms by bot id=8440100118
[2025-11-26 12:01:04,108] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 12:01:04,321] [INFO] [aiogram.event] Update id=131879336 is handled. Duration 247 ms by bot id=8440100118
[2025-11-26 12:01:05,267] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 12:01:05,448] [INFO] [aiogram.event] Update id=131879337 is handled. Duration 201 ms by bot id=8440100118
[2025-11-26 12:01:06,668] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 12:01:06,830] [INFO] [aiogram.event] Update id=131879338 is handled. Duration 182 ms by bot id=8440100118
[2025-11-26 12:01:08,437] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 12:01:08,599] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 12:01:08,717] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 12:01:08,718] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 12:01:08,814] [INFO] [aiogram.event] Update id=131879339 is handled. Duration 396 ms by bot id=8440100118
[2025-11-26 12:01:12,064] [INFO] [database.crud] Fetched wish 2
[2025-11-26 12:01:12,064] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 12:01:12,086] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -60.0
[2025-11-26 12:01:12,092] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 12:01:12,098] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 12:01:12,184] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 12:01:12,264] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=вклад в себя, savings_category=сбережения, price=60.00, savings_before=60.00)
[2025-11-26 12:01:12,264] [INFO] [aiogram.event] Update id=131879340 is handled. Duration 202 ms by bot id=8440100118
[2025-11-26 12:27:01,838] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 12:27:01,840] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 12:27:01,840] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 12:27:02,094] [INFO] [__main__] Bot shutdown complete
[2025-11-26 12:27:02,094] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 14:45:03,404] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 14:45:03,404] [INFO] [__main__] Starting bot polling
[2025-11-26 14:45:03,405] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 14:45:03,567] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 14:45:39,565] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 14:45:39,565] [INFO] [aiogram.event] Update id=131879341 is handled. Duration 255 ms by bot id=8440100118
[2025-11-26 14:45:41,572] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 14:45:41,572] [INFO] [aiogram.event] Update id=131879342 is handled. Duration 151 ms by bot id=8440100118
[2025-11-26 14:45:43,722] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:45:43,722] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:45:43,791] [INFO] [aiogram.event] Update id=131879343 is handled. Duration 69 ms by bot id=8440100118
[2025-11-26 14:45:45,566] [INFO] [aiogram.event] Update id=131879344 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 14:45:53,226] [INFO] [aiogram.event] Update id=131879345 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 14:45:58,357] [INFO] [aiogram.event] Update id=131879346 is handled. Duration 104 ms by bot id=8440100118
[2025-11-26 14:45:59,897] [INFO] [aiogram.event] Update id=131879347 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 14:46:01,309] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 14:46:01,396] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 14:46:01,396] [INFO] [aiogram.event] Update id=131879348 is handled. Duration 112 ms by bot id=8440100118
[2025-11-26 14:46:07,414] [INFO] [aiogram.event] Update id=131879349 is handled. Duration 105 ms by bot id=8440100118
[2025-11-26 14:46:15,318] [INFO] [aiogram.event] Update id=131879350 is handled. Duration 67 ms by bot id=8440100118
[2025-11-26 14:46:20,607] [INFO] [aiogram.event] Update id=131879351 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 14:46:21,928] [INFO] [aiogram.event] Update id=131879352 is handled. Duration 137 ms by bot id=8440100118
[2025-11-26 14:46:22,970] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 14:46:23,116] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 14:46:23,117] [INFO] [aiogram.event] Update id=131879353 is handled. Duration 162 ms by bot id=8440100118
[2025-11-26 14:46:25,866] [INFO] [aiogram.event] Update id=131879354 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 14:46:37,246] [INFO] [aiogram.event] Update id=131879355 is handled. Duration 97 ms by bot id=8440100118
[2025-11-26 14:46:39,612] [INFO] [aiogram.event] Update id=131879356 is handled. Duration 107 ms by bot id=8440100118
[2025-11-26 14:46:41,054] [INFO] [aiogram.event] Update id=131879357 is handled. Duration 254 ms by bot id=8440100118
[2025-11-26 14:46:41,840] [INFO] [database.crud] Added wish 5 for user 838347504
[2025-11-26 14:46:41,909] [INFO] [handlers.callbacks] User 838347504 added wish 5
[2025-11-26 14:46:41,909] [INFO] [aiogram.event] Update id=131879358 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 14:46:45,239] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 14:46:45,239] [INFO] [aiogram.event] Update id=131879359 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 14:46:47,459] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 14:46:47,460] [INFO] [aiogram.event] Update id=131879360 is handled. Duration 153 ms by bot id=8440100118
[2025-11-26 14:46:48,812] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:46:48,812] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:46:48,885] [INFO] [aiogram.event] Update id=131879361 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 14:46:52,362] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:46:52,362] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:46:52,440] [INFO] [aiogram.event] Update id=131879362 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 14:46:53,900] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:46:53,901] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:46:54,024] [INFO] [aiogram.event] Update id=131879363 is handled. Duration 124 ms by bot id=8440100118
[2025-11-26 14:47:13,642] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 14:47:13,642] [INFO] [aiogram.event] Update id=131879364 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 14:47:15,926] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 14:47:15,926] [INFO] [aiogram.event] Update id=131879365 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 14:47:19,639] [INFO] [aiogram.event] Update id=131879366 is handled. Duration 122 ms by bot id=8440100118
[2025-11-26 14:47:20,565] [INFO] [database.crud] Updated saving for user 838347504 category долги by 60.0
[2025-11-26 14:47:20,732] [INFO] [aiogram.event] Update id=131879367 is handled. Duration 201 ms by bot id=8440100118
[2025-11-26 14:47:22,314] [INFO] [database.crud] Updated saving for user 838347504 category быт by 40.0
[2025-11-26 14:47:22,573] [INFO] [aiogram.event] Update id=131879368 is handled. Duration 264 ms by bot id=8440100118
[2025-11-26 14:47:23,543] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 40.0
[2025-11-26 14:47:23,852] [INFO] [aiogram.event] Update id=131879369 is handled. Duration 341 ms by bot id=8440100118
[2025-11-26 14:47:25,204] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 40.0
[2025-11-26 14:47:25,349] [INFO] [aiogram.event] Update id=131879370 is handled. Duration 159 ms by bot id=8440100118
[2025-11-26 14:47:27,010] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 20.0
[2025-11-26 14:47:27,142] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 14:47:27,243] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:47:27,244] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:47:27,368] [INFO] [aiogram.event] Update id=131879371 is handled. Duration 379 ms by bot id=8440100118
[2025-11-26 14:47:41,036] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 14:47:41,036] [INFO] [aiogram.event] Update id=131879372 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 14:47:44,880] [INFO] [aiogram.event] Update id=131879373 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 14:47:46,214] [INFO] [database.crud] Updated saving for user 838347504 category долги by 60.0
[2025-11-26 14:47:46,371] [INFO] [aiogram.event] Update id=131879374 is handled. Duration 179 ms by bot id=8440100118
[2025-11-26 14:47:47,618] [INFO] [database.crud] Updated saving for user 838347504 category быт by 40.0
[2025-11-26 14:47:47,763] [INFO] [aiogram.event] Update id=131879375 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 14:47:49,105] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 40.0
[2025-11-26 14:47:49,273] [INFO] [aiogram.event] Update id=131879376 is handled. Duration 193 ms by bot id=8440100118
[2025-11-26 14:47:50,237] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 40.0
[2025-11-26 14:47:50,379] [INFO] [aiogram.event] Update id=131879377 is handled. Duration 160 ms by bot id=8440100118
[2025-11-26 14:47:51,456] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 20.0
[2025-11-26 14:47:51,532] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 14:47:51,603] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:47:51,604] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 14:47:51,678] [INFO] [aiogram.event] Update id=131879378 is handled. Duration 238 ms by bot id=8440100118
[2025-11-26 14:48:02,251] [INFO] [database.crud] Fetched wish 5
[2025-11-26 14:48:02,251] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 14:48:02,282] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -50.0
[2025-11-26 14:48:02,286] [INFO] [database.crud] Marked wish 5 as purchased
[2025-11-26 14:48:02,291] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 14:48:02,359] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 14:48:02,438] [INFO] [handlers.callbacks] User 838347504 purchased wish 5 (wishlist_category=кайфы, savings_category=спонтанные траты, price=50.00, savings_before=50.00)
[2025-11-26 14:48:02,438] [INFO] [aiogram.event] Update id=131879379 is handled. Duration 188 ms by bot id=8440100118
[2025-11-26 14:49:18,467] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 14:49:18,467] [INFO] [aiogram.event] Update id=131879380 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 14:49:31,310] [INFO] [aiogram.event] Update id=131879381 is handled. Duration 156 ms by bot id=8440100118
[2025-11-26 14:49:32,444] [INFO] [database.crud] Updated saving for user 838347504 category долги by 90.0
[2025-11-26 14:49:32,685] [INFO] [aiogram.event] Update id=131879382 is handled. Duration 270 ms by bot id=8440100118
[2025-11-26 14:49:33,952] [INFO] [database.crud] Updated saving for user 838347504 category быт by 60.0
[2025-11-26 14:49:34,245] [INFO] [aiogram.event] Update id=131879383 is handled. Duration 310 ms by bot id=8440100118
[2025-11-26 14:49:41,473] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 60.0
[2025-11-26 14:49:41,679] [INFO] [aiogram.event] Update id=131879384 is handled. Duration 223 ms by bot id=8440100118
[2025-11-26 14:49:42,936] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 60.0
[2025-11-26 14:49:43,168] [INFO] [aiogram.event] Update id=131879385 is handled. Duration 248 ms by bot id=8440100118
[2025-11-26 15:25:04,119] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 30.0
[2025-11-26 15:25:04,295] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 15:25:04,376] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 15:25:04,377] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 15:25:04,457] [INFO] [aiogram.event] Update id=131879386 is handled. Duration 355 ms by bot id=8440100118
[2025-11-26 15:25:08,848] [INFO] [database.crud] Fetched wish 3
[2025-11-26 15:25:08,848] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 15:25:08,879] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -50.0
[2025-11-26 15:25:08,886] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 15:25:08,891] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 15:25:08,964] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 15:25:09,079] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=50.00, savings_before=200.00)
[2025-11-26 15:25:09,080] [INFO] [aiogram.event] Update id=131879387 is handled. Duration 232 ms by bot id=8440100118
[2025-11-26 17:00:25,092] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 17:00:25,095] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 17:00:25,095] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 17:00:25,352] [INFO] [__main__] Bot shutdown complete
[2025-11-26 17:00:25,353] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:00:30,095] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 17:00:30,096] [INFO] [__main__] Starting bot polling
[2025-11-26 17:00:30,096] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 17:00:30,274] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:00:37,172] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 17:00:37,172] [INFO] [aiogram.event] Update id=131879388 is handled. Duration 230 ms by bot id=8440100118
[2025-11-26 17:00:40,236] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 17:00:40,237] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 17:00:40,237] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 17:00:40,490] [INFO] [__main__] Bot shutdown complete
[2025-11-26 17:00:40,490] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:00:52,032] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 17:00:52,032] [INFO] [__main__] Starting bot polling
[2025-11-26 17:00:52,033] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 17:00:52,190] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:01:00,285] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 17:01:00,285] [INFO] [aiogram.event] Update id=131879389 is handled. Duration 236 ms by bot id=8440100118
[2025-11-26 17:01:02,769] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:01:02,769] [INFO] [aiogram.event] Update id=131879390 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 17:01:05,068] [INFO] [aiogram.event] Update id=131879391 is handled. Duration 144 ms by bot id=8440100118
[2025-11-26 17:01:09,764] [INFO] [aiogram.event] Update id=131879392 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 17:01:14,603] [INFO] [aiogram.event] Update id=131879393 is handled. Duration 599 ms by bot id=8440100118
[2025-11-26 17:01:17,386] [INFO] [aiogram.event] Update id=131879394 is handled. Duration 1513 ms by bot id=8440100118
[2025-11-26 17:01:18,339] [INFO] [database.crud] Added wish 1 for user 838347504
[2025-11-26 17:01:18,410] [INFO] [handlers.callbacks] User 838347504 added wish 1
[2025-11-26 17:01:18,410] [INFO] [aiogram.event] Update id=131879395 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 17:01:21,061] [INFO] [aiogram.event] Update id=131879396 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 17:01:26,495] [INFO] [aiogram.event] Update id=131879397 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 17:01:32,982] [INFO] [aiogram.event] Update id=131879398 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 17:01:34,184] [INFO] [aiogram.event] Update id=131879399 is handled. Duration 129 ms by bot id=8440100118
[2025-11-26 17:01:35,157] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-26 17:01:35,226] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-26 17:01:35,226] [INFO] [aiogram.event] Update id=131879400 is handled. Duration 90 ms by bot id=8440100118
[2025-11-26 17:01:38,279] [INFO] [aiogram.event] Update id=131879401 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 17:01:41,851] [INFO] [aiogram.event] Update id=131879402 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 17:01:54,137] [INFO] [aiogram.event] Update id=131879403 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 17:01:56,985] [INFO] [aiogram.event] Update id=131879404 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 17:01:58,137] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 17:01:58,404] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 17:01:58,404] [INFO] [aiogram.event] Update id=131879405 is handled. Duration 272 ms by bot id=8440100118
[2025-11-26 17:02:01,717] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:01,717] [INFO] [aiogram.event] Update id=131879406 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 17:02:03,127] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:02:03,127] [INFO] [aiogram.event] Update id=131879407 is handled. Duration 97 ms by bot id=8440100118
[2025-11-26 17:02:05,568] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:05,568] [INFO] [aiogram.event] Update id=131879408 is handled. Duration 89 ms by bot id=8440100118
[2025-11-26 17:02:06,648] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:02:06,648] [INFO] [aiogram.event] Update id=131879409 is handled. Duration 150 ms by bot id=8440100118
[2025-11-26 17:02:07,394] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:07,395] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:07,468] [INFO] [aiogram.event] Update id=131879410 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 17:02:09,928] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:09,929] [INFO] [aiogram.event] Update id=131879411 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 17:02:11,368] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:02:11,368] [INFO] [aiogram.event] Update id=131879412 is handled. Duration 330 ms by bot id=8440100118
[2025-11-26 17:02:12,562] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:12,562] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:12,691] [INFO] [aiogram.event] Update id=131879413 is handled. Duration 129 ms by bot id=8440100118
[2025-11-26 17:02:14,024] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:14,024] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:14,116] [INFO] [aiogram.event] Update id=131879414 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 17:02:16,020] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:02:16,020] [INFO] [aiogram.event] Update id=131879415 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 17:02:16,962] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:02:16,962] [INFO] [aiogram.event] Update id=131879416 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 17:02:21,200] [INFO] [aiogram.event] Update id=131879417 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 17:02:24,319] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:02:24,466] [INFO] [aiogram.event] Update id=131879418 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 17:02:25,827] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:02:25,983] [INFO] [aiogram.event] Update id=131879419 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 17:02:27,166] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:02:27,314] [INFO] [aiogram.event] Update id=131879420 is handled. Duration 164 ms by bot id=8440100118
[2025-11-26 17:02:28,730] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:02:28,874] [INFO] [aiogram.event] Update id=131879421 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 17:02:30,172] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:02:30,246] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:02:30,328] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:30,328] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:02:30,419] [INFO] [aiogram.event] Update id=131879422 is handled. Duration 253 ms by bot id=8440100118
[2025-11-26 17:02:34,625] [INFO] [database.crud] Fetched wish 1
[2025-11-26 17:02:34,625] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:02:34,641] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -20.0
[2025-11-26 17:02:34,646] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-26 17:02:34,650] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 17:02:34,756] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:02:34,848] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 17:02:34,848] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 17:02:34,848] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=20.00, savings_before=20.00)
[2025-11-26 17:02:34,848] [INFO] [aiogram.event] Update id=131879423 is handled. Duration 224 ms by bot id=8440100118
[2025-11-26 17:02:58,490] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:02:58,490] [INFO] [aiogram.event] Update id=131879424 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 17:03:03,945] [INFO] [aiogram.event] Update id=131879425 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 17:03:05,216] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:03:05,357] [INFO] [aiogram.event] Update id=131879426 is handled. Duration 147 ms by bot id=8440100118
[2025-11-26 17:03:06,274] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:03:06,432] [INFO] [aiogram.event] Update id=131879427 is handled. Duration 179 ms by bot id=8440100118
[2025-11-26 17:03:07,334] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:03:07,504] [INFO] [aiogram.event] Update id=131879428 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 17:03:08,727] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:03:08,971] [INFO] [aiogram.event] Update id=131879429 is handled. Duration 272 ms by bot id=8440100118
[2025-11-26 17:03:10,174] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:03:10,317] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:03:10,413] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:03:10,414] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:03:10,503] [INFO] [aiogram.event] Update id=131879430 is handled. Duration 345 ms by bot id=8440100118
[2025-11-26 17:03:13,985] [INFO] [database.crud] Fetched wish 2
[2025-11-26 17:03:13,985] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:03:13,989] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -20.0
[2025-11-26 17:03:13,994] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 17:03:13,997] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 17:03:14,068] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:03:14,166] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 17:03:14,166] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 17:03:14,166] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=вклад в себя, savings_category=сбережения, price=20.00, savings_before=40.00)
[2025-11-26 17:03:14,166] [INFO] [aiogram.event] Update id=131879431 is handled. Duration 182 ms by bot id=8440100118
[2025-11-26 17:14:55,611] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 17:14:55,613] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 17:14:55,613] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 17:14:55,865] [INFO] [__main__] Bot shutdown complete
[2025-11-26 17:14:55,865] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:14:59,960] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 17:14:59,961] [INFO] [__main__] Starting bot polling
[2025-11-26 17:14:59,961] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 17:15:00,128] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 17:20:54,598] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 17:20:54,598] [INFO] [aiogram.event] Update id=131879432 is handled. Duration 521 ms by bot id=8440100118
[2025-11-26 17:20:55,771] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:20:55,772] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:20:55,870] [INFO] [aiogram.event] Update id=131879433 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 17:21:09,612] [INFO] [aiogram.event] Update id=131879434 is handled. Duration 72 ms by bot id=8440100118
[2025-11-26 17:21:13,904] [INFO] [aiogram.event] Update id=131879435 is handled. Duration 144 ms by bot id=8440100118
[2025-11-26 17:21:19,561] [INFO] [aiogram.event] Update id=131879436 is handled. Duration 1103 ms by bot id=8440100118
[2025-11-26 17:21:22,756] [INFO] [aiogram.event] Update id=131879437 is handled. Duration 2060 ms by bot id=8440100118
[2025-11-26 17:21:23,808] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 17:21:23,886] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 17:21:23,886] [INFO] [aiogram.event] Update id=131879438 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 17:21:26,941] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 17:21:26,941] [INFO] [aiogram.event] Update id=131879439 is handled. Duration 77 ms by bot id=8440100118
[2025-11-26 17:21:27,830] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:21:27,830] [INFO] [aiogram.event] Update id=131879440 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 17:21:30,873] [INFO] [aiogram.event] Update id=131879441 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 17:21:31,978] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:21:32,124] [INFO] [aiogram.event] Update id=131879442 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 17:21:33,085] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:21:33,248] [INFO] [aiogram.event] Update id=131879443 is handled. Duration 180 ms by bot id=8440100118
[2025-11-26 17:21:34,013] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:21:34,171] [INFO] [aiogram.event] Update id=131879444 is handled. Duration 189 ms by bot id=8440100118
[2025-11-26 17:21:35,425] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:21:35,575] [INFO] [aiogram.event] Update id=131879445 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 17:21:37,093] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:21:37,171] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:21:37,255] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:21:37,255] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:21:37,342] [INFO] [aiogram.event] Update id=131879446 is handled. Duration 274 ms by bot id=8440100118
[2025-11-26 17:21:46,173] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 17:21:46,174] [INFO] [aiogram.event] Update id=131879447 is handled. Duration 82 ms by bot id=8440100118
[2025-11-26 17:21:49,146] [INFO] [aiogram.event] Update id=131879448 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 17:21:50,315] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 17:21:50,465] [INFO] [aiogram.event] Update id=131879449 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 17:21:51,591] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 17:21:51,743] [INFO] [aiogram.event] Update id=131879450 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 17:21:52,688] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 17:21:52,835] [INFO] [aiogram.event] Update id=131879451 is handled. Duration 163 ms by bot id=8440100118
[2025-11-26 17:21:53,956] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 17:21:54,099] [INFO] [aiogram.event] Update id=131879452 is handled. Duration 149 ms by bot id=8440100118
[2025-11-26 17:21:55,243] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 17:21:55,317] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:21:55,398] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:21:55,398] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 17:21:55,473] [INFO] [aiogram.event] Update id=131879453 is handled. Duration 236 ms by bot id=8440100118
[2025-11-26 17:22:02,169] [INFO] [database.crud] Fetched wish 3
[2025-11-26 17:22:02,169] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 17:22:02,189] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -10.0
[2025-11-26 17:22:02,194] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 17:22:02,198] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 17:22:02,510] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 17:22:02,798] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 17:22:02,798] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 17:22:03,052] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=кайфы, savings_category=спонтанные траты, price=10.00, savings_before=40.00)
[2025-11-26 17:22:03,052] [INFO] [aiogram.event] Update id=131879454 is handled. Duration 883 ms by bot id=8440100118
[2025-11-26 18:18:33,108] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:18:33,110] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:18:33,110] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:18:33,367] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:18:33,367] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:18:37,895] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:18:37,896] [INFO] [__main__] Starting bot polling
[2025-11-26 18:18:37,896] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:18:38,071] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:19:00,687] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:19:00,688] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:19:00,688] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:19:00,940] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:19:00,941] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:19:22,647] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:19:22,647] [INFO] [__main__] Starting bot polling
[2025-11-26 18:19:22,647] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:19:22,803] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:19:34,623] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 18:19:34,623] [INFO] [aiogram.event] Update id=131879455 is handled. Duration 208 ms by bot id=8440100118
[2025-11-26 18:19:36,347] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:19:36,347] [INFO] [aiogram.event] Update id=131879456 is handled. Duration 157 ms by bot id=8440100118
[2025-11-26 18:19:38,233] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:19:38,233] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:19:38,346] [INFO] [aiogram.event] Update id=131879457 is handled. Duration 114 ms by bot id=8440100118
[2025-11-26 18:19:41,201] [INFO] [aiogram.event] Update id=131879458 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 18:21:48,111] [INFO] [aiogram.event] Update id=131879459 is handled. Duration 79 ms by bot id=8440100118
[2025-11-26 18:21:51,779] [INFO] [aiogram.event] Update id=131879460 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 18:21:55,338] [INFO] [aiogram.event] Update id=131879461 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 18:21:56,889] [INFO] [aiogram.event] Update id=131879462 is handled. Duration 130 ms by bot id=8440100118
[2025-11-26 18:21:58,140] [INFO] [database.crud] Added wish 1 for user 838347504
[2025-11-26 18:21:58,214] [INFO] [handlers.callbacks] User 838347504 added wish 1
[2025-11-26 18:21:58,214] [INFO] [aiogram.event] Update id=131879463 is handled. Duration 88 ms by bot id=8440100118
[2025-11-26 18:22:00,484] [INFO] [aiogram.event] Update id=131879464 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:22:10,329] [INFO] [aiogram.event] Update id=131879465 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 18:22:13,648] [INFO] [aiogram.event] Update id=131879466 is handled. Duration 102 ms by bot id=8440100118
[2025-11-26 18:22:15,271] [INFO] [aiogram.event] Update id=131879467 is handled. Duration 369 ms by bot id=8440100118
[2025-11-26 18:22:16,144] [INFO] [database.crud] Added wish 2 for user 838347504
[2025-11-26 18:22:16,250] [INFO] [handlers.callbacks] User 838347504 added wish 2
[2025-11-26 18:22:16,250] [INFO] [aiogram.event] Update id=131879468 is handled. Duration 110 ms by bot id=8440100118
[2025-11-26 18:22:20,158] [INFO] [aiogram.event] Update id=131879469 is handled. Duration 153 ms by bot id=8440100118
[2025-11-26 18:22:23,534] [INFO] [aiogram.event] Update id=131879470 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 18:22:26,678] [INFO] [aiogram.event] Update id=131879471 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 18:22:27,829] [INFO] [aiogram.event] Update id=131879472 is handled. Duration 121 ms by bot id=8440100118
[2025-11-26 18:22:29,186] [INFO] [database.crud] Added wish 3 for user 838347504
[2025-11-26 18:22:29,260] [INFO] [handlers.callbacks] User 838347504 added wish 3
[2025-11-26 18:22:29,260] [INFO] [aiogram.event] Update id=131879473 is handled. Duration 93 ms by bot id=8440100118
[2025-11-26 18:22:31,886] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:22:31,886] [INFO] [aiogram.event] Update id=131879474 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 18:22:34,366] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:22:34,367] [INFO] [aiogram.event] Update id=131879475 is handled. Duration 85 ms by bot id=8440100118
[2025-11-26 18:22:38,945] [INFO] [aiogram.event] Update id=131879476 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 18:22:40,835] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:22:40,990] [INFO] [aiogram.event] Update id=131879477 is handled. Duration 171 ms by bot id=8440100118
[2025-11-26 18:22:42,174] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:22:42,328] [INFO] [aiogram.event] Update id=131879478 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 18:22:43,424] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:22:43,576] [INFO] [aiogram.event] Update id=131879479 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:22:44,648] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:22:44,840] [INFO] [aiogram.event] Update id=131879480 is handled. Duration 200 ms by bot id=8440100118
[2025-11-26 18:22:45,987] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:22:46,138] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:22:46,305] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:22:46,306] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:22:46,390] [INFO] [aiogram.event] Update id=131879481 is handled. Duration 408 ms by bot id=8440100118
[2025-11-26 18:22:48,865] [INFO] [database.crud] Fetched wish 1
[2025-11-26 18:22:48,865] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:22:48,880] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -20.0
[2025-11-26 18:22:48,884] [INFO] [database.crud] Marked wish 1 as purchased
[2025-11-26 18:22:48,889] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:22:48,958] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:22:49,046] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:22:49,047] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:22:49,166] [INFO] [handlers.callbacks] User 838347504 purchased wish 1 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=20.00, savings_before=20.00)
[2025-11-26 18:22:49,166] [INFO] [aiogram.event] Update id=131879482 is handled. Duration 302 ms by bot id=8440100118
[2025-11-26 18:25:15,707] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:25:15,708] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:25:15,708] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:25:15,968] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:25:15,969] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:25:20,265] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:25:20,265] [INFO] [__main__] Starting bot polling
[2025-11-26 18:25:20,265] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:25:20,431] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:25:27,112] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 18:25:27,112] [INFO] [aiogram.event] Update id=131879483 is handled. Duration 273 ms by bot id=8440100118
[2025-11-26 18:25:30,073] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:25:30,074] [INFO] [aiogram.event] Update id=131879484 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 18:25:33,527] [INFO] [aiogram.event] Update id=131879485 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:25:34,648] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:25:34,832] [INFO] [aiogram.event] Update id=131879486 is handled. Duration 201 ms by bot id=8440100118
[2025-11-26 18:25:35,623] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:25:35,902] [INFO] [aiogram.event] Update id=131879487 is handled. Duration 285 ms by bot id=8440100118
[2025-11-26 18:25:36,668] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:25:36,919] [INFO] [aiogram.event] Update id=131879488 is handled. Duration 273 ms by bot id=8440100118
[2025-11-26 18:25:38,057] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:25:38,208] [INFO] [aiogram.event] Update id=131879489 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:25:39,385] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:25:39,456] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:25:39,552] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:25:39,552] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:25:39,629] [INFO] [aiogram.event] Update id=131879490 is handled. Duration 263 ms by bot id=8440100118
[2025-11-26 18:25:41,401] [INFO] [database.crud] Fetched wish 2
[2025-11-26 18:25:41,402] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:25:41,421] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -20.0
[2025-11-26 18:25:41,426] [INFO] [database.crud] Marked wish 2 as purchased
[2025-11-26 18:25:41,430] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:25:41,512] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:25:41,599] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:25:41,600] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:25:41,694] [INFO] [handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=вклад в себя, savings_category=сбережения, price=20.00, savings_before=40.00)
[2025-11-26 18:25:41,694] [INFO] [aiogram.event] Update id=131879491 is handled. Duration 293 ms by bot id=8440100118
[2025-11-26 18:26:01,073] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:26:01,074] [INFO] [aiogram.event] Update id=131879492 is handled. Duration 176 ms by bot id=8440100118
[2025-11-26 18:26:04,269] [INFO] [aiogram.event] Update id=131879493 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:26:13,600] [INFO] [aiogram.event] Update id=131879494 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 18:26:16,797] [INFO] [aiogram.event] Update id=131879495 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:26:18,447] [INFO] [aiogram.event] Update id=131879496 is handled. Duration 394 ms by bot id=8440100118
[2025-11-26 18:26:19,754] [INFO] [database.crud] Added wish 4 for user 838347504
[2025-11-26 18:26:19,824] [INFO] [handlers.callbacks] User 838347504 added wish 4
[2025-11-26 18:26:19,824] [INFO] [aiogram.event] Update id=131879497 is handled. Duration 90 ms by bot id=8440100118
[2025-11-26 18:26:49,462] [INFO] [aiogram.event] Update id=131879498 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 18:26:58,916] [INFO] [aiogram.event] Update id=131879499 is handled. Duration 98 ms by bot id=8440100118
[2025-11-26 18:27:02,549] [INFO] [aiogram.event] Update id=131879500 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:27:03,989] [INFO] [aiogram.event] Update id=131879501 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 18:27:05,272] [INFO] [database.crud] Added wish 5 for user 838347504
[2025-11-26 18:27:05,345] [INFO] [handlers.callbacks] User 838347504 added wish 5
[2025-11-26 18:27:05,346] [INFO] [aiogram.event] Update id=131879502 is handled. Duration 96 ms by bot id=8440100118
[2025-11-26 18:27:10,517] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:27:10,518] [INFO] [aiogram.event] Update id=131879503 is handled. Duration 75 ms by bot id=8440100118
[2025-11-26 18:27:11,583] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:27:11,583] [INFO] [aiogram.event] Update id=131879504 is handled. Duration 136 ms by bot id=8440100118
[2025-11-26 18:27:14,771] [INFO] [aiogram.event] Update id=131879505 is handled. Duration 127 ms by bot id=8440100118
[2025-11-26 18:27:15,657] [INFO] [database.crud] Updated saving for user 838347504 category долги by 600.0
[2025-11-26 18:27:15,949] [INFO] [aiogram.event] Update id=131879506 is handled. Duration 321 ms by bot id=8440100118
[2025-11-26 18:27:22,947] [INFO] [database.crud] Updated saving for user 838347504 category быт by 400.0
[2025-11-26 18:27:23,184] [INFO] [aiogram.event] Update id=131879507 is handled. Duration 253 ms by bot id=8440100118
[2025-11-26 18:27:24,220] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 400.0
[2025-11-26 18:27:24,378] [INFO] [aiogram.event] Update id=131879508 is handled. Duration 175 ms by bot id=8440100118
[2025-11-26 18:27:25,434] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 400.0
[2025-11-26 18:27:25,613] [INFO] [aiogram.event] Update id=131879509 is handled. Duration 198 ms by bot id=8440100118
[2025-11-26 18:27:26,760] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 200.0
[2025-11-26 18:27:26,881] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:26,977] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:26,978] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:27:27,061] [INFO] [aiogram.event] Update id=131879510 is handled. Duration 307 ms by bot id=8440100118
[2025-11-26 18:27:32,959] [INFO] [database.crud] Fetched wish 3
[2025-11-26 18:27:32,959] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:32,975] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -10.0
[2025-11-26 18:27:32,981] [INFO] [database.crud] Marked wish 3 as purchased
[2025-11-26 18:27:32,986] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:27:33,284] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:33,518] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:27:33,519] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:27:33,721] [INFO] [handlers.callbacks] User 838347504 purchased wish 3 (wishlist_category=кайфы, savings_category=спонтанные траты, price=10.00, savings_before=220.00)
[2025-11-26 18:27:33,721] [INFO] [aiogram.event] Update id=131879511 is handled. Duration 763 ms by bot id=8440100118
[2025-11-26 18:27:38,165] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:27:38,165] [INFO] [aiogram.event] Update id=131879512 is handled. Duration 167 ms by bot id=8440100118
[2025-11-26 18:27:39,396] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:27:39,397] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:39,555] [INFO] [aiogram.event] Update id=131879513 is handled. Duration 158 ms by bot id=8440100118
[2025-11-26 18:27:40,954] [INFO] [database.crud] Fetched wish 4
[2025-11-26 18:27:40,955] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:40,982] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -20.0
[2025-11-26 18:27:40,987] [INFO] [database.crud] Marked wish 4 as purchased
[2025-11-26 18:27:40,991] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:27:41,070] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:41,148] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:27:41,148] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:27:41,207] [INFO] [handlers.callbacks] User 838347504 purchased wish 4 (wishlist_category=вклад в себя, savings_category=сбережения, price=20.00, savings_before=420.00)
[2025-11-26 18:27:41,207] [INFO] [aiogram.event] Update id=131879514 is handled. Duration 253 ms by bot id=8440100118
[2025-11-26 18:27:43,453] [INFO] [database.crud] Fetched wish 5
[2025-11-26 18:27:43,453] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:27:43,473] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by -30.0
[2025-11-26 18:27:43,478] [INFO] [database.crud] Marked wish 5 as purchased
[2025-11-26 18:27:43,482] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:27:43,549] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:27:43,627] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-26 18:27:43,627] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-26 18:27:43,688] [INFO] [handlers.callbacks] User 838347504 purchased wish 5 (wishlist_category=вклад в себя, savings_category=сбережения, price=30.00, savings_before=400.00)
[2025-11-26 18:27:43,688] [INFO] [aiogram.event] Update id=131879515 is handled. Duration 236 ms by bot id=8440100118
[2025-11-26 18:29:31,177] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:29:31,177] [INFO] [aiogram.event] Update id=131879516 is handled. Duration 92 ms by bot id=8440100118
[2025-11-26 18:41:03,286] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:41:03,288] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:41:03,288] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:41:03,540] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:41:03,541] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:41:07,702] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:41:07,703] [INFO] [__main__] Starting bot polling
[2025-11-26 18:41:07,703] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:41:07,865] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:41:09,619] [INFO] [handlers.start] User 838347504 started bot
[2025-11-26 18:41:09,619] [INFO] [aiogram.event] Update id=131879517 is handled. Duration 177 ms by bot id=8440100118
[2025-11-26 18:41:16,263] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:41:16,263] [INFO] [aiogram.event] Update id=131879518 is handled. Duration 264 ms by bot id=8440100118
[2025-11-26 18:41:17,871] [INFO] [aiogram.event] Update id=131879519 is handled. Duration 81 ms by bot id=8440100118
[2025-11-26 18:41:22,076] [INFO] [aiogram.event] Update id=131879520 is handled. Duration 99 ms by bot id=8440100118
[2025-11-26 18:41:25,516] [INFO] [aiogram.event] Update id=131879521 is handled. Duration 76 ms by bot id=8440100118
[2025-11-26 18:41:27,014] [INFO] [aiogram.event] Update id=131879522 is handled. Duration 136 ms by bot id=8440100118
[2025-11-26 18:41:28,019] [INFO] [database.crud] Added wish 6 for user 838347504
[2025-11-26 18:41:28,086] [INFO] [handlers.callbacks] User 838347504 added wish 6
[2025-11-26 18:41:28,086] [INFO] [aiogram.event] Update id=131879523 is handled. Duration 71 ms by bot id=8440100118
[2025-11-26 18:41:32,523] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:41:32,523] [INFO] [aiogram.event] Update id=131879524 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:41:33,503] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:41:33,503] [INFO] [aiogram.event] Update id=131879525 is handled. Duration 161 ms by bot id=8440100118
[2025-11-26 18:41:34,790] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:41:34,790] [INFO] [aiogram.event] Update id=131879526 is handled. Duration 142 ms by bot id=8440100118
[2025-11-26 18:41:35,688] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:41:35,688] [INFO] [aiogram.event] Update id=131879527 is handled. Duration 107 ms by bot id=8440100118
[2025-11-26 18:41:41,680] [INFO] [aiogram.event] Update id=131879528 is handled. Duration 285 ms by bot id=8440100118
[2025-11-26 18:41:43,134] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:41:43,924] [INFO] [aiogram.event] Update id=131879529 is handled. Duration 814 ms by bot id=8440100118
[2025-11-26 18:41:45,025] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:41:45,177] [INFO] [aiogram.event] Update id=131879530 is handled. Duration 170 ms by bot id=8440100118
[2025-11-26 18:41:46,261] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:41:46,462] [INFO] [aiogram.event] Update id=131879531 is handled. Duration 217 ms by bot id=8440100118
[2025-11-26 18:41:47,412] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:41:47,561] [INFO] [aiogram.event] Update id=131879532 is handled. Duration 165 ms by bot id=8440100118
[2025-11-26 18:41:48,905] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:41:48,981] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:41:49,053] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:41:49,054] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:41:49,134] [INFO] [aiogram.event] Update id=131879533 is handled. Duration 252 ms by bot id=8440100118
[2025-11-26 18:42:05,696] [INFO] [aiogram.event] Update id=131879534 is handled. Duration 205 ms by bot id=8440100118
[2025-11-26 18:42:08,524] [INFO] [handlers.wishlist] User 838347504 opened wishlist
[2025-11-26 18:42:08,525] [INFO] [aiogram.event] Update id=131879535 is handled. Duration 146 ms by bot id=8440100118
[2025-11-26 18:42:10,725] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:10,725] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:10,835] [INFO] [aiogram.event] Update id=131879536 is handled. Duration 110 ms by bot id=8440100118
[2025-11-26 18:42:12,786] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:12,786] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:12,863] [INFO] [aiogram.event] Update id=131879537 is not handled. Duration 77 ms by bot id=8440100118
[2025-11-26 18:42:12,863] [ERROR] [aiogram.event] Cause exception while process update id=131879537 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 41, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 98, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 18:42:15,366] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:15,367] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:15,450] [INFO] [aiogram.event] Update id=131879538 is handled. Duration 84 ms by bot id=8440100118
[2025-11-26 18:42:16,712] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:42:16,712] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:42:16,775] [INFO] [aiogram.event] Update id=131879539 is not handled. Duration 63 ms by bot id=8440100118
[2025-11-26 18:42:16,775] [ERROR] [aiogram.event] Cause exception while process update id=131879539 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 41, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 98, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-11-26 18:42:18,805] [INFO] [aiogram.event] Update id=131879540 is handled. Duration 103 ms by bot id=8440100118
[2025-11-26 18:42:23,647] [INFO] [aiogram.event] Update id=131879541 is handled. Duration 79 ms by bot id=8440100118
[2025-11-26 18:42:27,358] [INFO] [aiogram.event] Update id=131879542 is handled. Duration 131 ms by bot id=8440100118
[2025-11-26 18:42:28,633] [INFO] [aiogram.event] Update id=131879543 is handled. Duration 200 ms by bot id=8440100118
[2025-11-26 18:42:30,047] [INFO] [database.crud] Added wish 7 for user 838347504
[2025-11-26 18:42:30,221] [INFO] [handlers.callbacks] User 838347504 added wish 7
[2025-11-26 18:42:30,221] [INFO] [aiogram.event] Update id=131879544 is handled. Duration 194 ms by bot id=8440100118
[2025-11-26 18:42:32,978] [INFO] [aiogram.event] Update id=131879545 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:42:38,626] [INFO] [aiogram.event] Update id=131879546 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:42:46,511] [INFO] [aiogram.event] Update id=131879547 is handled. Duration 78 ms by bot id=8440100118
[2025-11-26 18:42:47,698] [INFO] [aiogram.event] Update id=131879548 is handled. Duration 128 ms by bot id=8440100118
[2025-11-26 18:42:48,450] [INFO] [database.crud] Added wish 8 for user 838347504
[2025-11-26 18:42:48,523] [INFO] [handlers.callbacks] User 838347504 added wish 8
[2025-11-26 18:42:48,524] [INFO] [aiogram.event] Update id=131879549 is handled. Duration 108 ms by bot id=8440100118
[2025-11-26 18:42:51,320] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 18:42:51,320] [INFO] [aiogram.event] Update id=131879550 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:42:53,966] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:42:53,966] [INFO] [aiogram.event] Update id=131879551 is handled. Duration 74 ms by bot id=8440100118
[2025-11-26 18:42:57,128] [INFO] [aiogram.event] Update id=131879552 is handled. Duration 73 ms by bot id=8440100118
[2025-11-26 18:42:58,244] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:42:58,405] [INFO] [aiogram.event] Update id=131879553 is handled. Duration 178 ms by bot id=8440100118
[2025-11-26 18:42:59,202] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:42:59,354] [INFO] [aiogram.event] Update id=131879554 is handled. Duration 168 ms by bot id=8440100118
[2025-11-26 18:43:00,207] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:43:00,389] [INFO] [aiogram.event] Update id=131879555 is handled. Duration 187 ms by bot id=8440100118
[2025-11-26 18:43:01,247] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:43:01,724] [INFO] [aiogram.event] Update id=131879556 is handled. Duration 513 ms by bot id=8440100118
[2025-11-26 18:43:02,876] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:43:02,967] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:43:03,040] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:43:03,040] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:43:03,129] [INFO] [aiogram.event] Update id=131879557 is handled. Duration 275 ms by bot id=8440100118
[2025-11-26 18:43:10,637] [INFO] [database.crud] Fetched wish 6
[2025-11-26 18:43:10,638] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:43:10,653] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -30.0
[2025-11-26 18:43:10,657] [INFO] [database.crud] Marked wish 6 as purchased
[2025-11-26 18:43:10,662] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:43:10,729] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:43:10,814] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:43:10,814] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:43:10,990] [INFO] [handlers.callbacks] User 838347504 purchased wish 6 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=30.00, savings_before=460.00)
[2025-11-26 18:43:10,990] [INFO] [aiogram.event] Update id=131879558 is handled. Duration 353 ms by bot id=8440100118
[2025-11-26 18:44:43,485] [INFO] [aiogram.event] Update id=131879559 is handled. Duration 203 ms by bot id=8440100118
[2025-11-26 18:44:45,295] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-26 18:44:45,295] [INFO] [aiogram.event] Update id=131879560 is handled. Duration 70 ms by bot id=8440100118
[2025-11-26 18:44:48,708] [INFO] [aiogram.event] Update id=131879561 is handled. Duration 83 ms by bot id=8440100118
[2025-11-26 18:44:50,396] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-26 18:44:50,544] [INFO] [aiogram.event] Update id=131879562 is handled. Duration 164 ms by bot id=8440100118
[2025-11-26 18:44:51,411] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-26 18:44:51,583] [INFO] [aiogram.event] Update id=131879563 is handled. Duration 188 ms by bot id=8440100118
[2025-11-26 18:44:52,521] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-26 18:44:52,727] [INFO] [aiogram.event] Update id=131879564 is handled. Duration 213 ms by bot id=8440100118
[2025-11-26 18:44:53,912] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-26 18:44:54,103] [INFO] [aiogram.event] Update id=131879565 is handled. Duration 197 ms by bot id=8440100118
[2025-11-26 18:44:55,222] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-26 18:44:55,318] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:44:55,395] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:55,395] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:44:55,477] [INFO] [aiogram.event] Update id=131879566 is handled. Duration 260 ms by bot id=8440100118
[2025-11-26 18:44:57,010] [INFO] [database.crud] Fetched wish 7
[2025-11-26 18:44:57,010] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:57,035] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by -20.0
[2025-11-26 18:44:57,040] [INFO] [database.crud] Marked wish 7 as purchased
[2025-11-26 18:44:57,045] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:44:57,115] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:44:57,191] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:57,191] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:44:57,321] [INFO] [handlers.callbacks] User 838347504 purchased wish 7 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=20.00, savings_before=450.00)
[2025-11-26 18:44:57,322] [INFO] [aiogram.event] Update id=131879567 is handled. Duration 312 ms by bot id=8440100118
[2025-11-26 18:44:58,331] [INFO] [database.crud] Fetched wish 8
[2025-11-26 18:44:58,331] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:58,347] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by -40.0
[2025-11-26 18:44:58,352] [INFO] [database.crud] Marked wish 8 as purchased
[2025-11-26 18:44:58,357] [INFO] [database.crud] Added purchase for user 838347504
[2025-11-26 18:44:58,443] [INFO] [database.crud] Fetched savings for user 838347504
[2025-11-26 18:44:58,521] [INFO] [database.crud] Fetched savings map for user 838347504
[2025-11-26 18:44:58,522] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 18:44:58,578] [INFO] [handlers.callbacks] User 838347504 purchased wish 8 (wishlist_category=кайфы, savings_category=спонтанные траты, price=40.00, savings_before=240.00)
[2025-11-26 18:44:58,578] [INFO] [aiogram.event] Update id=131879568 is handled. Duration 248 ms by bot id=8440100118
[2025-11-26 18:59:52,777] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-26 18:59:52,778] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-26 18:59:52,779] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 18:59:53,042] [INFO] [__main__] Bot shutdown complete
[2025-11-26 18:59:53,042] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 18:59:57,515] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-26 18:59:57,515] [INFO] [__main__] Starting bot polling
[2025-11-26 18:59:57,516] [INFO] [aiogram.dispatcher] Start polling
[2025-11-26 18:59:57,672] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-26 19:00:03,328] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 19:00:03,561] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-26 19:00:03,561] [INFO] [aiogram.event] Update id=131879569 is handled. Duration 235 ms by bot id=8440100118
[2025-11-26 19:00:14,980] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-26 19:00:14,981] [INFO] [aiogram.event] Update id=131879570 is handled. Duration 155 ms by bot id=8440100118
[2025-11-26 19:00:16,088] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-26 19:00:16,176] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-26 19:00:16,177] [INFO] [aiogram.event] Update id=131879571 is handled. Duration 90 ms by bot id=8440100118
[2025-11-26 19:00:18,199] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-26 19:00:18,297] [INFO] [aiogram.event] Update id=131879572 is handled. Duration 101 ms by bot id=8440100118
[2025-11-26 20:03:44,211] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-26 20:03:44,211] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-26 20:03:45,218] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 20:03:45,219] [WARNING] [aiogram.dispatcher] Sleep for 1.243916 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-26 20:03:46,473] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-11-26 20:03:46,473] [WARNING] [aiogram.dispatcher] Sleep for 1.732415 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 12:10:29,446] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:10:29,447] [INFO] [__main__] Starting bot polling
[2025-11-27 12:10:29,447] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:10:29,632] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:33:56,367] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:33:56,369] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:33:56,369] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:33:56,621] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:33:56,622] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:34:00,887] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:34:00,888] [INFO] [__main__] Starting bot polling
[2025-11-27 12:34:00,888] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:34:01,077] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:34:03,611] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:34:03,612] [INFO] [aiogram.event] Update id=131879573 is handled. Duration 198 ms by bot id=8440100118
[2025-11-27 12:34:07,229] [INFO] [aiogram.event] Update id=131879574 is handled. Duration 87 ms by bot id=8440100118
[2025-11-27 12:34:24,577] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-27 12:34:24,888] [INFO] [aiogram.event] Update id=131879575 is handled. Duration 553 ms by bot id=8440100118
[2025-11-27 12:34:31,454] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 12:34:31,454] [INFO] [aiogram.event] Update id=131879576 is handled. Duration 75 ms by bot id=8440100118
[2025-11-27 12:34:32,986] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:34:32,987] [INFO] [aiogram.event] Update id=131879577 is handled. Duration 84 ms by bot id=8440100118
[2025-11-27 12:34:38,213] [INFO] [aiogram.event] Update id=131879578 is handled. Duration 75 ms by bot id=8440100118
[2025-11-27 12:35:53,555] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 12:35:53,556] [INFO] [aiogram.event] Update id=131879579 is handled. Duration 76 ms by bot id=8440100118
[2025-11-27 12:35:54,687] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:35:54,772] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:35:54,772] [INFO] [aiogram.event] Update id=131879580 is handled. Duration 86 ms by bot id=8440100118
[2025-11-27 12:35:57,074] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:35:57,159] [INFO] [aiogram.event] Update id=131879581 is handled. Duration 87 ms by bot id=8440100118
[2025-11-27 12:35:58,176] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:35:58,266] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:35:58,266] [INFO] [aiogram.event] Update id=131879582 is handled. Duration 91 ms by bot id=8440100118
[2025-11-27 12:35:59,175] [INFO] [aiogram.event] Update id=131879583 is handled. Duration 131 ms by bot id=8440100118
[2025-11-27 12:36:01,795] [INFO] [aiogram.event] Update id=131879584 is handled. Duration 134 ms by bot id=8440100118
[2025-11-27 12:36:04,019] [INFO] [aiogram.event] Update id=131879585 is handled. Duration 74 ms by bot id=8440100118
[2025-11-27 12:36:05,399] [INFO] [aiogram.event] Update id=131879586 is handled. Duration 125 ms by bot id=8440100118
[2025-11-27 12:37:05,981] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:37:06,192] [INFO] [aiogram.event] Update id=131879587 is handled. Duration 213 ms by bot id=8440100118
[2025-11-27 12:48:47,034] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:48:47,035] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:48:47,035] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:48:47,288] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:48:47,288] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:48:51,674] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:48:51,674] [INFO] [__main__] Starting bot polling
[2025-11-27 12:48:51,674] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:48:51,843] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:49:00,901] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:49:01,062] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:49:01,062] [INFO] [aiogram.event] Update id=131879588 is handled. Duration 163 ms by bot id=8440100118
[2025-11-27 12:49:02,557] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:49:02,688] [INFO] [aiogram.event] Update id=131879589 is handled. Duration 134 ms by bot id=8440100118
[2025-11-27 12:49:18,626] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:49:18,703] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:49:18,703] [INFO] [aiogram.event] Update id=131879590 is handled. Duration 78 ms by bot id=8440100118
[2025-11-27 12:49:25,374] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 12:49:25,374] [INFO] [aiogram.event] Update id=131879591 is handled. Duration 85 ms by bot id=8440100118
[2025-11-27 12:49:26,456] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:49:26,456] [INFO] [aiogram.event] Update id=131879592 is handled. Duration 72 ms by bot id=8440100118
[2025-11-27 12:49:29,946] [INFO] [aiogram.event] Update id=131879593 is handled. Duration 181 ms by bot id=8440100118
[2025-11-27 12:49:41,464] [INFO] [aiogram.event] Update id=131879594 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:15,648] [INFO] [aiogram.event] Update id=131879595 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:17,671] [INFO] [aiogram.event] Update id=131879596 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:17,848] [INFO] [aiogram.event] Update id=131879597 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:50:29,993] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:50:29,994] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:50:29,994] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:50:30,245] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:50:30,246] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:50:34,880] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 12:50:34,880] [INFO] [__main__] Starting bot polling
[2025-11-27 12:50:34,881] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 12:50:35,037] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 12:50:37,408] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 12:50:37,408] [INFO] [aiogram.event] Update id=131879598 is handled. Duration 220 ms by bot id=8440100118
[2025-11-27 12:50:40,366] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 12:50:40,444] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 12:50:40,444] [INFO] [aiogram.event] Update id=131879599 is handled. Duration 79 ms by bot id=8440100118
[2025-11-27 12:50:41,627] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 12:50:41,799] [INFO] [aiogram.event] Update id=131879600 is handled. Duration 175 ms by bot id=8440100118
[2025-11-27 12:50:50,086] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 12:50:50,086] [INFO] [aiogram.event] Update id=131879601 is handled. Duration 77 ms by bot id=8440100118
[2025-11-27 12:50:54,195] [INFO] [aiogram.event] Update id=131879602 is handled. Duration 339 ms by bot id=8440100118
[2025-11-27 12:50:58,242] [INFO] [aiogram.event] Update id=131879603 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:51:06,847] [INFO] [aiogram.event] Update id=131879604 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 12:53:26,441] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 12:53:26,442] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 12:53:26,442] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 12:53:26,706] [INFO] [__main__] Bot shutdown complete
[2025-11-27 12:53:26,707] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:17:12,739] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 13:17:12,739] [INFO] [__main__] Starting bot polling
[2025-11-27 13:17:12,740] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 13:17:12,904] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:17:32,422] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 13:17:32,422] [INFO] [aiogram.event] Update id=131879605 is handled. Duration 209 ms by bot id=8440100118
[2025-11-27 13:17:35,027] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 13:17:35,028] [INFO] [aiogram.event] Update id=131879606 is handled. Duration 107 ms by bot id=8440100118
[2025-11-27 13:17:38,667] [INFO] [aiogram.event] Update id=131879607 is not handled. Duration 51 ms by bot id=8440100118
[2025-11-27 13:17:38,668] [ERROR] [aiogram.event] Cause exception while process update id=131879607 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 133, in process_income_amount
    await _remove_reply_keyboard_silently(message)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 96, in _remove_reply_keyboard_silently
    removal_message = await message.answer("\u200b", reply_markup=ReplyKeyboardRemove())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-11-27 13:18:06,509] [INFO] [handlers.start] User 838347504 returned to main menu
[2025-11-27 13:18:06,509] [INFO] [aiogram.event] Update id=131879608 is handled. Duration 67 ms by bot id=8440100118
[2025-11-27 13:18:08,389] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 13:18:08,549] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 13:18:08,549] [INFO] [aiogram.event] Update id=131879609 is handled. Duration 162 ms by bot id=8440100118
[2025-11-27 13:18:10,171] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 13:18:10,248] [INFO] [aiogram.event] Update id=131879610 is handled. Duration 80 ms by bot id=8440100118
[2025-11-27 13:24:50,339] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 13:24:50,341] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 13:24:50,341] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 13:24:50,598] [INFO] [__main__] Bot shutdown complete
[2025-11-27 13:24:50,599] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:24:55,272] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 13:24:55,272] [INFO] [__main__] Starting bot polling
[2025-11-27 13:24:55,272] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 13:24:55,437] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 13:25:12,524] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 13:25:12,524] [INFO] [aiogram.event] Update id=131879611 is handled. Duration 304 ms by bot id=8440100118
[2025-11-27 13:25:13,655] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 13:25:13,655] [INFO] [aiogram.event] Update id=131879612 is handled. Duration 74 ms by bot id=8440100118
[2025-11-27 13:25:18,640] [INFO] [aiogram.event] Update id=131879613 is handled. Duration 709 ms by bot id=8440100118
[2025-11-27 13:25:47,843] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-27 13:25:48,081] [INFO] [aiogram.event] Update id=131879614 is handled. Duration 478 ms by bot id=8440100118
[2025-11-27 13:25:49,192] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-27 13:25:49,358] [INFO] [aiogram.event] Update id=131879615 is handled. Duration 304 ms by bot id=8440100118
[2025-11-27 13:25:50,424] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-27 13:25:50,568] [INFO] [aiogram.event] Update id=131879616 is handled. Duration 283 ms by bot id=8440100118
[2025-11-27 13:25:51,613] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-27 13:25:51,760] [INFO] [aiogram.event] Update id=131879617 is handled. Duration 294 ms by bot id=8440100118
[2025-11-27 13:25:52,959] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-27 13:25:53,033] [INFO] [database.crud] Fetched savings for user 8440100118
[2025-11-27 13:25:53,111] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-27 13:25:53,112] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-27 13:25:53,112] [INFO] [aiogram.event] Update id=131879618 is handled. Duration 282 ms by bot id=8440100118
[2025-11-27 13:26:01,065] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 13:26:01,065] [INFO] [aiogram.event] Update id=131879619 is handled. Duration 77 ms by bot id=8440100118
[2025-11-27 13:26:06,358] [INFO] [aiogram.event] Update id=131879620 is handled. Duration 274 ms by bot id=8440100118
[2025-11-27 16:31:28,901] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 16:31:28,905] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 16:31:28,905] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 16:31:29,161] [INFO] [__main__] Bot shutdown complete
[2025-11-27 16:31:29,162] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 16:31:33,946] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 16:31:33,947] [INFO] [__main__] Starting bot polling
[2025-11-27 16:31:33,947] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 16:31:34,114] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 16:32:01,418] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 16:32:01,418] [INFO] [aiogram.event] Update id=131879621 is handled. Duration 182 ms by bot id=8440100118
[2025-11-27 16:32:02,726] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 16:32:02,808] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 16:32:02,809] [INFO] [aiogram.event] Update id=131879622 is handled. Duration 85 ms by bot id=8440100118
[2025-11-27 16:32:03,813] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 16:32:03,885] [INFO] [aiogram.event] Update id=131879623 is handled. Duration 74 ms by bot id=8440100118
[2025-11-27 16:33:01,914] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 16:33:01,914] [INFO] [aiogram.event] Update id=131879624 is handled. Duration 82 ms by bot id=8440100118
[2025-11-27 16:33:05,272] [INFO] [aiogram.event] Update id=131879625 is not handled. Duration 53 ms by bot id=8440100118
[2025-11-27 16:33:05,272] [ERROR] [aiogram.event] Cause exception while process update id=131879625 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 133, in process_income_amount
    await _remove_reply_keyboard_silently(message)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 96, in _remove_reply_keyboard_silently
    removal_message = await message.answer("\u200b", reply_markup=ReplyKeyboardRemove())
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-11-27 17:15:21,921] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 17:15:21,923] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 17:15:21,924] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:15:22,186] [INFO] [__main__] Bot shutdown complete
[2025-11-27 17:15:22,187] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:15:30,313] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 17:15:30,313] [INFO] [__main__] Starting bot polling
[2025-11-27 17:15:30,314] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 17:15:30,487] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:15:34,218] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 17:15:34,219] [INFO] [aiogram.event] Update id=131879626 is handled. Duration 182 ms by bot id=8440100118
[2025-11-27 17:15:35,839] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 17:15:35,840] [INFO] [aiogram.event] Update id=131879627 is handled. Duration 81 ms by bot id=8440100118
[2025-11-27 17:15:38,795] [INFO] [aiogram.event] Update id=131879628 is handled. Duration 78 ms by bot id=8440100118
[2025-11-27 17:15:40,228] [INFO] [database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-11-27 17:15:40,378] [INFO] [aiogram.event] Update id=131879629 is handled. Duration 317 ms by bot id=8440100118
[2025-11-27 17:15:41,755] [INFO] [database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-11-27 17:15:41,966] [INFO] [aiogram.event] Update id=131879630 is handled. Duration 376 ms by bot id=8440100118
[2025-11-27 17:15:43,198] [INFO] [database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-11-27 17:15:43,486] [INFO] [aiogram.event] Update id=131879631 is handled. Duration 660 ms by bot id=8440100118
[2025-11-27 17:15:44,352] [INFO] [database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-11-27 17:15:44,500] [INFO] [aiogram.event] Update id=131879632 is handled. Duration 350 ms by bot id=8440100118
[2025-11-27 17:15:46,174] [INFO] [database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-11-27 17:15:46,340] [INFO] [database.crud] Fetched savings for user 8440100118
[2025-11-27 17:15:46,444] [INFO] [database.crud] Fetched savings map for user 8440100118
[2025-11-27 17:15:46,444] [INFO] [database.crud] Fetched wishes for user 8440100118
[2025-11-27 17:15:46,445] [INFO] [aiogram.event] Update id=131879633 is handled. Duration 454 ms by bot id=8440100118
[2025-11-27 17:44:19,631] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 17:44:19,631] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:44:20,637] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:44:20,637] [WARNING] [aiogram.dispatcher] Sleep for 1.229382 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 17:44:21,876] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:44:21,876] [WARNING] [aiogram.dispatcher] Sleep for 1.601177 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 17:44:23,484] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:44:23,484] [WARNING] [aiogram.dispatcher] Sleep for 1.974760 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-27 17:44:37,667] [INFO] [aiogram.dispatcher] Connection established (tryings = 4, bot id = 8440100118)
[2025-11-27 17:54:00,172] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 17:54:00,174] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 17:54:00,174] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:54:00,433] [INFO] [__main__] Bot shutdown complete
[2025-11-27 17:54:00,434] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:54:11,372] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 17:54:11,372] [INFO] [__main__] Starting bot polling
[2025-11-27 17:54:11,373] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 17:54:12,540] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 17:55:23,032] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 17:55:23,032] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:55:30,815] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Подключение к сети было разорвано локальной системой]
[2025-11-27 17:55:30,815] [WARNING] [aiogram.dispatcher] Sleep for 1.174954 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 17:55:32,005] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:32,005] [WARNING] [aiogram.dispatcher] Sleep for 1.489172 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 17:55:33,504] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:33,504] [WARNING] [aiogram.dispatcher] Sleep for 1.811539 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-27 17:55:35,318] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:35,318] [WARNING] [aiogram.dispatcher] Sleep for 2.171544 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-11-27 17:55:37,507] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:37,507] [WARNING] [aiogram.dispatcher] Sleep for 2.768948 seconds and try again... (tryings = 5, bot id = 8440100118)
[2025-11-27 17:55:40,285] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:40,286] [WARNING] [aiogram.dispatcher] Sleep for 3.654658 seconds and try again... (tryings = 6, bot id = 8440100118)
[2025-11-27 17:55:43,957] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 17:55:43,958] [WARNING] [aiogram.dispatcher] Sleep for 4.797862 seconds and try again... (tryings = 7, bot id = 8440100118)
[2025-11-27 17:56:04,059] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorSSLError: Cannot connect to host api.telegram.org:443 ssl:default [[SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:1032)]
[2025-11-27 17:56:04,060] [WARNING] [aiogram.dispatcher] Sleep for 4.880425 seconds and try again... (tryings = 8, bot id = 8440100118)
[2025-11-27 17:56:09,539] [INFO] [aiogram.dispatcher] Connection established (tryings = 9, bot id = 8440100118)
[2025-11-27 17:56:09,544] [INFO] [database.crud] Fetched wishes for user 838347504
[2025-11-27 17:56:09,958] [INFO] [handlers.wishlist] User 838347504 opened empty wishlist
[2025-11-27 17:56:09,958] [INFO] [aiogram.event] Update id=131879634 is handled. Duration 417 ms by bot id=8440100118
[2025-11-27 17:56:16,371] [INFO] [database.crud] Fetched purchases for user 838347504
[2025-11-27 17:56:16,547] [INFO] [aiogram.event] Update id=131879635 is handled. Duration 181 ms by bot id=8440100118
[2025-11-27 17:57:57,040] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 17:57:57,040] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 17:58:09,636] [INFO] [aiogram.dispatcher] Connection established (tryings = 1, bot id = 8440100118)
[2025-11-27 18:05:07,794] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 18:05:07,794] [INFO] [aiogram.event] Update id=131879636 is handled. Duration 903 ms by bot id=8440100118
[2025-11-27 18:20:24,265] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 18:20:24,266] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 18:20:25,279] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:20:25,280] [WARNING] [aiogram.dispatcher] Sleep for 1.266278 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 18:20:38,458] [INFO] [aiogram.dispatcher] Connection established (tryings = 2, bot id = 8440100118)
[2025-11-27 18:43:45,394] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-11-27 18:43:45,394] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 18:43:46,410] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:46,410] [WARNING] [aiogram.dispatcher] Sleep for 1.475970 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-11-27 18:43:47,895] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:47,896] [WARNING] [aiogram.dispatcher] Sleep for 1.948630 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-11-27 18:43:49,856] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:49,857] [WARNING] [aiogram.dispatcher] Sleep for 2.581776 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-11-27 18:43:52,447] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:52,447] [WARNING] [aiogram.dispatcher] Sleep for 3.377698 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-11-27 18:43:55,830] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:43:55,830] [WARNING] [aiogram.dispatcher] Sleep for 4.314681 seconds and try again... (tryings = 5, bot id = 8440100118)
[2025-11-27 18:44:00,157] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:00,157] [WARNING] [aiogram.dispatcher] Sleep for 4.824583 seconds and try again... (tryings = 6, bot id = 8440100118)
[2025-11-27 18:44:04,991] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:04,991] [WARNING] [aiogram.dispatcher] Sleep for 4.856746 seconds and try again... (tryings = 7, bot id = 8440100118)
[2025-11-27 18:44:09,857] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:09,857] [WARNING] [aiogram.dispatcher] Sleep for 5.164817 seconds and try again... (tryings = 8, bot id = 8440100118)
[2025-11-27 18:44:15,035] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:15,035] [WARNING] [aiogram.dispatcher] Sleep for 4.684514 seconds and try again... (tryings = 9, bot id = 8440100118)
[2025-11-27 18:44:19,732] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:19,732] [WARNING] [aiogram.dispatcher] Sleep for 4.896067 seconds and try again... (tryings = 10, bot id = 8440100118)
[2025-11-27 18:44:24,635] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:24,635] [WARNING] [aiogram.dispatcher] Sleep for 5.058570 seconds and try again... (tryings = 11, bot id = 8440100118)
[2025-11-27 18:44:29,697] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:29,697] [WARNING] [aiogram.dispatcher] Sleep for 5.023360 seconds and try again... (tryings = 12, bot id = 8440100118)
[2025-11-27 18:44:34,736] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:34,737] [WARNING] [aiogram.dispatcher] Sleep for 5.013694 seconds and try again... (tryings = 13, bot id = 8440100118)
[2025-11-27 18:44:39,763] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:39,763] [WARNING] [aiogram.dispatcher] Sleep for 5.056434 seconds and try again... (tryings = 14, bot id = 8440100118)
[2025-11-27 18:44:44,832] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:44,832] [WARNING] [aiogram.dispatcher] Sleep for 5.025322 seconds and try again... (tryings = 15, bot id = 8440100118)
[2025-11-27 18:44:49,864] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:49,864] [WARNING] [aiogram.dispatcher] Sleep for 4.899981 seconds and try again... (tryings = 16, bot id = 8440100118)
[2025-11-27 18:44:54,765] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:54,766] [WARNING] [aiogram.dispatcher] Sleep for 4.830646 seconds and try again... (tryings = 17, bot id = 8440100118)
[2025-11-27 18:44:59,610] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:44:59,611] [WARNING] [aiogram.dispatcher] Sleep for 4.956331 seconds and try again... (tryings = 18, bot id = 8440100118)
[2025-11-27 18:45:04,569] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:45:04,569] [WARNING] [aiogram.dispatcher] Sleep for 4.910033 seconds and try again... (tryings = 19, bot id = 8440100118)
[2025-11-27 18:45:09,496] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:45:09,496] [WARNING] [aiogram.dispatcher] Sleep for 4.884456 seconds and try again... (tryings = 20, bot id = 8440100118)
[2025-11-27 18:45:14,398] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Сетевая папка недоступна. За информацией о разрешении проблем в сети обратитесь к справочной системе Windows]
[2025-11-27 18:45:14,398] [WARNING] [aiogram.dispatcher] Sleep for 5.097972 seconds and try again... (tryings = 21, bot id = 8440100118)
[2025-11-27 18:45:35,026] [INFO] [aiogram.dispatcher] Connection established (tryings = 22, bot id = 8440100118)
[2025-11-27 18:53:55,700] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 18:53:55,701] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 18:53:55,701] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 18:53:55,959] [INFO] [__main__] Bot shutdown complete
[2025-11-27 18:53:55,960] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 18:54:00,344] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 18:54:00,344] [INFO] [__main__] Starting bot polling
[2025-11-27 18:54:00,345] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 18:54:00,828] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 18:54:47,876] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 18:54:47,877] [INFO] [aiogram.event] Update id=131879637 is handled. Duration 756 ms by bot id=8440100118
[2025-11-27 18:54:49,780] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 18:54:49,781] [INFO] [aiogram.event] Update id=131879638 is handled. Duration 225 ms by bot id=8440100118
[2025-11-27 18:54:54,075] [INFO] [aiogram.event] Update id=131879639 is not handled. Duration 122 ms by bot id=8440100118
[2025-11-27 18:54:54,075] [ERROR] [aiogram.event] Cause exception while process update id=131879639 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 179, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 19:13:11,965] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 19:13:11,966] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 19:13:11,967] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 19:13:12,226] [INFO] [__main__] Bot shutdown complete
[2025-11-27 19:13:12,227] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:13:16,869] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 19:13:16,869] [INFO] [__main__] Starting bot polling
[2025-11-27 19:13:16,870] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 19:13:17,347] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:14:17,470] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 19:14:17,470] [INFO] [aiogram.event] Update id=131879640 is handled. Duration 1751 ms by bot id=8440100118
[2025-11-27 19:14:20,656] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 19:14:20,657] [INFO] [aiogram.event] Update id=131879641 is handled. Duration 1409 ms by bot id=8440100118
[2025-11-27 19:14:26,727] [INFO] [aiogram.event] Update id=131879642 is handled. Duration 454 ms by bot id=8440100118
[2025-11-27 19:14:33,427] [INFO] [aiogram.event] Update id=131879643 is handled. Duration 282 ms by bot id=8440100118
[2025-11-27 19:14:35,633] [INFO] [aiogram.event] Update id=131879644 is handled. Duration 549 ms by bot id=8440100118
[2025-11-27 19:14:37,463] [INFO] [aiogram.event] Update id=131879645 is handled. Duration 486 ms by bot id=8440100118
[2025-11-27 19:14:38,835] [INFO] [aiogram.event] Update id=131879646 is handled. Duration 333 ms by bot id=8440100118
[2025-11-27 19:14:40,203] [INFO] [aiogram.event] Update id=131879647 is handled. Duration 237 ms by bot id=8440100118
[2025-11-27 19:14:41,686] [INFO] [aiogram.event] Update id=131879648 is handled. Duration 263 ms by bot id=8440100118
[2025-11-27 19:14:42,946] [INFO] [aiogram.event] Update id=131879649 is handled. Duration 402 ms by bot id=8440100118
[2025-11-27 19:14:43,404] [INFO] [aiogram.event] Update id=131879650 is handled. Duration 634 ms by bot id=8440100118
[2025-11-27 19:14:43,521] [INFO] [aiogram.event] Update id=131879651 is handled. Duration 512 ms by bot id=8440100118
[2025-11-27 19:14:45,102] [INFO] [aiogram.event] Update id=131879652 is handled. Duration 454 ms by bot id=8440100118
[2025-11-27 19:14:45,423] [INFO] [aiogram.event] Update id=131879653 is handled. Duration 450 ms by bot id=8440100118
[2025-11-27 19:14:45,556] [INFO] [aiogram.event] Update id=131879654 is handled. Duration 452 ms by bot id=8440100118
[2025-11-27 19:14:46,968] [INFO] [aiogram.event] Update id=131879655 is handled. Duration 504 ms by bot id=8440100118
[2025-11-27 19:14:48,178] [INFO] [aiogram.event] Update id=131879656 is handled. Duration 247 ms by bot id=8440100118
[2025-11-27 19:14:48,423] [INFO] [aiogram.event] Update id=131879657 is handled. Duration 345 ms by bot id=8440100118
[2025-11-27 19:14:48,526] [INFO] [aiogram.event] Update id=131879658 is handled. Duration 210 ms by bot id=8440100118
[2025-11-27 19:14:48,799] [INFO] [aiogram.event] Update id=131879659 is handled. Duration 210 ms by bot id=8440100118
[2025-11-27 19:14:49,163] [INFO] [aiogram.event] Update id=131879660 is handled. Duration 266 ms by bot id=8440100118
[2025-11-27 19:14:49,578] [INFO] [aiogram.event] Update id=131879661 is handled. Duration 357 ms by bot id=8440100118
[2025-11-27 19:14:49,709] [INFO] [aiogram.event] Update id=131879662 is handled. Duration 288 ms by bot id=8440100118
[2025-11-27 19:14:50,034] [INFO] [aiogram.event] Update id=131879663 is handled. Duration 390 ms by bot id=8440100118
[2025-11-27 19:14:50,228] [INFO] [aiogram.event] Update id=131879664 is handled. Duration 352 ms by bot id=8440100118
[2025-11-27 19:14:51,949] [INFO] [aiogram.event] Update id=131879665 is handled. Duration 287 ms by bot id=8440100118
[2025-11-27 19:14:53,228] [INFO] [aiogram.event] Update id=131879666 is handled. Duration 295 ms by bot id=8440100118
[2025-11-27 19:14:53,545] [INFO] [aiogram.event] Update id=131879667 is handled. Duration 265 ms by bot id=8440100118
[2025-11-27 19:14:55,031] [INFO] [aiogram.event] Update id=131879668 is handled. Duration 507 ms by bot id=8440100118
[2025-11-27 19:14:55,525] [INFO] [aiogram.event] Update id=131879669 is handled. Duration 489 ms by bot id=8440100118
[2025-11-27 19:14:55,667] [INFO] [aiogram.event] Update id=131879670 is handled. Duration 425 ms by bot id=8440100118
[2025-11-27 19:14:56,422] [INFO] [aiogram.event] Update id=131879671 is handled. Duration 1093 ms by bot id=8440100118
[2025-11-27 19:14:58,937] [INFO] [aiogram.event] Update id=131879672 is handled. Duration 729 ms by bot id=8440100118
[2025-11-27 19:15:07,786] [INFO] [aiogram.event] Update id=131879673 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:15:12,064] [INFO] [aiogram.event] Update id=131879674 is handled. Duration 1 ms by bot id=8440100118
[2025-11-27 19:15:28,601] [INFO] [aiogram.event] Update id=131879675 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:15:29,390] [INFO] [aiogram.event] Update id=131879676 is handled. Duration 1 ms by bot id=8440100118
[2025-11-27 19:15:30,675] [INFO] [aiogram.event] Update id=131879677 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:15:31,146] [INFO] [aiogram.event] Update id=131879678 is handled. Duration 0 ms by bot id=8440100118
[2025-11-27 19:39:21,790] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 19:39:21,791] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 19:39:21,791] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 19:39:22,054] [INFO] [__main__] Bot shutdown complete
[2025-11-27 19:39:22,055] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:39:29,655] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 19:39:29,655] [INFO] [__main__] Starting bot polling
[2025-11-27 19:39:29,656] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 19:39:30,027] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 19:41:38,923] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 19:41:38,924] [INFO] [aiogram.event] Update id=131879679 is handled. Duration 488 ms by bot id=8440100118
[2025-11-27 19:41:42,516] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 19:41:42,517] [INFO] [aiogram.event] Update id=131879680 is handled. Duration 523 ms by bot id=8440100118
[2025-11-27 19:41:43,860] [INFO] [aiogram.event] Update id=131879681 is handled. Duration 305 ms by bot id=8440100118
[2025-11-27 19:41:44,298] [INFO] [aiogram.event] Update id=131879682 is handled. Duration 574 ms by bot id=8440100118
[2025-11-27 20:07:27,303] [INFO] [aiogram.dispatcher] Polling stopped
[2025-11-27 20:07:27,305] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-11-27 20:07:27,305] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-11-27 20:07:27,557] [INFO] [__main__] Bot shutdown complete
[2025-11-27 20:07:27,558] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 20:07:36,161] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-11-27 20:07:36,161] [INFO] [__main__] Starting bot polling
[2025-11-27 20:07:36,162] [INFO] [aiogram.dispatcher] Start polling
[2025-11-27 20:07:36,687] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-11-27 20:07:44,519] [INFO] [handlers.start] User 838347504 started bot
[2025-11-27 20:07:44,520] [INFO] [aiogram.event] Update id=131879683 is handled. Duration 305 ms by bot id=8440100118
[2025-11-27 20:07:47,229] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-11-27 20:07:47,230] [INFO] [aiogram.event] Update id=131879684 is handled. Duration 333 ms by bot id=8440100118
[2025-11-27 20:07:49,052] [INFO] [aiogram.event] Update id=131879685 is not handled. Duration 152 ms by bot id=8440100118
[2025-11-27 20:07:49,052] [ERROR] [aiogram.event] Cause exception while process update id=131879685 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 20:07:49,310] [INFO] [aiogram.event] Update id=131879686 is not handled. Duration 209 ms by bot id=8440100118
[2025-11-27 20:07:49,310] [ERROR] [aiogram.event] Cause exception while process update id=131879686 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 20:07:49,442] [INFO] [aiogram.event] Update id=131879687 is not handled. Duration 120 ms by bot id=8440100118
[2025-11-27 20:07:49,442] [ERROR] [aiogram.event] Cause exception while process update id=131879687 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-11-27 20:07:49,726] [INFO] [aiogram.event] Update id=131879688 is not handled. Duration 118 ms by bot id=8440100118
[2025-11-27 20:07:49,726] [ERROR] [aiogram.event] Cause exception while process update id=131879688 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-12-04 00:15:38,723] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 00:15:38,724] [INFO] [__main__] Starting bot polling
[2025-12-04 00:15:38,724] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 00:15:39,205] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 00:15:48,537] [INFO] [handlers.start] User 838347504 started bot
[2025-12-04 00:15:48,537] [INFO] [aiogram.event] Update id=131879689 is handled. Duration 644 ms by bot id=8440100118
[2025-12-04 00:15:51,243] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-12-04 00:15:51,243] [INFO] [aiogram.event] Update id=131879690 is handled. Duration 541 ms by bot id=8440100118
[2025-12-04 00:15:53,418] [INFO] [aiogram.event] Update id=131879691 is not handled. Duration 178 ms by bot id=8440100118
[2025-12-04 00:15:53,418] [ERROR] [aiogram.event] Cause exception while process update id=131879691 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 183, in handle_income_digit
    await message.bot.edit_message_text(
    ...<3 lines>...
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1524, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message can't be edited
[2025-12-04 08:59:08,760] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-12-04 08:59:08,761] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 08:59:09,766] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:09,767] [WARNING] [aiogram.dispatcher] Sleep for 1.343808 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-12-04 08:59:11,118] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:11,118] [WARNING] [aiogram.dispatcher] Sleep for 1.642843 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-12-04 08:59:12,775] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:12,776] [WARNING] [aiogram.dispatcher] Sleep for 2.047595 seconds and try again... (tryings = 3, bot id = 8440100118)
[2025-12-04 08:59:14,831] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:14,831] [WARNING] [aiogram.dispatcher] Sleep for 2.787261 seconds and try again... (tryings = 4, bot id = 8440100118)
[2025-12-04 08:59:17,635] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:17,635] [WARNING] [aiogram.dispatcher] Sleep for 3.597123 seconds and try again... (tryings = 5, bot id = 8440100118)
[2025-12-04 08:59:21,239] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:21,239] [WARNING] [aiogram.dispatcher] Sleep for 4.758203 seconds and try again... (tryings = 6, bot id = 8440100118)
[2025-12-04 08:59:26,006] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-04 08:59:26,006] [WARNING] [aiogram.dispatcher] Sleep for 5.013991 seconds and try again... (tryings = 7, bot id = 8440100118)
[2025-12-04 08:59:41,209] [INFO] [aiogram.dispatcher] Connection established (tryings = 8, bot id = 8440100118)
[2025-12-04 16:25:45,609] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 16:25:45,614] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 16:25:45,614] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 16:25:45,880] [INFO] [__main__] Bot shutdown complete
[2025-12-04 16:25:45,894] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 16:25:51,614] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 16:25:51,614] [INFO] [__main__] Starting bot polling
[2025-12-04 16:25:51,614] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 16:25:51,864] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 16:25:55,148] [INFO] [handlers.start] User 192487529 started bot
[2025-12-04 16:25:55,149] [INFO] [aiogram.event] Update id=131879692 is handled. Duration 218 ms by bot id=8440100118
[2025-12-04 16:25:58,374] [INFO] [handlers.finances] User 192487529 started income calculation
[2025-12-04 16:25:58,374] [INFO] [aiogram.event] Update id=131879693 is handled. Duration 377 ms by bot id=8440100118
[2025-12-04 18:57:53,363] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 18:57:53,368] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 18:57:53,369] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 18:57:53,622] [INFO] [__main__] Bot shutdown complete
[2025-12-04 18:57:53,624] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 18:57:57,880] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 18:57:57,881] [INFO] [__main__] Starting bot polling
[2025-12-04 18:57:57,881] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 18:57:58,059] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 18:58:34,909] [INFO] [handlers.start] User 838347504 started bot
[2025-12-04 18:58:34,909] [INFO] [aiogram.event] Update id=131879694 is handled. Duration 238 ms by bot id=8440100118
[2025-12-04 18:58:45,119] [INFO] [handlers.finances] User 838347504 started income calculation
[2025-12-04 18:58:45,119] [INFO] [aiogram.event] Update id=131879695 is handled. Duration 214 ms by bot id=8440100118
[2025-12-04 18:58:48,458] [WARNING] [handlers.finances] Failed to edit income message 3139: Telegram server says - Bad Request: message can't be edited
[2025-12-04 18:58:48,619] [INFO] [aiogram.event] Update id=131879696 is handled. Duration 216 ms by bot id=8440100118
[2025-12-04 18:58:51,818] [INFO] [aiogram.event] Update id=131879697 is handled. Duration 221 ms by bot id=8440100118
[2025-12-04 18:59:02,097] [INFO] [aiogram.event] Update id=131879698 is handled. Duration 170 ms by bot id=8440100118
[2025-12-04 18:59:17,354] [INFO] [aiogram.event] Update id=131879699 is handled. Duration 150 ms by bot id=8440100118
[2025-12-04 18:59:18,075] [INFO] [aiogram.event] Update id=131879700 is handled. Duration 157 ms by bot id=8440100118
[2025-12-04 18:59:19,261] [INFO] [aiogram.event] Update id=131879701 is handled. Duration 270 ms by bot id=8440100118
[2025-12-04 18:59:21,302] [INFO] [aiogram.event] Update id=131879702 is handled. Duration 211 ms by bot id=8440100118
[2025-12-04 18:59:23,098] [INFO] [aiogram.event] Update id=131879703 is handled. Duration 444 ms by bot id=8440100118
[2025-12-04 18:59:29,371] [INFO] [handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-04 18:59:29,449] [INFO] [aiogram.event] Update id=131879704 is handled. Duration 80 ms by bot id=8440100118
[2025-12-04 21:37:55,711] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 21:37:55,717] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 21:37:55,718] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 21:37:55,971] [INFO] [__main__] Bot shutdown complete
[2025-12-04 21:37:55,973] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 21:38:02,009] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 21:38:02,010] [INFO] [__main__] Starting bot polling
[2025-12-04 21:38:02,010] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 21:38:02,209] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 21:38:10,589] [INFO] [handlers.start] User 838347504 started bot
[2025-12-04 21:38:10,589] [INFO] [aiogram.event] Update id=131879705 is handled. Duration 201 ms by bot id=8440100118
[2025-12-04 21:38:12,352] [INFO] [aiogram.event] Update id=131879706 is not handled. Duration 146 ms by bot id=8440100118
[2025-12-04 21:38:12,352] [ERROR] [aiogram.event] Cause exception while process update id=131879706 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 136, in start_income_flow
    await message.answer("\u200b", reply_markup=income_calculator_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-12-04 21:38:32,453] [INFO] [aiogram.event] Update id=131879707 is not handled. Duration 223 ms by bot id=8440100118
[2025-12-04 21:38:32,453] [ERROR] [aiogram.event] Cause exception while process update id=131879707 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 136, in start_income_flow
    await message.answer("\u200b", reply_markup=income_calculator_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-12-04 21:38:38,764] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 21:38:38,767] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 21:38:38,767] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 21:38:39,030] [INFO] [__main__] Bot shutdown complete
[2025-12-04 21:38:39,030] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 21:38:45,240] [INFO] [database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 21:38:45,241] [INFO] [__main__] Starting bot polling
[2025-12-04 21:38:45,241] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 21:38:45,454] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 21:54:24,015] [INFO] [aiogram.event] Update id=131879708 is not handled. Duration 368 ms by bot id=8440100118
[2025-12-04 21:54:24,015] [ERROR] [aiogram.event] Cause exception while process update id=131879708 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 136, in start_income_flow
    await message.answer("\u200b", reply_markup=income_calculator_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: text must be non-empty
[2025-12-04 22:26:57,073] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 22:26:57,075] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 22:26:57,075] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 22:26:57,332] [INFO] [__main__] Bot shutdown complete
[2025-12-04 22:26:57,333] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 22:26:58,649] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 22:26:58,649] [INFO] [__main__] Starting bot polling
[2025-12-04 22:27:17,436] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 22:27:17,436] [INFO] [__main__] Starting bot polling
[2025-12-04 22:46:09,962] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 22:46:09,963] [INFO] [__main__] Starting bot polling
[2025-12-04 22:46:09,963] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 22:46:10,175] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 22:48:33,139] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-04 22:48:33,140] [INFO] [aiogram.event] Update id=131879709 is handled. Duration 281 ms by bot id=8440100118
[2025-12-04 22:48:39,479] [INFO] [aiogram.event] Update id=131879710 is handled. Duration 156 ms by bot id=8440100118
[2025-12-04 22:48:46,390] [INFO] [aiogram.event] Update id=131879711 is handled. Duration 510 ms by bot id=8440100118
[2025-12-04 22:48:49,463] [INFO] [aiogram.event] Update id=131879712 is handled. Duration 1740 ms by bot id=8440100118
[2025-12-04 22:48:49,930] [INFO] [aiogram.event] Update id=131879713 is handled. Duration 567 ms by bot id=8440100118
[2025-12-04 22:48:49,938] [INFO] [aiogram.event] Update id=131879714 is handled. Duration 163 ms by bot id=8440100118
[2025-12-04 22:48:50,476] [INFO] [aiogram.event] Update id=131879715 is handled. Duration 156 ms by bot id=8440100118
[2025-12-04 22:49:06,360] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-04 22:49:06,360] [INFO] [aiogram.event] Update id=131879716 is handled. Duration 187 ms by bot id=8440100118
[2025-12-04 22:49:07,854] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-04 22:49:07,854] [INFO] [aiogram.event] Update id=131879717 is handled. Duration 165 ms by bot id=8440100118
[2025-12-04 22:49:09,839] [INFO] [aiogram.event] Update id=131879718 is handled. Duration 136 ms by bot id=8440100118
[2025-12-04 22:49:10,991] [INFO] [aiogram.event] Update id=131879719 is handled. Duration 209 ms by bot id=8440100118
[2025-12-04 22:49:12,203] [INFO] [aiogram.event] Update id=131879720 is handled. Duration 305 ms by bot id=8440100118
[2025-12-04 22:49:13,426] [INFO] [aiogram.event] Update id=131879721 is handled. Duration 136 ms by bot id=8440100118
[2025-12-04 22:49:19,883] [INFO] [aiogram.event] Update id=131879722 is handled. Duration 393 ms by bot id=8440100118
[2025-12-04 23:01:51,268] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-12-04 23:01:51,269] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 23:02:03,302] [INFO] [aiogram.dispatcher] Connection established (tryings = 1, bot id = 8440100118)
[2025-12-04 23:26:01,045] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 23:26:01,046] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 23:26:01,047] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 23:26:01,311] [INFO] [__main__] Bot shutdown complete
[2025-12-04 23:26:01,311] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 23:26:06,937] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 23:26:06,938] [INFO] [__main__] Starting bot polling
[2025-12-04 23:26:06,938] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 23:26:07,215] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 23:27:03,456] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-04 23:27:03,456] [INFO] [aiogram.event] Update id=131879723 is handled. Duration 207 ms by bot id=8440100118
[2025-12-04 23:27:05,842] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-04 23:27:05,842] [INFO] [aiogram.event] Update id=131879724 is handled. Duration 211 ms by bot id=8440100118
[2025-12-04 23:27:12,274] [WARNING] [Bot.handlers.finances] Failed to edit income message 3182: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:27:12,432] [INFO] [aiogram.event] Update id=131879725 is handled. Duration 222 ms by bot id=8440100118
[2025-12-04 23:27:24,359] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-04 23:27:24,439] [INFO] [aiogram.event] Update id=131879726 is handled. Duration 83 ms by bot id=8440100118
[2025-12-04 23:29:05,727] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-04 23:29:05,727] [INFO] [aiogram.event] Update id=131879727 is handled. Duration 176 ms by bot id=8440100118
[2025-12-04 23:29:06,672] [WARNING] [Bot.handlers.finances] Failed to edit income message 3189: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:29:06,825] [INFO] [aiogram.event] Update id=131879728 is handled. Duration 212 ms by bot id=8440100118
[2025-12-04 23:29:07,825] [INFO] [aiogram.event] Update id=131879729 is handled. Duration 161 ms by bot id=8440100118
[2025-12-04 23:29:08,647] [INFO] [aiogram.event] Update id=131879730 is handled. Duration 147 ms by bot id=8440100118
[2025-12-04 23:29:09,495] [INFO] [aiogram.event] Update id=131879731 is handled. Duration 150 ms by bot id=8440100118
[2025-12-04 23:29:10,065] [INFO] [aiogram.event] Update id=131879732 is handled. Duration 171 ms by bot id=8440100118
[2025-12-04 23:29:12,842] [INFO] [aiogram.event] Update id=131879733 is handled. Duration 247 ms by bot id=8440100118
[2025-12-04 23:29:25,829] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 16704.6
[2025-12-04 23:29:26,081] [INFO] [aiogram.event] Update id=131879734 is handled. Duration 417 ms by bot id=8440100118
[2025-12-04 23:29:27,416] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 11136.4
[2025-12-04 23:29:27,601] [INFO] [aiogram.event] Update id=131879735 is handled. Duration 381 ms by bot id=8440100118
[2025-12-04 23:29:28,770] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 11136.4
[2025-12-04 23:29:29,031] [INFO] [aiogram.event] Update id=131879736 is handled. Duration 423 ms by bot id=8440100118
[2025-12-04 23:29:30,106] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 11136.4
[2025-12-04 23:29:30,280] [INFO] [aiogram.event] Update id=131879737 is handled. Duration 424 ms by bot id=8440100118
[2025-12-04 23:29:31,311] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 5568.2
[2025-12-04 23:29:31,398] [INFO] [Bot.database.crud] Fetched savings for user 8440100118
[2025-12-04 23:29:31,485] [INFO] [Bot.database.crud] Fetched savings map for user 8440100118
[2025-12-04 23:29:31,485] [INFO] [Bot.database.crud] Fetched wishes for user 8440100118
[2025-12-04 23:29:31,485] [INFO] [aiogram.event] Update id=131879738 is handled. Duration 344 ms by bot id=8440100118
[2025-12-04 23:29:38,282] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-04 23:29:38,360] [INFO] [Bot.handlers.wishlist] User 838347504 opened empty wishlist
[2025-12-04 23:29:38,360] [INFO] [aiogram.event] Update id=131879739 is handled. Duration 81 ms by bot id=8440100118
[2025-12-04 23:29:43,004] [INFO] [Bot.database.crud] Fetched purchases for user 838347504
[2025-12-04 23:29:43,106] [INFO] [aiogram.event] Update id=131879740 is handled. Duration 108 ms by bot id=8440100118
[2025-12-04 23:45:30,970] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-04 23:45:30,971] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-04 23:45:30,972] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-04 23:45:31,227] [INFO] [__main__] Bot shutdown complete
[2025-12-04 23:45:31,227] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 23:45:34,819] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-04 23:45:34,820] [INFO] [__main__] Starting bot polling
[2025-12-04 23:45:34,820] [INFO] [aiogram.dispatcher] Start polling
[2025-12-04 23:45:35,031] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-04 23:47:16,376] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-04 23:47:16,376] [INFO] [aiogram.event] Update id=131879741 is handled. Duration 191 ms by bot id=8440100118
[2025-12-04 23:47:19,992] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-04 23:47:19,993] [INFO] [aiogram.event] Update id=131879742 is handled. Duration 180 ms by bot id=8440100118
[2025-12-04 23:47:22,972] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:23,035] [INFO] [aiogram.event] Update id=131879743 is handled. Duration 119 ms by bot id=8440100118
[2025-12-04 23:47:25,646] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:25,716] [INFO] [aiogram.event] Update id=131879744 is handled. Duration 127 ms by bot id=8440100118
[2025-12-04 23:47:38,061] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:38,125] [INFO] [aiogram.event] Update id=131879745 is handled. Duration 125 ms by bot id=8440100118
[2025-12-04 23:47:39,213] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:39,304] [INFO] [aiogram.event] Update id=131879746 is handled. Duration 145 ms by bot id=8440100118
[2025-12-04 23:47:40,131] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:40,197] [INFO] [aiogram.event] Update id=131879747 is handled. Duration 126 ms by bot id=8440100118
[2025-12-04 23:47:41,074] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:41,138] [INFO] [aiogram.event] Update id=131879748 is handled. Duration 117 ms by bot id=8440100118
[2025-12-04 23:47:42,064] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:42,129] [INFO] [aiogram.event] Update id=131879749 is handled. Duration 123 ms by bot id=8440100118
[2025-12-04 23:47:43,068] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:43,142] [INFO] [aiogram.event] Update id=131879750 is handled. Duration 129 ms by bot id=8440100118
[2025-12-04 23:47:44,093] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:44,194] [INFO] [aiogram.event] Update id=131879751 is handled. Duration 159 ms by bot id=8440100118
[2025-12-04 23:47:45,113] [WARNING] [Bot.handlers.finances] Failed to edit income message 3216: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:47:45,176] [INFO] [aiogram.event] Update id=131879752 is handled. Duration 117 ms by bot id=8440100118
[2025-12-04 23:47:52,894] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-04 23:47:52,976] [INFO] [aiogram.event] Update id=131879753 is handled. Duration 85 ms by bot id=8440100118
[2025-12-04 23:48:58,763] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-04 23:48:58,763] [INFO] [aiogram.event] Update id=131879754 is handled. Duration 155 ms by bot id=8440100118
[2025-12-04 23:48:59,926] [WARNING] [Bot.handlers.finances] Failed to edit income message 3231: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:48:59,994] [INFO] [aiogram.event] Update id=131879755 is handled. Duration 128 ms by bot id=8440100118
[2025-12-04 23:49:00,793] [WARNING] [Bot.handlers.finances] Failed to edit income message 3231: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:49:00,855] [INFO] [aiogram.event] Update id=131879756 is handled. Duration 117 ms by bot id=8440100118
[2025-12-04 23:49:01,080] [WARNING] [Bot.handlers.finances] Failed to edit income message 3231: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:49:01,147] [INFO] [aiogram.event] Update id=131879757 is handled. Duration 125 ms by bot id=8440100118
[2025-12-04 23:49:01,303] [WARNING] [Bot.handlers.finances] Failed to edit income message 3231: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:49:01,373] [INFO] [aiogram.event] Update id=131879758 is handled. Duration 125 ms by bot id=8440100118
[2025-12-04 23:49:01,507] [WARNING] [Bot.handlers.finances] Failed to edit income message 3231: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:49:01,573] [INFO] [aiogram.event] Update id=131879759 is handled. Duration 130 ms by bot id=8440100118
[2025-12-04 23:49:02,619] [INFO] [aiogram.event] Update id=131879760 is handled. Duration 244 ms by bot id=8440100118
[2025-12-04 23:49:14,960] [INFO] [aiogram.event] Update id=131879761 is handled. Duration 454 ms by bot id=8440100118
[2025-12-04 23:49:17,729] [INFO] [aiogram.event] Update id=131879762 is handled. Duration 306 ms by bot id=8440100118
[2025-12-04 23:49:19,321] [INFO] [aiogram.event] Update id=131879763 is handled. Duration 289 ms by bot id=8440100118
[2025-12-04 23:50:39,145] [INFO] [aiogram.event] Update id=131879764 is handled. Duration 302 ms by bot id=8440100118
[2025-12-04 23:50:40,420] [INFO] [Bot.database.crud] Fetched savings for user 8440100118
[2025-12-04 23:50:40,499] [INFO] [Bot.database.crud] Fetched savings map for user 8440100118
[2025-12-04 23:50:40,499] [INFO] [Bot.database.crud] Fetched wishes for user 8440100118
[2025-12-04 23:50:40,499] [INFO] [aiogram.event] Update id=131879765 is handled. Duration 298 ms by bot id=8440100118
[2025-12-04 23:50:42,179] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-04 23:50:42,179] [INFO] [aiogram.event] Update id=131879766 is handled. Duration 159 ms by bot id=8440100118
[2025-12-04 23:50:43,515] [WARNING] [Bot.handlers.finances] Failed to edit income message 3251: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:50:43,583] [INFO] [aiogram.event] Update id=131879767 is handled. Duration 125 ms by bot id=8440100118
[2025-12-04 23:50:44,265] [WARNING] [Bot.handlers.finances] Failed to edit income message 3251: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:50:44,354] [INFO] [aiogram.event] Update id=131879768 is handled. Duration 144 ms by bot id=8440100118
[2025-12-04 23:50:45,951] [WARNING] [Bot.handlers.finances] Failed to edit income message 3251: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:50:46,120] [INFO] [aiogram.event] Update id=131879769 is handled. Duration 238 ms by bot id=8440100118
[2025-12-04 23:50:46,241] [WARNING] [Bot.handlers.finances] Failed to edit income message 3251: Telegram server says - Bad Request: message can't be edited
[2025-12-04 23:50:46,381] [INFO] [aiogram.event] Update id=131879770 is handled. Duration 208 ms by bot id=8440100118
[2025-12-04 23:50:48,034] [INFO] [aiogram.event] Update id=131879771 is handled. Duration 258 ms by bot id=8440100118
[2025-12-04 23:52:10,221] [INFO] [aiogram.event] Update id=131879772 is handled. Duration 290 ms by bot id=8440100118
[2025-12-04 23:52:11,372] [INFO] [aiogram.event] Update id=131879773 is handled. Duration 326 ms by bot id=8440100118
[2025-12-04 23:52:12,586] [INFO] [aiogram.event] Update id=131879774 is handled. Duration 309 ms by bot id=8440100118
[2025-12-04 23:52:13,990] [INFO] [aiogram.event] Update id=131879775 is handled. Duration 321 ms by bot id=8440100118
[2025-12-04 23:52:20,584] [INFO] [Bot.database.crud] Fetched savings for user 8440100118
[2025-12-04 23:52:20,659] [INFO] [Bot.database.crud] Fetched savings map for user 8440100118
[2025-12-04 23:52:20,660] [INFO] [Bot.database.crud] Fetched wishes for user 8440100118
[2025-12-04 23:52:20,660] [INFO] [aiogram.event] Update id=131879776 is handled. Duration 289 ms by bot id=8440100118
[2025-12-05 00:07:33,603] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 00:07:33,604] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 00:07:33,604] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 00:07:33,858] [INFO] [__main__] Bot shutdown complete
[2025-12-05 00:07:33,859] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 00:07:37,487] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 00:07:37,488] [INFO] [__main__] Starting bot polling
[2025-12-05 00:07:37,488] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 00:07:37,713] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 00:07:52,165] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 00:07:52,165] [INFO] [aiogram.event] Update id=131879777 is handled. Duration 194 ms by bot id=8440100118
[2025-12-05 00:07:54,565] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 00:07:54,565] [INFO] [aiogram.event] Update id=131879778 is handled. Duration 260 ms by bot id=8440100118
[2025-12-05 00:07:59,843] [INFO] [aiogram.event] Update id=131879779 is handled. Duration 137 ms by bot id=8440100118
[2025-12-05 00:08:11,163] [INFO] [aiogram.event] Update id=131879780 is handled. Duration 129 ms by bot id=8440100118
[2025-12-05 00:08:13,659] [INFO] [aiogram.event] Update id=131879781 is handled. Duration 276 ms by bot id=8440100118
[2025-12-05 00:08:14,299] [INFO] [aiogram.event] Update id=131879782 is handled. Duration 129 ms by bot id=8440100118
[2025-12-05 00:08:15,395] [INFO] [aiogram.event] Update id=131879783 is handled. Duration 149 ms by bot id=8440100118
[2025-12-05 00:08:17,009] [INFO] [aiogram.event] Update id=131879784 is handled. Duration 323 ms by bot id=8440100118
[2025-12-05 00:08:45,434] [INFO] [aiogram.event] Update id=131879785 is handled. Duration 401 ms by bot id=8440100118
[2025-12-05 00:08:46,554] [INFO] [aiogram.event] Update id=131879786 is handled. Duration 326 ms by bot id=8440100118
[2025-12-05 00:08:47,605] [INFO] [aiogram.event] Update id=131879787 is handled. Duration 344 ms by bot id=8440100118
[2025-12-05 00:08:48,898] [INFO] [aiogram.event] Update id=131879788 is handled. Duration 706 ms by bot id=8440100118
[2025-12-05 00:08:50,172] [INFO] [Bot.database.crud] Fetched savings for user 8440100118
[2025-12-05 00:08:50,258] [INFO] [Bot.database.crud] Fetched savings map for user 8440100118
[2025-12-05 00:08:50,258] [INFO] [Bot.database.crud] Fetched wishes for user 8440100118
[2025-12-05 00:08:50,259] [INFO] [aiogram.event] Update id=131879789 is handled. Duration 318 ms by bot id=8440100118
[2025-12-05 00:08:51,764] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 00:08:51,764] [INFO] [aiogram.event] Update id=131879790 is handled. Duration 287 ms by bot id=8440100118
[2025-12-05 11:07:31,978] [INFO] [aiogram.event] Update id=131879791 is handled. Duration 279 ms by bot id=8440100118
[2025-12-05 11:07:34,235] [INFO] [aiogram.event] Update id=131879792 is handled. Duration 157 ms by bot id=8440100118
[2025-12-05 11:08:13,497] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 11:08:13,591] [INFO] [aiogram.event] Update id=131879793 is handled. Duration 97 ms by bot id=8440100118
[2025-12-05 11:22:43,631] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 11:22:43,633] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 11:22:43,634] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 11:22:43,900] [INFO] [__main__] Bot shutdown complete
[2025-12-05 11:22:43,902] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 11:22:48,908] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 11:22:48,908] [INFO] [__main__] Starting bot polling
[2025-12-05 11:22:48,908] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 11:22:49,106] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 11:22:58,841] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 11:22:58,841] [INFO] [aiogram.event] Update id=131879794 is handled. Duration 212 ms by bot id=8440100118
[2025-12-05 11:23:03,539] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 11:23:03,539] [INFO] [aiogram.event] Update id=131879795 is handled. Duration 252 ms by bot id=8440100118
[2025-12-05 11:23:07,738] [INFO] [aiogram.event] Update id=131879796 is handled. Duration 157 ms by bot id=8440100118
[2025-12-05 11:23:09,150] [INFO] [aiogram.event] Update id=131879797 is handled. Duration 147 ms by bot id=8440100118
[2025-12-05 11:23:11,767] [INFO] [aiogram.event] Update id=131879798 is handled. Duration 404 ms by bot id=8440100118
[2025-12-05 11:23:12,845] [INFO] [aiogram.event] Update id=131879799 is handled. Duration 139 ms by bot id=8440100118
[2025-12-05 11:23:13,197] [INFO] [aiogram.event] Update id=131879800 is handled. Duration 149 ms by bot id=8440100118
[2025-12-05 11:23:14,931] [INFO] [aiogram.event] Update id=131879801 is handled. Duration 199 ms by bot id=8440100118
[2025-12-05 11:23:16,437] [INFO] [aiogram.event] Update id=131879802 is handled. Duration 239 ms by bot id=8440100118
[2025-12-05 11:23:19,580] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-12-05 11:23:19,756] [INFO] [aiogram.event] Update id=131879803 is handled. Duration 359 ms by bot id=8440100118
[2025-12-05 11:23:20,787] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-12-05 11:23:20,950] [INFO] [aiogram.event] Update id=131879804 is handled. Duration 345 ms by bot id=8440100118
[2025-12-05 11:23:22,021] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-12-05 11:23:22,192] [INFO] [aiogram.event] Update id=131879805 is handled. Duration 370 ms by bot id=8440100118
[2025-12-05 11:23:23,417] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-12-05 11:23:23,595] [INFO] [aiogram.event] Update id=131879806 is handled. Duration 339 ms by bot id=8440100118
[2025-12-05 11:23:24,804] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-12-05 11:23:24,886] [INFO] [Bot.database.crud] Fetched savings for user 8440100118
[2025-12-05 11:23:24,970] [INFO] [Bot.database.crud] Fetched savings map for user 8440100118
[2025-12-05 11:23:24,970] [INFO] [Bot.database.crud] Fetched wishes for user 8440100118
[2025-12-05 11:23:24,970] [INFO] [aiogram.event] Update id=131879807 is handled. Duration 352 ms by bot id=8440100118
[2025-12-05 11:23:41,797] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 11:23:41,876] [INFO] [aiogram.event] Update id=131879808 is handled. Duration 82 ms by bot id=8440100118
[2025-12-05 11:58:51,244] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 11:58:51,245] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 11:58:51,246] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 11:58:51,499] [INFO] [__main__] Bot shutdown complete
[2025-12-05 11:58:51,500] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 11:58:55,121] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 11:58:55,122] [INFO] [__main__] Starting bot polling
[2025-12-05 11:58:55,122] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 11:58:55,420] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 11:59:09,315] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 11:59:09,315] [INFO] [aiogram.event] Update id=131879809 is handled. Duration 210 ms by bot id=8440100118
[2025-12-05 11:59:10,958] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 11:59:10,958] [INFO] [aiogram.event] Update id=131879810 is handled. Duration 420 ms by bot id=8440100118
[2025-12-05 11:59:12,977] [INFO] [aiogram.event] Update id=131879811 is handled. Duration 145 ms by bot id=8440100118
[2025-12-05 11:59:13,450] [INFO] [aiogram.event] Update id=131879812 is handled. Duration 152 ms by bot id=8440100118
[2025-12-05 11:59:14,412] [INFO] [aiogram.event] Update id=131879813 is handled. Duration 140 ms by bot id=8440100118
[2025-12-05 11:59:15,466] [INFO] [aiogram.event] Update id=131879814 is handled. Duration 161 ms by bot id=8440100118
[2025-12-05 11:59:15,977] [INFO] [aiogram.event] Update id=131879815 is handled. Duration 150 ms by bot id=8440100118
[2025-12-05 11:59:16,533] [INFO] [aiogram.event] Update id=131879816 is handled. Duration 167 ms by bot id=8440100118
[2025-12-05 11:59:18,110] [INFO] [aiogram.event] Update id=131879817 is handled. Duration 230 ms by bot id=8440100118
[2025-12-05 11:59:21,180] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-12-05 11:59:21,351] [INFO] [aiogram.event] Update id=131879818 is handled. Duration 347 ms by bot id=8440100118
[2025-12-05 11:59:26,575] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-12-05 11:59:26,824] [INFO] [aiogram.event] Update id=131879819 is handled. Duration 563 ms by bot id=8440100118
[2025-12-05 11:59:28,003] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-12-05 11:59:28,252] [INFO] [aiogram.event] Update id=131879820 is handled. Duration 587 ms by bot id=8440100118
[2025-12-05 11:59:29,382] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-12-05 11:59:29,572] [INFO] [aiogram.event] Update id=131879821 is handled. Duration 497 ms by bot id=8440100118
[2025-12-05 11:59:37,203] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-12-05 11:59:37,291] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-05 11:59:37,388] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 11:59:37,388] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 11:59:37,388] [INFO] [aiogram.event] Update id=131879822 is handled. Duration 354 ms by bot id=8440100118
[2025-12-05 12:00:09,685] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 12:00:09,687] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 12:00:09,687] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 12:00:09,948] [INFO] [__main__] Bot shutdown complete
[2025-12-05 12:00:09,949] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 12:00:31,974] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 12:00:31,974] [INFO] [__main__] Starting bot polling
[2025-12-05 12:00:31,974] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 12:00:32,153] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 12:00:42,150] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 12:00:42,150] [INFO] [aiogram.event] Update id=131879823 is handled. Duration 238 ms by bot id=8440100118
[2025-12-05 12:00:44,757] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 12:00:44,757] [INFO] [aiogram.event] Update id=131879824 is handled. Duration 272 ms by bot id=8440100118
[2025-12-05 12:00:46,518] [INFO] [aiogram.event] Update id=131879825 is handled. Duration 226 ms by bot id=8440100118
[2025-12-05 12:00:46,937] [INFO] [aiogram.event] Update id=131879826 is handled. Duration 156 ms by bot id=8440100118
[2025-12-05 12:00:47,123] [INFO] [aiogram.event] Update id=131879827 is handled. Duration 180 ms by bot id=8440100118
[2025-12-05 12:00:48,998] [INFO] [aiogram.event] Update id=131879828 is handled. Duration 330 ms by bot id=8440100118
[2025-12-05 12:00:50,599] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-12-05 12:00:50,892] [INFO] [aiogram.event] Update id=131879829 is handled. Duration 706 ms by bot id=8440100118
[2025-12-05 12:00:51,862] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-12-05 12:00:52,044] [INFO] [aiogram.event] Update id=131879830 is handled. Duration 329 ms by bot id=8440100118
[2025-12-05 12:00:53,275] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-12-05 12:00:53,461] [INFO] [aiogram.event] Update id=131879831 is handled. Duration 373 ms by bot id=8440100118
[2025-12-05 12:00:55,688] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-12-05 12:00:55,951] [INFO] [aiogram.event] Update id=131879832 is handled. Duration 565 ms by bot id=8440100118
[2025-12-05 12:00:57,602] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-12-05 12:00:57,701] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-05 12:00:57,795] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 12:00:57,795] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 12:00:57,795] [INFO] [aiogram.event] Update id=131879833 is handled. Duration 387 ms by bot id=8440100118
[2025-12-05 12:01:37,638] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 12:01:37,723] [INFO] [aiogram.event] Update id=131879834 is handled. Duration 88 ms by bot id=8440100118
[2025-12-05 12:01:45,493] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 12:01:45,583] [INFO] [aiogram.event] Update id=131879835 is handled. Duration 94 ms by bot id=8440100118
[2025-12-05 13:01:13,537] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 13:01:13,542] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 13:01:13,542] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 13:01:13,802] [INFO] [__main__] Bot shutdown complete
[2025-12-05 13:01:13,804] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 13:01:18,601] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 13:01:18,602] [INFO] [__main__] Starting bot polling
[2025-12-05 13:01:18,602] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 13:01:18,860] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 13:06:18,044] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 13:06:18,044] [INFO] [aiogram.event] Update id=131879836 is handled. Duration 206 ms by bot id=8440100118
[2025-12-05 13:06:19,826] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 13:06:19,826] [INFO] [aiogram.event] Update id=131879837 is handled. Duration 260 ms by bot id=8440100118
[2025-12-05 13:06:22,622] [INFO] [aiogram.event] Update id=131879838 is handled. Duration 188 ms by bot id=8440100118
[2025-12-05 13:06:23,741] [INFO] [aiogram.event] Update id=131879839 is handled. Duration 157 ms by bot id=8440100118
[2025-12-05 13:06:24,532] [INFO] [aiogram.event] Update id=131879840 is handled. Duration 166 ms by bot id=8440100118
[2025-12-05 13:06:26,059] [INFO] [aiogram.event] Update id=131879841 is handled. Duration 260 ms by bot id=8440100118
[2025-12-05 13:06:35,117] [INFO] [aiogram.event] Update id=131879842 is handled. Duration 0 ms by bot id=8440100118
[2025-12-05 13:06:38,104] [INFO] [aiogram.event] Update id=131879843 is handled. Duration 0 ms by bot id=8440100118
[2025-12-05 13:06:39,469] [INFO] [aiogram.event] Update id=131879844 is handled. Duration 0 ms by bot id=8440100118
[2025-12-05 13:06:40,063] [INFO] [aiogram.event] Update id=131879845 is handled. Duration 0 ms by bot id=8440100118
[2025-12-05 13:06:58,555] [INFO] [aiogram.event] Update id=131879846 is handled. Duration 87 ms by bot id=8440100118
[2025-12-05 13:09:45,563] [INFO] [aiogram.event] Update id=131879847 is handled. Duration 1 ms by bot id=8440100118
[2025-12-05 13:57:38,459] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 13:57:38,460] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 13:57:38,460] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 13:57:38,717] [INFO] [__main__] Bot shutdown complete
[2025-12-05 13:57:38,717] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 13:57:42,339] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 13:57:42,340] [INFO] [__main__] Starting bot polling
[2025-12-05 13:57:42,340] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 13:57:42,556] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 13:57:44,388] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 13:57:44,388] [INFO] [aiogram.event] Update id=131879848 is handled. Duration 215 ms by bot id=8440100118
[2025-12-05 13:57:46,095] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 13:57:46,095] [INFO] [aiogram.event] Update id=131879849 is handled. Duration 530 ms by bot id=8440100118
[2025-12-05 13:57:48,244] [INFO] [aiogram.event] Update id=131879850 is handled. Duration 152 ms by bot id=8440100118
[2025-12-05 13:57:48,812] [INFO] [aiogram.event] Update id=131879851 is handled. Duration 161 ms by bot id=8440100118
[2025-12-05 13:57:49,224] [INFO] [aiogram.event] Update id=131879852 is handled. Duration 145 ms by bot id=8440100118
[2025-12-05 13:57:51,318] [INFO] [aiogram.event] Update id=131879853 is handled. Duration 538 ms by bot id=8440100118
[2025-12-05 13:57:55,814] [INFO] [aiogram.event] Update id=131879854 is handled. Duration 0 ms by bot id=8440100118
[2025-12-05 14:13:01,980] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 14:13:01,981] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 14:13:01,981] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 14:13:02,241] [INFO] [__main__] Bot shutdown complete
[2025-12-05 14:13:02,242] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 14:13:05,888] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 14:13:05,889] [INFO] [__main__] Starting bot polling
[2025-12-05 14:13:05,889] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 14:13:06,079] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 14:13:09,847] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 14:13:09,847] [INFO] [aiogram.event] Update id=131879855 is handled. Duration 192 ms by bot id=8440100118
[2025-12-05 14:13:13,286] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 14:13:13,286] [INFO] [aiogram.event] Update id=131879856 is handled. Duration 275 ms by bot id=8440100118
[2025-12-05 14:13:16,321] [INFO] [aiogram.event] Update id=131879857 is handled. Duration 1041 ms by bot id=8440100118
[2025-12-05 14:13:16,489] [WARNING] [Bot.handlers.finances] Failed to edit income message 3403: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-12-05 14:13:16,503] [INFO] [aiogram.event] Update id=131879858 is handled. Duration 357 ms by bot id=8440100118
[2025-12-05 14:13:16,551] [INFO] [aiogram.event] Update id=131879859 is handled. Duration 247 ms by bot id=8440100118
[2025-12-05 14:13:18,980] [INFO] [aiogram.event] Update id=131879860 is handled. Duration 157 ms by bot id=8440100118
[2025-12-05 14:13:20,616] [INFO] [aiogram.event] Update id=131879861 is handled. Duration 151 ms by bot id=8440100118
[2025-12-05 14:13:26,027] [INFO] [aiogram.event] Update id=131879862 is handled. Duration 312 ms by bot id=8440100118
[2025-12-05 14:13:36,448] [INFO] [aiogram.event] Update id=131879863 is handled. Duration 1205 ms by bot id=8440100118
[2025-12-05 14:14:06,512] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-12-05 14:14:06,603] [INFO] [aiogram.event] Update id=131879864 is handled. Duration 226 ms by bot id=8440100118
[2025-12-05 14:14:19,543] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-12-05 14:14:19,704] [INFO] [aiogram.event] Update id=131879865 is handled. Duration 528 ms by bot id=8440100118
[2025-12-05 14:15:03,929] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-12-05 14:15:04,010] [INFO] [aiogram.event] Update id=131879866 is handled. Duration 223 ms by bot id=8440100118
[2025-12-05 14:15:07,994] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-12-05 14:15:08,076] [INFO] [aiogram.event] Update id=131879867 is handled. Duration 244 ms by bot id=8440100118
[2025-12-05 14:15:11,977] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-12-05 14:15:11,977] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-05 14:15:12,073] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 14:15:12,073] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 14:15:12,073] [INFO] [aiogram.event] Update id=131879868 is handled. Duration 309 ms by bot id=8440100118
[2025-12-05 14:28:14,185] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 14:28:14,265] [INFO] [Bot.handlers.wishlist] User 838347504 opened empty wishlist
[2025-12-05 14:28:14,265] [INFO] [aiogram.event] Update id=131879869 is handled. Duration 81 ms by bot id=8440100118
[2025-12-05 14:28:17,843] [INFO] [Bot.database.crud] Fetched purchases for user 838347504
[2025-12-05 14:28:17,935] [INFO] [aiogram.event] Update id=131879870 is handled. Duration 93 ms by bot id=8440100118
[2025-12-05 15:10:00,785] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 15:10:01,007] [INFO] [aiogram.event] Update id=131879871 is handled. Duration 223 ms by bot id=8440100118
[2025-12-05 16:00:50,360] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 16:00:50,361] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 16:00:50,362] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 16:00:50,623] [INFO] [__main__] Bot shutdown complete
[2025-12-05 16:00:50,623] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 16:00:54,211] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 16:00:54,212] [INFO] [__main__] Starting bot polling
[2025-12-05 16:00:54,212] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 16:00:54,421] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 16:01:15,490] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 16:01:15,490] [INFO] [aiogram.event] Update id=131879872 is handled. Duration 256 ms by bot id=8440100118
[2025-12-05 16:01:21,536] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 16:01:21,537] [INFO] [aiogram.event] Update id=131879873 is handled. Duration 476 ms by bot id=8440100118
[2025-12-05 16:01:28,080] [INFO] [aiogram.event] Update id=131879874 is handled. Duration 371 ms by bot id=8440100118
[2025-12-05 16:01:28,941] [INFO] [aiogram.event] Update id=131879875 is handled. Duration 145 ms by bot id=8440100118
[2025-12-05 16:01:29,620] [INFO] [aiogram.event] Update id=131879876 is handled. Duration 147 ms by bot id=8440100118
[2025-12-05 16:01:31,262] [INFO] [aiogram.event] Update id=131879877 is handled. Duration 403 ms by bot id=8440100118
[2025-12-05 16:02:42,774] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-12-05 16:02:42,860] [INFO] [aiogram.event] Update id=131879878 is handled. Duration 240 ms by bot id=8440100118
[2025-12-05 16:02:46,301] [INFO] [aiogram.event] Update id=131879879 is handled. Duration 371 ms by bot id=8440100118
[2025-12-05 16:02:50,422] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-12-05 16:02:50,522] [INFO] [aiogram.event] Update id=131879880 is handled. Duration 328 ms by bot id=8440100118
[2025-12-05 16:02:53,901] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-12-05 16:02:54,027] [INFO] [aiogram.event] Update id=131879881 is handled. Duration 281 ms by bot id=8440100118
[2025-12-05 16:02:57,398] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-12-05 16:02:57,480] [INFO] [aiogram.event] Update id=131879882 is handled. Duration 228 ms by bot id=8440100118
[2025-12-05 16:03:00,696] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-12-05 16:03:00,696] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-05 16:03:00,816] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 16:03:00,817] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 16:03:00,817] [INFO] [aiogram.event] Update id=131879883 is handled. Duration 273 ms by bot id=8440100118
[2025-12-05 16:12:38,708] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 16:12:38,867] [INFO] [aiogram.event] Update id=131879884 is handled. Duration 160 ms by bot id=8440100118
[2025-12-05 16:29:47,334] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 16:29:47,335] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 16:29:47,335] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 16:29:47,592] [INFO] [__main__] Bot shutdown complete
[2025-12-05 16:29:47,593] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 16:29:51,068] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 16:29:51,068] [INFO] [__main__] Starting bot polling
[2025-12-05 16:29:51,068] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 16:29:51,257] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 16:31:17,952] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 16:31:17,953] [INFO] [aiogram.event] Update id=131879885 is handled. Duration 214 ms by bot id=8440100118
[2025-12-05 16:31:26,524] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 16:31:26,524] [INFO] [aiogram.event] Update id=131879886 is handled. Duration 435 ms by bot id=8440100118
[2025-12-05 16:31:38,374] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 16:31:38,374] [INFO] [aiogram.event] Update id=131879887 is handled. Duration 96 ms by bot id=8440100118
[2025-12-05 16:31:43,703] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 16:31:43,703] [INFO] [aiogram.event] Update id=131879888 is handled. Duration 1016 ms by bot id=8440100118
[2025-12-05 16:31:55,382] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 16:31:55,383] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 16:31:55,384] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 16:31:55,490] [INFO] [aiogram.event] Update id=131879890 is handled. Duration 113 ms by bot id=8440100118
[2025-12-05 16:31:55,610] [INFO] [aiogram.event] Update id=131879889 is handled. Duration 233 ms by bot id=8440100118
[2025-12-05 16:31:55,631] [INFO] [aiogram.event] Update id=131879891 is handled. Duration 254 ms by bot id=8440100118
[2025-12-05 17:00:21,666] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 17:00:21,666] [INFO] [aiogram.event] Update id=131879892 is handled. Duration 262 ms by bot id=8440100118
[2025-12-05 17:00:26,068] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 17:00:26,068] [INFO] [aiogram.event] Update id=131879893 is handled. Duration 661 ms by bot id=8440100118
[2025-12-05 17:02:09,789] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 17:02:09,790] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 17:02:09,790] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 17:02:10,044] [INFO] [__main__] Bot shutdown complete
[2025-12-05 17:02:10,045] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 17:02:13,678] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 17:02:13,678] [INFO] [__main__] Starting bot polling
[2025-12-05 17:02:13,678] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 17:02:13,880] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 17:02:24,126] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 17:02:24,216] [INFO] [aiogram.event] Update id=131879894 is handled. Duration 321 ms by bot id=8440100118
[2025-12-05 17:02:27,314] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 17:02:27,315] [INFO] [aiogram.event] Update id=131879895 is handled. Duration 420 ms by bot id=8440100118
[2025-12-05 17:03:07,035] [INFO] [aiogram.event] Update id=131879896 is handled. Duration 317 ms by bot id=8440100118
[2025-12-05 17:03:08,066] [INFO] [aiogram.event] Update id=131879897 is handled. Duration 158 ms by bot id=8440100118
[2025-12-05 17:03:10,483] [INFO] [aiogram.event] Update id=131879898 is handled. Duration 160 ms by bot id=8440100118
[2025-12-05 17:03:12,245] [INFO] [aiogram.event] Update id=131879899 is handled. Duration 542 ms by bot id=8440100118
[2025-12-05 17:03:16,764] [INFO] [aiogram.event] Update id=131879900 is handled. Duration 343 ms by bot id=8440100118
[2025-12-05 17:03:28,514] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-12-05 17:03:28,619] [INFO] [aiogram.event] Update id=131879901 is handled. Duration 349 ms by bot id=8440100118
[2025-12-05 17:03:32,345] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-12-05 17:03:32,432] [INFO] [aiogram.event] Update id=131879902 is handled. Duration 240 ms by bot id=8440100118
[2025-12-05 17:03:35,979] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-12-05 17:03:36,062] [INFO] [aiogram.event] Update id=131879903 is handled. Duration 235 ms by bot id=8440100118
[2025-12-05 17:03:39,232] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-12-05 17:03:39,381] [INFO] [aiogram.event] Update id=131879904 is handled. Duration 311 ms by bot id=8440100118
[2025-12-05 17:03:42,532] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-12-05 17:03:42,532] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-05 17:03:42,618] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 17:03:42,618] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 17:03:42,619] [INFO] [aiogram.event] Update id=131879905 is handled. Duration 240 ms by bot id=8440100118
[2025-12-05 18:42:35,215] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 18:42:35,217] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 18:42:35,217] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 18:42:35,470] [INFO] [__main__] Bot shutdown complete
[2025-12-05 18:42:35,471] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 18:42:41,200] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 18:42:41,201] [INFO] [__main__] Starting bot polling
[2025-12-05 18:42:41,201] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 18:42:41,461] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 18:42:43,781] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 18:42:43,861] [INFO] [aiogram.event] Update id=131879906 is handled. Duration 373 ms by bot id=8440100118
[2025-12-05 18:42:54,316] [INFO] [aiogram.event] Update id=131879907 is not handled. Duration 1 ms by bot id=8440100118
[2025-12-05 18:42:54,316] [ERROR] [aiogram.event] Cause exception while process update id=131879907 by bot id=8440100118
NameError: name 'delete_welcome_message_if_exists' is not defined
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 175, in start_income_flow
    await delete_welcome_message_if_exists(message, state)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'delete_welcome_message_if_exists' is not defined
[2025-12-05 18:52:20,693] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 18:52:20,695] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 18:52:20,695] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 18:52:20,950] [INFO] [__main__] Bot shutdown complete
[2025-12-05 18:52:20,951] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 18:52:26,570] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 18:52:26,571] [INFO] [__main__] Starting bot polling
[2025-12-05 18:52:26,571] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 18:52:27,148] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 18:52:30,705] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 18:52:30,767] [INFO] [aiogram.event] Update id=131879908 is handled. Duration 279 ms by bot id=8440100118
[2025-12-05 18:52:33,279] [INFO] [aiogram.event] Update id=131879909 is not handled. Duration 1 ms by bot id=8440100118
[2025-12-05 18:52:33,279] [ERROR] [aiogram.event] Cause exception while process update id=131879909 by bot id=8440100118
NameError: name 'delete_welcome_message_if_exists' is not defined
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 175, in start_income_flow
    await delete_welcome_message_if_exists(message, state)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'delete_welcome_message_if_exists' is not defined
[2025-12-05 19:29:58,343] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 19:29:58,420] [INFO] [aiogram.event] Update id=131879910 is handled. Duration 311 ms by bot id=8440100118
[2025-12-05 19:30:00,121] [INFO] [aiogram.event] Update id=131879911 is not handled. Duration 1 ms by bot id=8440100118
[2025-12-05 19:30:00,122] [ERROR] [aiogram.event] Cause exception while process update id=131879911 by bot id=8440100118
NameError: name 'delete_welcome_message_if_exists' is not defined
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 175, in start_income_flow
    await state.clear()
          ~~~~~~~~~~~^^
NameError: name 'delete_welcome_message_if_exists' is not defined
[2025-12-05 19:54:04,851] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 19:54:04,853] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 19:54:04,853] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 19:54:05,105] [INFO] [__main__] Bot shutdown complete
[2025-12-05 19:54:05,106] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 19:54:19,855] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 19:54:19,856] [INFO] [__main__] Starting bot polling
[2025-12-05 19:54:19,856] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 19:54:21,074] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 19:54:49,062] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 19:54:49,139] [INFO] [aiogram.event] Update id=131879912 is handled. Duration 287 ms by bot id=8440100118
[2025-12-05 19:54:53,127] [INFO] [aiogram.event] Update id=131879913 is not handled. Duration 2 ms by bot id=8440100118
[2025-12-05 19:54:53,128] [ERROR] [aiogram.event] Cause exception while process update id=131879913 by bot id=8440100118
NameError: name 'delete_welcome_message_if_exists' is not defined
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 168, in start_income_flow
    await delete_welcome_message_if_exists(message, state)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'delete_welcome_message_if_exists' is not defined
[2025-12-05 20:16:38,349] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 20:16:38,351] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 20:16:38,351] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 20:16:38,611] [INFO] [__main__] Bot shutdown complete
[2025-12-05 20:16:38,611] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 20:16:44,371] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 20:16:44,372] [INFO] [__main__] Starting bot polling
[2025-12-05 20:16:44,372] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 20:16:44,590] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 20:16:47,345] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 20:16:47,413] [INFO] [aiogram.event] Update id=131879914 is handled. Duration 268 ms by bot id=8440100118
[2025-12-05 20:16:49,357] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 20:16:49,357] [INFO] [aiogram.event] Update id=131879915 is handled. Duration 377 ms by bot id=8440100118
[2025-12-05 20:16:52,619] [INFO] [aiogram.event] Update id=131879916 is handled. Duration 171 ms by bot id=8440100118
[2025-12-05 20:16:53,689] [INFO] [aiogram.event] Update id=131879917 is handled. Duration 327 ms by bot id=8440100118
[2025-12-05 20:16:54,389] [INFO] [aiogram.event] Update id=131879918 is handled. Duration 149 ms by bot id=8440100118
[2025-12-05 20:17:35,230] [INFO] [aiogram.event] Update id=131879919 is not handled. Duration 659 ms by bot id=8440100118
[2025-12-05 20:17:35,231] [ERROR] [aiogram.event] Cause exception while process update id=131879919 by bot id=8440100118
NameError: name 'new_sum' is not defined
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 353, in handle_income_received
    await state.update_data(income_sum=new_sum, income_message_id=income_message_id)
                                       ^^^^^^^
NameError: name 'new_sum' is not defined
[2025-12-05 20:17:39,962] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 30.0
[2025-12-05 20:17:40,075] [INFO] [aiogram.event] Update id=131879920 is handled. Duration 269 ms by bot id=8440100118
[2025-12-05 20:17:44,549] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 20.0
[2025-12-05 20:17:44,701] [INFO] [aiogram.event] Update id=131879921 is handled. Duration 481 ms by bot id=8440100118
[2025-12-05 20:17:50,470] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 20.0
[2025-12-05 20:17:50,567] [INFO] [aiogram.event] Update id=131879922 is handled. Duration 258 ms by bot id=8440100118
[2025-12-05 20:17:55,366] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 20.0
[2025-12-05 20:17:55,658] [INFO] [aiogram.event] Update id=131879923 is handled. Duration 973 ms by bot id=8440100118
[2025-12-05 20:17:59,068] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 10.0
[2025-12-05 20:17:59,069] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-05 20:17:59,278] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 20:17:59,278] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 20:17:59,278] [INFO] [aiogram.event] Update id=131879924 is handled. Duration 527 ms by bot id=8440100118
[2025-12-05 20:18:08,118] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 20:18:08,202] [INFO] [Bot.handlers.wishlist] User 838347504 opened empty wishlist
[2025-12-05 20:18:08,202] [INFO] [aiogram.event] Update id=131879925 is handled. Duration 86 ms by bot id=8440100118
[2025-12-05 20:18:09,580] [INFO] [aiogram.event] Update id=131879926 is handled. Duration 88 ms by bot id=8440100118
[2025-12-05 20:42:15,650] [INFO] [aiogram.event] Update id=131879927 is handled. Duration 102 ms by bot id=8440100118
[2025-12-05 20:42:50,060] [INFO] [aiogram.event] Update id=131879928 is handled. Duration 252 ms by bot id=8440100118
[2025-12-05 20:42:52,273] [INFO] [aiogram.event] Update id=131879929 is handled. Duration 405 ms by bot id=8440100118
[2025-12-05 20:42:55,546] [INFO] [Bot.database.crud] Added wish 1 for user 838347504
[2025-12-05 20:42:55,656] [INFO] [Bot.handlers.callbacks] User 838347504 added wish 1
[2025-12-05 20:42:55,656] [INFO] [aiogram.event] Update id=131879930 is handled. Duration 128 ms by bot id=8440100118
[2025-12-05 20:43:01,129] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-05 20:43:01,130] [INFO] [aiogram.event] Update id=131879931 is handled. Duration 88 ms by bot id=8440100118
[2025-12-05 20:43:02,214] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 20:43:02,389] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 20:43:02,389] [INFO] [aiogram.event] Update id=131879932 is handled. Duration 177 ms by bot id=8440100118
[2025-12-05 20:43:06,806] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 20:43:06,806] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 20:43:06,899] [INFO] [aiogram.event] Update id=131879933 is handled. Duration 95 ms by bot id=8440100118
[2025-12-05 20:43:37,688] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-05 20:43:37,688] [INFO] [aiogram.event] Update id=131879934 is handled. Duration 88 ms by bot id=8440100118
[2025-12-05 20:44:52,210] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 20:44:52,300] [INFO] [aiogram.event] Update id=131879935 is handled. Duration 92 ms by bot id=8440100118
[2025-12-05 20:44:55,708] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 20:44:55,791] [INFO] [aiogram.event] Update id=131879936 is handled. Duration 86 ms by bot id=8440100118
[2025-12-05 20:53:48,251] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 20:53:48,251] [INFO] [aiogram.event] Update id=131879937 is handled. Duration 553 ms by bot id=8440100118
[2025-12-05 21:27:03,647] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 21:27:03,650] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 21:27:03,650] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 21:27:03,916] [INFO] [__main__] Bot shutdown complete
[2025-12-05 21:27:03,918] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 21:27:07,643] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 21:27:07,644] [INFO] [__main__] Starting bot polling
[2025-12-05 21:27:07,644] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 21:27:07,835] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 21:29:13,769] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 21:29:13,838] [INFO] [aiogram.event] Update id=131879938 is handled. Duration 271 ms by bot id=8440100118
[2025-12-05 21:29:15,318] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 21:29:15,572] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 21:29:15,572] [INFO] [aiogram.event] Update id=131879939 is handled. Duration 256 ms by bot id=8440100118
[2025-12-05 21:29:16,871] [INFO] [aiogram.event] Update id=131879940 is handled. Duration 85 ms by bot id=8440100118
[2025-12-05 21:29:19,436] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-05 21:29:19,437] [INFO] [aiogram.event] Update id=131879941 is handled. Duration 86 ms by bot id=8440100118
[2025-12-05 21:29:20,736] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 21:29:20,973] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 21:29:20,974] [INFO] [aiogram.event] Update id=131879942 is handled. Duration 239 ms by bot id=8440100118
[2025-12-05 21:29:22,352] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-05 21:29:22,352] [INFO] [aiogram.event] Update id=131879943 is handled. Duration 79 ms by bot id=8440100118
[2025-12-05 21:29:23,819] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 21:29:23,819] [INFO] [aiogram.event] Update id=131879944 is handled. Duration 235 ms by bot id=8440100118
[2025-12-05 21:29:52,685] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 21:29:52,748] [INFO] [aiogram.event] Update id=131879945 is handled. Duration 170 ms by bot id=8440100118
[2025-12-05 21:29:54,373] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 21:29:54,373] [INFO] [aiogram.event] Update id=131879946 is handled. Duration 235 ms by bot id=8440100118
[2025-12-05 21:29:57,635] [INFO] [aiogram.event] Update id=131879947 is handled. Duration 153 ms by bot id=8440100118
[2025-12-05 21:29:58,758] [INFO] [aiogram.event] Update id=131879948 is handled. Duration 245 ms by bot id=8440100118
[2025-12-05 21:29:59,306] [INFO] [aiogram.event] Update id=131879949 is handled. Duration 148 ms by bot id=8440100118
[2025-12-05 21:29:59,906] [INFO] [aiogram.event] Update id=131879950 is handled. Duration 149 ms by bot id=8440100118
[2025-12-05 21:30:02,222] [INFO] [aiogram.event] Update id=131879951 is handled. Duration 144 ms by bot id=8440100118
[2025-12-05 21:30:03,023] [WARNING] [Bot.handlers.finances] Failed to edit income message 3557: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-12-05 21:30:03,098] [INFO] [aiogram.event] Update id=131879952 is handled. Duration 145 ms by bot id=8440100118
[2025-12-05 21:30:04,352] [INFO] [aiogram.event] Update id=131879953 is handled. Duration 163 ms by bot id=8440100118
[2025-12-05 21:30:05,141] [INFO] [aiogram.event] Update id=131879954 is handled. Duration 151 ms by bot id=8440100118
[2025-12-05 21:30:10,946] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 21:30:11,037] [INFO] [aiogram.event] Update id=131879955 is handled. Duration 94 ms by bot id=8440100118
[2025-12-05 21:30:22,080] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 21:30:22,266] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 21:30:22,266] [INFO] [aiogram.event] Update id=131879956 is handled. Duration 189 ms by bot id=8440100118
[2025-12-05 21:30:23,523] [INFO] [aiogram.event] Update id=131879957 is handled. Duration 103 ms by bot id=8440100118
[2025-12-05 21:30:26,767] [INFO] [aiogram.event] Update id=131879958 is handled. Duration 181 ms by bot id=8440100118
[2025-12-05 21:30:34,809] [INFO] [aiogram.event] Update id=131879959 is handled. Duration 82 ms by bot id=8440100118
[2025-12-05 21:44:06,454] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 21:44:06,455] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 21:44:06,455] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 21:44:06,718] [INFO] [__main__] Bot shutdown complete
[2025-12-05 21:44:06,718] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 21:44:10,119] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 21:44:10,120] [INFO] [__main__] Starting bot polling
[2025-12-05 21:44:10,120] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 21:44:10,337] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 21:44:17,060] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 21:44:17,213] [INFO] [aiogram.event] Update id=131879960 is handled. Duration 391 ms by bot id=8440100118
[2025-12-05 21:44:19,292] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 21:44:19,292] [INFO] [aiogram.event] Update id=131879961 is handled. Duration 279 ms by bot id=8440100118
[2025-12-05 21:44:58,464] [WARNING] [Bot.handlers.finances] Failed to edit income message 3581: Telegram server says - Bad Request: message can't be edited
[2025-12-05 21:44:58,528] [INFO] [aiogram.event] Update id=131879962 is handled. Duration 128 ms by bot id=8440100118
[2025-12-05 22:13:22,300] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 22:13:22,383] [INFO] [aiogram.event] Update id=131879963 is handled. Duration 162 ms by bot id=8440100118
[2025-12-05 22:13:30,331] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 22:13:30,332] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 22:13:30,332] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 22:13:30,585] [INFO] [__main__] Bot shutdown complete
[2025-12-05 22:13:30,586] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 22:13:34,129] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 22:13:34,129] [INFO] [__main__] Starting bot polling
[2025-12-05 22:13:34,129] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 22:13:34,369] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 22:13:45,613] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 22:13:45,713] [INFO] [aiogram.event] Update id=131879964 is handled. Duration 326 ms by bot id=8440100118
[2025-12-05 22:13:47,689] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 22:13:47,689] [INFO] [aiogram.event] Update id=131879965 is handled. Duration 190 ms by bot id=8440100118
[2025-12-05 22:14:03,377] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 22:14:03,467] [INFO] [aiogram.event] Update id=131879966 is handled. Duration 94 ms by bot id=8440100118
[2025-12-05 22:14:30,035] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 22:14:30,418] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 22:14:30,419] [INFO] [aiogram.event] Update id=131879967 is handled. Duration 386 ms by bot id=8440100118
[2025-12-05 22:14:31,685] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 22:14:31,686] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 22:14:31,783] [INFO] [aiogram.event] Update id=131879968 is handled. Duration 98 ms by bot id=8440100118
[2025-12-05 22:14:33,758] [INFO] [aiogram.event] Update id=131879969 is handled. Duration 82 ms by bot id=8440100118
[2025-12-05 22:14:38,403] [INFO] [aiogram.event] Update id=131879970 is handled. Duration 193 ms by bot id=8440100118
[2025-12-05 22:31:52,286] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 22:31:52,287] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 22:31:52,287] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 22:31:52,547] [INFO] [__main__] Bot shutdown complete
[2025-12-05 22:31:52,547] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 22:31:56,162] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 22:31:56,163] [INFO] [__main__] Starting bot polling
[2025-12-05 22:31:56,163] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 22:31:56,368] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 22:32:20,278] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 22:32:20,378] [INFO] [aiogram.event] Update id=131879971 is handled. Duration 318 ms by bot id=8440100118
[2025-12-05 22:32:22,537] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 22:32:22,537] [INFO] [aiogram.event] Update id=131879972 is handled. Duration 145 ms by bot id=8440100118
[2025-12-05 22:32:44,090] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 22:32:44,263] [INFO] [aiogram.event] Update id=131879973 is handled. Duration 378 ms by bot id=8440100118
[2025-12-05 22:32:45,449] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 22:32:45,614] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 22:32:45,614] [INFO] [aiogram.event] Update id=131879974 is handled. Duration 167 ms by bot id=8440100118
[2025-12-05 22:32:46,862] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 22:32:46,862] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 22:32:46,943] [INFO] [aiogram.event] Update id=131879975 is handled. Duration 82 ms by bot id=8440100118
[2025-12-05 22:32:48,465] [INFO] [aiogram.event] Update id=131879976 is handled. Duration 79 ms by bot id=8440100118
[2025-12-05 22:32:52,525] [INFO] [aiogram.event] Update id=131879977 is handled. Duration 172 ms by bot id=8440100118
[2025-12-05 22:33:19,914] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 22:33:19,988] [INFO] [aiogram.event] Update id=131879978 is handled. Duration 154 ms by bot id=8440100118
[2025-12-05 22:33:21,324] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 22:33:21,324] [INFO] [aiogram.event] Update id=131879979 is handled. Duration 150 ms by bot id=8440100118
[2025-12-05 22:33:29,169] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 22:33:29,249] [INFO] [aiogram.event] Update id=131879980 is handled. Duration 84 ms by bot id=8440100118
[2025-12-05 22:55:38,227] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 22:55:38,229] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 22:55:38,229] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 22:55:38,492] [INFO] [__main__] Bot shutdown complete
[2025-12-05 22:55:38,492] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 22:55:42,049] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 22:55:42,049] [INFO] [__main__] Starting bot polling
[2025-12-05 22:55:42,049] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 22:55:42,248] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 22:57:48,192] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 22:57:48,316] [INFO] [aiogram.event] Update id=131879981 is handled. Duration 365 ms by bot id=8440100118
[2025-12-05 22:57:50,675] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 22:57:50,675] [INFO] [aiogram.event] Update id=131879982 is handled. Duration 178 ms by bot id=8440100118
[2025-12-05 22:58:04,140] [WARNING] [Bot.handlers.finances] Failed to edit income message 3624: Telegram server says - Bad Request: message can't be edited
[2025-12-05 22:58:04,263] [INFO] [aiogram.event] Update id=131879983 is handled. Duration 183 ms by bot id=8440100118
[2025-12-05 22:58:10,615] [WARNING] [Bot.handlers.finances] Failed to edit income message 3624: Telegram server says - Bad Request: message can't be edited
[2025-12-05 22:58:10,731] [INFO] [aiogram.event] Update id=131879984 is handled. Duration 180 ms by bot id=8440100118
[2025-12-05 22:58:12,485] [WARNING] [Bot.handlers.finances] Failed to edit income message 3624: Telegram server says - Bad Request: message can't be edited
[2025-12-05 22:58:12,636] [INFO] [aiogram.event] Update id=131879985 is handled. Duration 207 ms by bot id=8440100118
[2025-12-05 22:58:14,769] [INFO] [aiogram.event] Update id=131879986 is handled. Duration 294 ms by bot id=8440100118
[2025-12-05 22:58:36,426] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 22:58:36,491] [INFO] [aiogram.event] Update id=131879987 is handled. Duration 142 ms by bot id=8440100118
[2025-12-05 22:58:37,545] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 22:58:37,956] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 22:58:37,956] [INFO] [aiogram.event] Update id=131879988 is handled. Duration 414 ms by bot id=8440100118
[2025-12-05 22:58:39,269] [INFO] [aiogram.event] Update id=131879989 is handled. Duration 84 ms by bot id=8440100118
[2025-12-05 22:58:42,623] [INFO] [aiogram.event] Update id=131879990 is handled. Duration 175 ms by bot id=8440100118
[2025-12-05 22:58:44,594] [INFO] [aiogram.event] Update id=131879991 is handled. Duration 146 ms by bot id=8440100118
[2025-12-05 22:58:45,476] [INFO] [aiogram.event] Update id=131879992 is handled. Duration 152 ms by bot id=8440100118
[2025-12-05 22:58:56,690] [INFO] [aiogram.event] Update id=131879993 is handled. Duration 150 ms by bot id=8440100118
[2025-12-05 22:58:58,679] [INFO] [aiogram.event] Update id=131879994 is handled. Duration 282 ms by bot id=8440100118
[2025-12-05 22:58:58,896] [INFO] [aiogram.event] Update id=131879995 is handled. Duration 155 ms by bot id=8440100118
[2025-12-05 22:58:59,831] [INFO] [aiogram.event] Update id=131879996 is handled. Duration 170 ms by bot id=8440100118
[2025-12-05 22:59:01,026] [INFO] [aiogram.event] Update id=131879997 is handled. Duration 166 ms by bot id=8440100118
[2025-12-05 22:59:58,277] [INFO] [Bot.database.crud] Added wish 2 for user 838347504
[2025-12-05 22:59:58,356] [INFO] [Bot.handlers.callbacks] User 838347504 added wish 2
[2025-12-05 22:59:58,356] [INFO] [aiogram.event] Update id=131879998 is handled. Duration 99 ms by bot id=8440100118
[2025-12-05 23:00:13,064] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 23:00:13,220] [INFO] [aiogram.event] Update id=131879999 is handled. Duration 284 ms by bot id=8440100118
[2025-12-05 23:00:14,169] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 23:00:14,169] [INFO] [aiogram.event] Update id=131880000 is handled. Duration 201 ms by bot id=8440100118
[2025-12-05 23:00:15,135] [WARNING] [Bot.handlers.finances] Failed to edit income message 3650: Telegram server says - Bad Request: message can't be edited
[2025-12-05 23:00:15,214] [INFO] [aiogram.event] Update id=131880001 is handled. Duration 141 ms by bot id=8440100118
[2025-12-05 23:00:16,086] [WARNING] [Bot.handlers.finances] Failed to edit income message 3650: Telegram server says - Bad Request: message can't be edited
[2025-12-05 23:00:16,192] [INFO] [aiogram.event] Update id=131880002 is handled. Duration 165 ms by bot id=8440100118
[2025-12-05 23:00:16,676] [WARNING] [Bot.handlers.finances] Failed to edit income message 3650: Telegram server says - Bad Request: message can't be edited
[2025-12-05 23:00:16,750] [INFO] [aiogram.event] Update id=131880003 is handled. Duration 135 ms by bot id=8440100118
[2025-12-05 23:02:58,202] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 23:02:58,289] [INFO] [aiogram.event] Update id=131880004 is handled. Duration 182 ms by bot id=8440100118
[2025-12-05 23:03:02,328] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: None Text: None
[2025-12-05 23:03:02,409] [INFO] [aiogram.event] Update id=131880005 is handled. Duration 84 ms by bot id=8440100118
[2025-12-05 23:19:52,551] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-05 23:19:52,552] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-05 23:19:52,552] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-05 23:19:52,814] [INFO] [__main__] Bot shutdown complete
[2025-12-05 23:19:52,815] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 23:19:56,308] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-05 23:19:56,308] [INFO] [__main__] Starting bot polling
[2025-12-05 23:19:56,309] [INFO] [aiogram.dispatcher] Start polling
[2025-12-05 23:19:56,520] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-05 23:20:30,598] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 23:20:30,666] [INFO] [aiogram.event] Update id=131880006 is handled. Duration 283 ms by bot id=8440100118
[2025-12-05 23:20:35,848] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 23:20:35,848] [INFO] [aiogram.event] Update id=131880007 is handled. Duration 288 ms by bot id=8440100118
[2025-12-05 23:20:37,438] [WARNING] [Bot.handlers.finances] Failed to edit income message 3661: Telegram server says - Bad Request: message can't be edited
[2025-12-05 23:20:37,660] [INFO] [aiogram.event] Update id=131880008 is handled. Duration 285 ms by bot id=8440100118
[2025-12-05 23:21:14,711] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 23:21:14,823] [INFO] [aiogram.event] Update id=131880009 is handled. Duration 260 ms by bot id=8440100118
[2025-12-05 23:21:15,976] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 23:21:16,288] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 23:21:16,288] [INFO] [aiogram.event] Update id=131880010 is handled. Duration 314 ms by bot id=8440100118
[2025-12-05 23:21:17,253] [INFO] [aiogram.event] Update id=131880011 is handled. Duration 104 ms by bot id=8440100118
[2025-12-05 23:21:19,748] [INFO] [aiogram.event] Update id=131880012 is handled. Duration 181 ms by bot id=8440100118
[2025-12-05 23:21:21,553] [INFO] [aiogram.event] Update id=131880013 is handled. Duration 156 ms by bot id=8440100118
[2025-12-05 23:21:23,120] [INFO] [aiogram.event] Update id=131880014 is handled. Duration 175 ms by bot id=8440100118
[2025-12-05 23:21:24,371] [INFO] [aiogram.event] Update id=131880015 is handled. Duration 167 ms by bot id=8440100118
[2025-12-05 23:49:43,412] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 23:49:43,477] [INFO] [aiogram.event] Update id=131880016 is handled. Duration 241 ms by bot id=8440100118
[2025-12-05 23:49:45,515] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 23:49:45,515] [INFO] [aiogram.event] Update id=131880017 is handled. Duration 131 ms by bot id=8440100118
[2025-12-05 23:49:47,309] [WARNING] [Bot.handlers.finances] Failed to edit income message 3680: Telegram server says - Bad Request: message can't be edited
[2025-12-05 23:49:47,511] [INFO] [aiogram.event] Update id=131880018 is handled. Duration 257 ms by bot id=8440100118
[2025-12-05 23:50:01,827] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-05 23:50:01,946] [INFO] [aiogram.event] Update id=131880019 is handled. Duration 264 ms by bot id=8440100118
[2025-12-05 23:50:03,578] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-05 23:50:03,578] [INFO] [aiogram.event] Update id=131880020 is handled. Duration 151 ms by bot id=8440100118
[2025-12-05 23:50:08,336] [WARNING] [Bot.handlers.finances] Failed to edit income message 3686: Telegram server says - Bad Request: message can't be edited
[2025-12-05 23:50:08,525] [INFO] [aiogram.event] Update id=131880021 is handled. Duration 244 ms by bot id=8440100118
[2025-12-05 23:50:21,213] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 23:50:21,214] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 23:50:21,215] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: None
[2025-12-05 23:50:21,290] [INFO] [aiogram.event] Update id=131880023 is handled. Duration 85 ms by bot id=8440100118
[2025-12-05 23:50:21,414] [INFO] [aiogram.event] Update id=131880024 is handled. Duration 209 ms by bot id=8440100118
[2025-12-05 23:50:21,436] [INFO] [aiogram.event] Update id=131880022 is handled. Duration 231 ms by bot id=8440100118
[2025-12-05 23:50:26,561] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 23:50:26,732] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-05 23:50:26,732] [INFO] [aiogram.event] Update id=131880025 is handled. Duration 173 ms by bot id=8440100118
[2025-12-05 23:50:28,250] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-05 23:50:28,250] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-05 23:50:28,419] [INFO] [aiogram.event] Update id=131880026 is handled. Duration 170 ms by bot id=8440100118
[2025-12-05 23:50:31,355] [INFO] [aiogram.event] Update id=131880027 is handled. Duration 89 ms by bot id=8440100118
[2025-12-05 23:50:34,517] [INFO] [aiogram.event] Update id=131880028 is handled. Duration 229 ms by bot id=8440100118
[2025-12-05 23:50:36,299] [INFO] [aiogram.event] Update id=131880029 is handled. Duration 224 ms by bot id=8440100118
[2025-12-05 23:50:37,226] [INFO] [aiogram.event] Update id=131880030 is handled. Duration 209 ms by bot id=8440100118
[2025-12-05 23:53:07,412] [INFO] [aiogram.event] Update id=131880031 is handled. Duration 170 ms by bot id=8440100118
[2025-12-13 21:49:51,455] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-13 21:49:51,456] [INFO] [__main__] Starting bot polling
[2025-12-13 21:49:51,457] [INFO] [aiogram.dispatcher] Start polling
[2025-12-13 21:49:54,823] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 21:53:42,228] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-13 21:53:42,353] [INFO] [aiogram.event] Update id=131880032 is handled. Duration 440 ms by bot id=8440100118
[2025-12-13 21:53:46,289] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 21:53:46,290] [INFO] [aiogram.event] Update id=131880033 is handled. Duration 392 ms by bot id=8440100118
[2025-12-13 21:53:50,544] [INFO] [aiogram.event] Update id=131880034 is handled. Duration 158 ms by bot id=8440100118
[2025-12-13 21:53:54,990] [INFO] [aiogram.event] Update id=131880035 is handled. Duration 174 ms by bot id=8440100118
[2025-12-13 21:53:56,674] [INFO] [aiogram.event] Update id=131880036 is handled. Duration 159 ms by bot id=8440100118
[2025-12-13 21:53:57,514] [INFO] [aiogram.event] Update id=131880037 is handled. Duration 138 ms by bot id=8440100118
[2025-12-13 21:53:59,334] [INFO] [aiogram.event] Update id=131880038 is handled. Duration 391 ms by bot id=8440100118
[2025-12-13 21:54:07,130] [INFO] [aiogram.event] Update id=131880039 is handled. Duration 681 ms by bot id=8440100118
[2025-12-13 21:54:11,619] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 300.0
[2025-12-13 21:54:11,742] [INFO] [aiogram.event] Update id=131880040 is handled. Duration 400 ms by bot id=8440100118
[2025-12-13 21:54:15,206] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 200.0
[2025-12-13 21:54:15,293] [INFO] [aiogram.event] Update id=131880041 is handled. Duration 258 ms by bot id=8440100118
[2025-12-13 21:54:20,320] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 200.0
[2025-12-13 21:54:20,406] [INFO] [aiogram.event] Update id=131880042 is handled. Duration 372 ms by bot id=8440100118
[2025-12-13 21:54:24,933] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 200.0
[2025-12-13 21:54:25,022] [INFO] [aiogram.event] Update id=131880043 is handled. Duration 286 ms by bot id=8440100118
[2025-12-13 21:54:31,491] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 100.0
[2025-12-13 21:54:31,492] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-13 21:54:31,579] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 21:54:31,579] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 21:54:31,665] [INFO] [aiogram.event] Update id=131880044 is handled. Duration 349 ms by bot id=8440100118
[2025-12-13 21:59:24,354] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 21:59:24,682] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-13 21:59:24,682] [INFO] [aiogram.event] Update id=131880045 is handled. Duration 330 ms by bot id=8440100118
[2025-12-13 22:02:16,616] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-13 22:02:16,616] [INFO] [aiogram.event] Update id=131880046 is handled. Duration 87 ms by bot id=8440100118
[2025-12-13 22:02:21,043] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 22:02:21,043] [INFO] [aiogram.event] Update id=131880047 is handled. Duration 298 ms by bot id=8440100118
[2025-12-13 22:02:24,916] [INFO] [aiogram.event] Update id=131880048 is handled. Duration 162 ms by bot id=8440100118
[2025-12-13 22:02:25,408] [INFO] [aiogram.event] Update id=131880049 is handled. Duration 375 ms by bot id=8440100118
[2025-12-13 22:02:25,497] [WARNING] [Bot.handlers.finances] Failed to edit income message 3735: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-12-13 22:02:25,853] [INFO] [aiogram.event] Update id=131880050 is handled. Duration 635 ms by bot id=8440100118
[2025-12-13 22:02:27,248] [INFO] [aiogram.event] Update id=131880051 is handled. Duration 490 ms by bot id=8440100118
[2025-12-13 22:02:32,374] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 15.0
[2025-12-13 22:02:32,471] [INFO] [aiogram.event] Update id=131880052 is handled. Duration 337 ms by bot id=8440100118
[2025-12-13 22:07:05,983] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 10.0
[2025-12-13 22:07:06,100] [INFO] [aiogram.event] Update id=131880053 is handled. Duration 285 ms by bot id=8440100118
[2025-12-13 22:08:47,043] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-12-13 22:08:47,043] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-13 22:08:48,281] [INFO] [aiogram.dispatcher] Connection established (tryings = 1, bot id = 8440100118)
[2025-12-13 22:08:48,514] [INFO] [aiogram.event] Update id=131880054 is not handled. Duration 232 ms by bot id=8440100118
[2025-12-13 22:08:48,514] [ERROR] [aiogram.event] Cause exception while process update id=131880054 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 358, in handle_category_confirmation
    await query.answer()
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
[2025-12-13 22:08:51,744] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 10.0
[2025-12-13 22:08:51,930] [INFO] [aiogram.event] Update id=131880055 is handled. Duration 3647 ms by bot id=8440100118
[2025-12-13 22:09:45,525] [INFO] [aiogram.event] Update id=131880056 is not handled. Duration 527 ms by bot id=8440100118
[2025-12-13 22:09:45,525] [ERROR] [aiogram.event] Cause exception while process update id=131880056 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\finances.py", line 358, in handle_category_confirmation
    await query.answer()
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
[2025-12-13 22:09:45,772] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 10.0
[2025-12-13 22:09:45,882] [INFO] [aiogram.event] Update id=131880057 is handled. Duration 624 ms by bot id=8440100118
[2025-12-13 22:10:58,221] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 5.0
[2025-12-13 22:10:58,221] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-13 22:10:58,330] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:10:58,331] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:10:58,436] [INFO] [aiogram.event] Update id=131880058 is handled. Duration 382 ms by bot id=8440100118
[2025-12-13 22:11:07,986] [INFO] [Bot.database.crud] Fetched wish 2
[2025-12-13 22:11:07,987] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:08,002] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by -58.0
[2025-12-13 22:11:08,006] [INFO] [Bot.database.crud] Marked wish 2 as purchased
[2025-12-13 22:11:08,011] [INFO] [Bot.database.crud] Added purchase for user 838347504
[2025-12-13 22:11:08,108] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-13 22:11:08,211] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:08,211] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:08,286] [INFO] [Bot.handlers.callbacks] User 838347504 purchased wish 2 (wishlist_category=инвестиции в работу, savings_category=инвестиции, price=58.00, savings_before=310.00)
[2025-12-13 22:11:08,286] [INFO] [aiogram.event] Update id=131880059 is handled. Duration 301 ms by bot id=8440100118
[2025-12-13 22:11:28,480] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:28,766] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-13 22:11:28,766] [INFO] [aiogram.event] Update id=131880060 is handled. Duration 288 ms by bot id=8440100118
[2025-12-13 22:11:30,262] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:30,263] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:30,364] [INFO] [aiogram.event] Update id=131880061 is handled. Duration 103 ms by bot id=8440100118
[2025-12-13 22:11:36,310] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:36,310] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:36,406] [INFO] [aiogram.event] Update id=131880062 is handled. Duration 97 ms by bot id=8440100118
[2025-12-13 22:11:38,014] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:38,015] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:38,134] [INFO] [aiogram.event] Update id=131880063 is not handled. Duration 120 ms by bot id=8440100118
[2025-12-13 22:11:38,135] [ERROR] [aiogram.event] Cause exception while process update id=131880063 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 41, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 98, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-12-13 22:11:44,298] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-13 22:11:44,298] [INFO] [aiogram.event] Update id=131880064 is handled. Duration 83 ms by bot id=8440100118
[2025-12-13 22:11:45,577] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:45,756] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-13 22:11:45,756] [INFO] [aiogram.event] Update id=131880065 is handled. Duration 181 ms by bot id=8440100118
[2025-12-13 22:11:47,020] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:47,020] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:47,175] [INFO] [aiogram.event] Update id=131880066 is handled. Duration 156 ms by bot id=8440100118
[2025-12-13 22:11:49,150] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:49,151] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:49,235] [INFO] [aiogram.event] Update id=131880067 is not handled. Duration 86 ms by bot id=8440100118
[2025-12-13 22:11:49,236] [ERROR] [aiogram.event] Cause exception while process update id=131880067 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 41, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 98, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-12-13 22:11:51,118] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:51,119] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:51,192] [INFO] [aiogram.event] Update id=131880068 is not handled. Duration 74 ms by bot id=8440100118
[2025-12-13 22:11:51,192] [ERROR] [aiogram.event] Cause exception while process update id=131880068 by bot id=8440100118
TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
Traceback (most recent call last):
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 41, in handle_category_selection
    await _send_wishes_list(callback, category)
  File "C:\Users\admin\PycharmProjects\v4\finance_bot\Bot\handlers\callbacks.py", line 98, in _send_wishes_list
    await callback.message.edit_text("Желаний в этой категории пока нет.", reply_markup=wishlist_categories_keyboard())
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 185, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\admin\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-12-13 22:11:53,693] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 22:11:53,694] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 22:11:53,860] [INFO] [aiogram.event] Update id=131880069 is handled. Duration 167 ms by bot id=8440100118
[2025-12-13 22:12:09,170] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-13 22:12:09,170] [INFO] [aiogram.event] Update id=131880070 is handled. Duration 113 ms by bot id=8440100118
[2025-12-13 22:30:16,137] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 1236] Подключение к сети было разорвано локальной системой
[2025-12-13 22:30:16,138] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-13 22:30:27,302] [INFO] [aiogram.dispatcher] Connection established (tryings = 1, bot id = 8440100118)
[2025-12-13 22:51:53,966] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-13 22:51:53,968] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-13 22:51:53,968] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-13 22:51:54,232] [INFO] [__main__] Bot shutdown complete
[2025-12-13 22:51:54,233] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 22:51:58,247] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-13 22:51:58,248] [INFO] [__main__] Starting bot polling
[2025-12-13 22:51:58,248] [INFO] [aiogram.dispatcher] Start polling
[2025-12-13 22:51:58,414] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 22:53:37,698] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-13 22:53:37,757] [INFO] [aiogram.event] Update id=131880071 is handled. Duration 258 ms by bot id=8440100118
[2025-12-13 22:53:41,399] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 22:53:41,399] [INFO] [aiogram.event] Update id=131880072 is handled. Duration 375 ms by bot id=8440100118
[2025-12-13 22:53:44,026] [INFO] [aiogram.event] Update id=131880073 is handled. Duration 131 ms by bot id=8440100118
[2025-12-13 22:53:44,868] [INFO] [aiogram.event] Update id=131880074 is handled. Duration 137 ms by bot id=8440100118
[2025-12-13 22:53:45,837] [INFO] [aiogram.event] Update id=131880075 is handled. Duration 122 ms by bot id=8440100118
[2025-12-13 22:53:46,579] [INFO] [aiogram.event] Update id=131880076 is handled. Duration 126 ms by bot id=8440100118
[2025-12-13 23:01:43,554] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-13 23:01:43,555] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-13 23:01:43,555] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-13 23:01:43,818] [INFO] [__main__] Bot shutdown complete
[2025-12-13 23:01:43,819] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:01:50,053] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-13 23:01:50,054] [INFO] [__main__] Starting bot polling
[2025-12-13 23:01:50,054] [INFO] [aiogram.dispatcher] Start polling
[2025-12-13 23:01:50,233] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:01:52,182] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-13 23:01:52,323] [INFO] [aiogram.event] Update id=131880077 is handled. Duration 440 ms by bot id=8440100118
[2025-12-13 23:01:53,794] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 23:01:53,794] [INFO] [aiogram.event] Update id=131880078 is handled. Duration 219 ms by bot id=8440100118
[2025-12-13 23:02:01,665] [WARNING] [Bot.handlers.finances] Failed to edit income message 3774: Telegram server says - Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
[2025-12-13 23:02:01,865] [INFO] [aiogram.event] Update id=131880079 is handled. Duration 265 ms by bot id=8440100118
[2025-12-13 23:02:04,241] [INFO] [aiogram.event] Update id=131880080 is handled. Duration 128 ms by bot id=8440100118
[2025-12-13 23:02:04,531] [INFO] [aiogram.event] Update id=131880081 is handled. Duration 174 ms by bot id=8440100118
[2025-12-13 23:03:20,561] [INFO] [aiogram.event] Update id=131880082 is handled. Duration 126 ms by bot id=8440100118
[2025-12-13 23:03:22,614] [INFO] [aiogram.event] Update id=131880083 is handled. Duration 290 ms by bot id=8440100118
[2025-12-13 23:03:28,033] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 1.5
[2025-12-13 23:03:28,108] [INFO] [aiogram.event] Update id=131880084 is handled. Duration 211 ms by bot id=8440100118
[2025-12-13 23:03:30,995] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 1.0
[2025-12-13 23:03:31,073] [INFO] [aiogram.event] Update id=131880085 is handled. Duration 210 ms by bot id=8440100118
[2025-12-13 23:03:34,023] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 1.0
[2025-12-13 23:03:34,096] [INFO] [aiogram.event] Update id=131880086 is handled. Duration 207 ms by bot id=8440100118
[2025-12-13 23:03:37,055] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 1.0
[2025-12-13 23:03:37,130] [INFO] [aiogram.event] Update id=131880087 is handled. Duration 212 ms by bot id=8440100118
[2025-12-13 23:03:40,068] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 0.5
[2025-12-13 23:03:40,068] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-13 23:03:40,145] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 23:03:40,145] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 23:03:40,145] [INFO] [aiogram.event] Update id=131880088 is handled. Duration 239 ms by bot id=8440100118
[2025-12-13 23:03:43,792] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 23:03:43,962] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-13 23:03:43,962] [INFO] [aiogram.event] Update id=131880089 is handled. Duration 171 ms by bot id=8440100118
[2025-12-13 23:03:45,247] [INFO] [aiogram.event] Update id=131880090 is handled. Duration 83 ms by bot id=8440100118
[2025-12-13 23:03:48,122] [INFO] [aiogram.event] Update id=131880091 is handled. Duration 290 ms by bot id=8440100118
[2025-12-13 23:03:49,742] [INFO] [aiogram.event] Update id=131880092 is handled. Duration 128 ms by bot id=8440100118
[2025-12-13 23:03:50,152] [INFO] [aiogram.event] Update id=131880093 is handled. Duration 207 ms by bot id=8440100118
[2025-12-13 23:03:50,362] [INFO] [aiogram.event] Update id=131880094 is handled. Duration 139 ms by bot id=8440100118
[2025-12-13 23:03:51,444] [INFO] [aiogram.event] Update id=131880095 is handled. Duration 130 ms by bot id=8440100118
[2025-12-13 23:03:53,690] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-13 23:03:53,690] [INFO] [aiogram.event] Update id=131880096 is handled. Duration 90 ms by bot id=8440100118
[2025-12-13 23:03:58,431] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 23:03:58,432] [INFO] [aiogram.event] Update id=131880097 is handled. Duration 488 ms by bot id=8440100118
[2025-12-13 23:04:07,993] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-13 23:04:07,994] [INFO] [aiogram.event] Update id=131880098 is handled. Duration 80 ms by bot id=8440100118
[2025-12-13 23:04:11,608] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 23:04:11,816] [INFO] [Bot.handlers.wishlist] User 838347504 opened wishlist
[2025-12-13 23:04:11,816] [INFO] [aiogram.event] Update id=131880099 is handled. Duration 210 ms by bot id=8440100118
[2025-12-13 23:04:13,230] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 23:04:13,231] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 23:04:13,302] [INFO] [aiogram.event] Update id=131880100 is handled. Duration 72 ms by bot id=8440100118
[2025-12-13 23:04:15,717] [INFO] [Bot.handlers.start] User 838347504 returned to main menu
[2025-12-13 23:04:15,717] [INFO] [aiogram.event] Update id=131880101 is handled. Duration 79 ms by bot id=8440100118
[2025-12-13 23:30:56,514] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-13 23:30:56,515] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-13 23:30:56,515] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-13 23:30:56,768] [INFO] [__main__] Bot shutdown complete
[2025-12-13 23:30:56,768] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:31:03,052] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-13 23:31:03,052] [INFO] [__main__] Starting bot polling
[2025-12-13 23:31:03,052] [INFO] [aiogram.dispatcher] Start polling
[2025-12-13 23:31:03,223] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:31:05,215] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-13 23:31:05,280] [INFO] [aiogram.event] Update id=131880102 is handled. Duration 291 ms by bot id=8440100118
[2025-12-13 23:31:08,842] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 23:31:08,842] [INFO] [aiogram.event] Update id=131880103 is handled. Duration 205 ms by bot id=8440100118
[2025-12-13 23:31:31,103] [INFO] [Bot.handlers.common] Fallback triggered. User: 838347504 State: MoneyState:waiting_for_amount Text: Gfc
[2025-12-13 23:31:31,248] [INFO] [aiogram.event] Update id=131880104 is handled. Duration 148 ms by bot id=8440100118
[2025-12-13 23:31:36,102] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 23:31:36,102] [INFO] [aiogram.event] Update id=131880105 is handled. Duration 211 ms by bot id=8440100118
[2025-12-13 23:31:36,940] [INFO] [aiogram.event] Update id=131880106 is handled. Duration 180 ms by bot id=8440100118
[2025-12-13 23:31:37,781] [INFO] [aiogram.event] Update id=131880107 is handled. Duration 124 ms by bot id=8440100118
[2025-12-13 23:31:38,385] [INFO] [aiogram.event] Update id=131880108 is handled. Duration 131 ms by bot id=8440100118
[2025-12-13 23:31:40,428] [INFO] [aiogram.event] Update id=131880109 is handled. Duration 121 ms by bot id=8440100118
[2025-12-13 23:32:36,751] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-13 23:32:36,752] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-13 23:32:36,752] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-13 23:32:37,015] [INFO] [__main__] Bot shutdown complete
[2025-12-13 23:32:37,016] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:32:40,406] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-13 23:32:40,406] [INFO] [__main__] Starting bot polling
[2025-12-13 23:32:40,407] [INFO] [aiogram.dispatcher] Start polling
[2025-12-13 23:32:40,579] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:32:47,230] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-13 23:32:47,327] [INFO] [aiogram.event] Update id=131880110 is handled. Duration 300 ms by bot id=8440100118
[2025-12-13 23:32:51,369] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 23:32:51,370] [INFO] [aiogram.event] Update id=131880111 is handled. Duration 231 ms by bot id=8440100118
[2025-12-13 23:41:15,447] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-13 23:41:15,449] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-13 23:41:15,449] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-13 23:41:15,703] [INFO] [__main__] Bot shutdown complete
[2025-12-13 23:41:15,703] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:41:21,619] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-13 23:41:21,619] [INFO] [__main__] Starting bot polling
[2025-12-13 23:41:21,619] [INFO] [aiogram.dispatcher] Start polling
[2025-12-13 23:41:21,798] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-13 23:41:27,948] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-13 23:41:28,007] [INFO] [aiogram.event] Update id=131880112 is handled. Duration 229 ms by bot id=8440100118
[2025-12-13 23:41:29,831] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-13 23:41:29,832] [INFO] [aiogram.event] Update id=131880113 is handled. Duration 260 ms by bot id=8440100118
[2025-12-13 23:41:32,611] [INFO] [aiogram.event] Update id=131880114 is handled. Duration 126 ms by bot id=8440100118
[2025-12-13 23:41:33,135] [INFO] [aiogram.event] Update id=131880115 is handled. Duration 131 ms by bot id=8440100118
[2025-12-13 23:41:33,314] [INFO] [aiogram.event] Update id=131880116 is handled. Duration 117 ms by bot id=8440100118
[2025-12-13 23:41:33,501] [INFO] [aiogram.event] Update id=131880117 is handled. Duration 131 ms by bot id=8440100118
[2025-12-13 23:41:36,199] [INFO] [aiogram.event] Update id=131880118 is handled. Duration 337 ms by bot id=8440100118
[2025-12-13 23:41:38,393] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 300.0
[2025-12-13 23:41:38,467] [INFO] [aiogram.event] Update id=131880119 is handled. Duration 231 ms by bot id=8440100118
[2025-12-13 23:41:46,892] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 200.0
[2025-12-13 23:41:46,965] [INFO] [aiogram.event] Update id=131880120 is handled. Duration 197 ms by bot id=8440100118
[2025-12-13 23:41:51,207] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 200.0
[2025-12-13 23:41:51,289] [INFO] [aiogram.event] Update id=131880121 is handled. Duration 261 ms by bot id=8440100118
[2025-12-13 23:41:55,435] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 200.0
[2025-12-13 23:41:55,505] [INFO] [aiogram.event] Update id=131880122 is handled. Duration 207 ms by bot id=8440100118
[2025-12-13 23:41:59,740] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 100.0
[2025-12-13 23:41:59,741] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-13 23:41:59,861] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-13 23:41:59,861] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-13 23:41:59,861] [INFO] [aiogram.event] Update id=131880123 is handled. Duration 288 ms by bot id=8440100118
[2025-12-14 16:05:59,603] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-12-14 16:05:59,604] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-14 16:06:00,621] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-14 16:06:00,621] [WARNING] [aiogram.dispatcher] Sleep for 1.277830 seconds and try again... (tryings = 1, bot id = 8440100118)
[2025-12-14 16:06:01,909] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-12-14 16:06:01,909] [WARNING] [aiogram.dispatcher] Sleep for 1.569503 seconds and try again... (tryings = 2, bot id = 8440100118)
[2025-12-14 16:06:13,680] [INFO] [aiogram.dispatcher] Connection established (tryings = 3, bot id = 8440100118)
[2025-12-14 16:31:34,829] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-14 16:31:34,831] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-14 16:31:34,832] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-14 16:31:35,090] [INFO] [__main__] Bot shutdown complete
[2025-12-14 16:31:35,092] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-14 16:48:21,719] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-14 16:48:21,720] [INFO] [__main__] Starting bot polling
[2025-12-14 16:48:21,720] [INFO] [aiogram.dispatcher] Start polling
[2025-12-14 16:48:21,896] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-14 16:48:56,526] [INFO] [Bot.database.crud] Initialized household questions for user 838347504 month 2025-12
[2025-12-14 16:48:56,682] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-14 16:48:56,750] [INFO] [aiogram.event] Update id=131880124 is handled. Duration 230 ms by bot id=8440100118
[2025-12-14 16:49:14,001] [INFO] [Bot.handlers.household_payments] User 838347504 started household payments for month 2025-12
[2025-12-14 16:49:14,001] [INFO] [aiogram.event] Update id=131880125 is handled. Duration 148 ms by bot id=8440100118
[2025-12-14 16:49:17,482] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question phone
[2025-12-14 16:49:17,618] [INFO] [aiogram.event] Update id=131880126 is handled. Duration 193 ms by bot id=8440100118
[2025-12-14 16:49:21,610] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -700.0
[2025-12-14 16:49:21,616] [INFO] [Bot.database.crud] Marked household question internet as paid for user 838347504 month 2025-12
[2025-12-14 16:49:21,617] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question internet
[2025-12-14 16:49:21,826] [INFO] [aiogram.event] Update id=131880127 is handled. Duration 312 ms by bot id=8440100118
[2025-12-14 16:49:23,522] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question vpn
[2025-12-14 16:49:23,762] [INFO] [aiogram.event] Update id=131880128 is handled. Duration 436 ms by bot id=8440100118
[2025-12-14 16:49:24,816] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question gpt
[2025-12-14 16:49:24,981] [INFO] [aiogram.event] Update id=131880129 is handled. Duration 218 ms by bot id=8440100118
[2025-12-14 16:49:27,229] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question yandex_sub
[2025-12-14 16:49:27,386] [INFO] [aiogram.event] Update id=131880130 is handled. Duration 212 ms by bot id=8440100118
[2025-12-14 16:49:30,191] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question rent
[2025-12-14 16:49:30,192] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-14 16:49:30,259] [INFO] [Bot.handlers.household_payments] User 838347504 completed household payments for month 2025-12
[2025-12-14 16:49:30,259] [INFO] [aiogram.event] Update id=131880131 is handled. Duration 120 ms by bot id=8440100118
[2025-12-14 16:49:37,369] [INFO] [Bot.handlers.finances] User 838347504 started income calculation
[2025-12-14 16:49:37,369] [INFO] [aiogram.event] Update id=131880132 is handled. Duration 205 ms by bot id=8440100118
[2025-12-14 16:49:39,585] [INFO] [aiogram.event] Update id=131880133 is handled. Duration 118 ms by bot id=8440100118
[2025-12-14 16:49:40,584] [INFO] [aiogram.event] Update id=131880134 is handled. Duration 139 ms by bot id=8440100118
[2025-12-14 16:49:41,381] [INFO] [aiogram.event] Update id=131880135 is handled. Duration 228 ms by bot id=8440100118
[2025-12-14 16:49:42,211] [INFO] [aiogram.event] Update id=131880136 is handled. Duration 290 ms by bot id=8440100118
[2025-12-14 16:49:43,895] [INFO] [aiogram.event] Update id=131880137 is handled. Duration 563 ms by bot id=8440100118
[2025-12-14 16:49:46,836] [INFO] [Bot.database.crud] Updated saving for user 838347504 category долги by 600.0
[2025-12-14 16:49:46,911] [INFO] [aiogram.event] Update id=131880138 is handled. Duration 194 ms by bot id=8440100118
[2025-12-14 16:49:49,948] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by 400.0
[2025-12-14 16:49:50,060] [INFO] [aiogram.event] Update id=131880139 is handled. Duration 300 ms by bot id=8440100118
[2025-12-14 16:49:53,007] [INFO] [Bot.database.crud] Updated saving for user 838347504 category инвестиции by 400.0
[2025-12-14 16:49:53,124] [INFO] [aiogram.event] Update id=131880140 is handled. Duration 335 ms by bot id=8440100118
[2025-12-14 16:49:55,957] [INFO] [Bot.database.crud] Updated saving for user 838347504 category сбережения by 400.0
[2025-12-14 16:49:56,023] [INFO] [aiogram.event] Update id=131880141 is handled. Duration 200 ms by bot id=8440100118
[2025-12-14 16:49:58,887] [INFO] [Bot.database.crud] Updated saving for user 838347504 category спонтанные траты by 200.0
[2025-12-14 16:49:58,887] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-14 16:49:58,960] [INFO] [Bot.database.crud] Fetched savings map for user 838347504
[2025-12-14 16:49:58,960] [INFO] [Bot.database.crud] Fetched wishes for user 838347504
[2025-12-14 16:49:58,960] [INFO] [aiogram.event] Update id=131880142 is handled. Duration 191 ms by bot id=8440100118
[2025-12-14 16:51:20,594] [INFO] [Bot.handlers.household_payments] User 838347504 started household payments for month 2025-12
[2025-12-14 16:51:20,594] [INFO] [aiogram.event] Update id=131880143 is handled. Duration 144 ms by bot id=8440100118
[2025-12-14 16:51:22,403] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -600.0
[2025-12-14 16:51:22,408] [INFO] [Bot.database.crud] Marked household question phone as paid for user 838347504 month 2025-12
[2025-12-14 16:51:22,408] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question phone
[2025-12-14 16:51:22,547] [INFO] [aiogram.event] Update id=131880144 is handled. Duration 239 ms by bot id=8440100118
[2025-12-14 16:51:27,686] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question vpn
[2025-12-14 16:51:27,811] [INFO] [aiogram.event] Update id=131880145 is handled. Duration 176 ms by bot id=8440100118
[2025-12-14 16:51:28,917] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question gpt
[2025-12-14 16:51:29,058] [INFO] [aiogram.event] Update id=131880146 is handled. Duration 211 ms by bot id=8440100118
[2025-12-14 16:51:30,595] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question yandex_sub
[2025-12-14 16:51:30,722] [INFO] [aiogram.event] Update id=131880147 is handled. Duration 176 ms by bot id=8440100118
[2025-12-14 16:51:32,171] [INFO] [Bot.handlers.household_payments] User 838347504 answered NO for household question rent
[2025-12-14 16:51:32,171] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-14 16:51:32,289] [INFO] [Bot.handlers.household_payments] User 838347504 completed household payments for month 2025-12
[2025-12-14 16:51:32,289] [INFO] [aiogram.event] Update id=131880148 is handled. Duration 234 ms by bot id=8440100118
[2025-12-14 16:51:36,094] [INFO] [Bot.handlers.household_payments] User 838347504 started household payments for month 2025-12
[2025-12-14 16:51:36,094] [INFO] [aiogram.event] Update id=131880149 is handled. Duration 144 ms by bot id=8440100118
[2025-12-14 16:51:37,129] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -100.0
[2025-12-14 16:51:37,135] [INFO] [Bot.database.crud] Marked household question vpn as paid for user 838347504 month 2025-12
[2025-12-14 16:51:37,135] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question vpn
[2025-12-14 16:51:37,345] [INFO] [aiogram.event] Update id=131880150 is handled. Duration 310 ms by bot id=8440100118
[2025-12-14 16:51:38,515] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -2000.0
[2025-12-14 16:51:38,520] [INFO] [Bot.database.crud] Marked household question gpt as paid for user 838347504 month 2025-12
[2025-12-14 16:51:38,520] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question gpt
[2025-12-14 16:51:38,648] [INFO] [aiogram.event] Update id=131880151 is handled. Duration 203 ms by bot id=8440100118
[2025-12-14 16:51:39,774] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -400.0
[2025-12-14 16:51:39,779] [INFO] [Bot.database.crud] Marked household question yandex_sub as paid for user 838347504 month 2025-12
[2025-12-14 16:51:39,779] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question yandex_sub
[2025-12-14 16:51:39,958] [INFO] [aiogram.event] Update id=131880152 is handled. Duration 258 ms by bot id=8440100118
[2025-12-14 16:51:41,003] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -3000.0
[2025-12-14 16:51:41,007] [INFO] [Bot.database.crud] Marked household question rent as paid for user 838347504 month 2025-12
[2025-12-14 16:51:41,008] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question rent
[2025-12-14 16:51:41,008] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-14 16:51:41,077] [INFO] [Bot.handlers.household_payments] User 838347504 completed household payments for month 2025-12
[2025-12-14 16:51:41,077] [INFO] [aiogram.event] Update id=131880153 is handled. Duration 147 ms by bot id=8440100118
[2025-12-14 16:54:44,681] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-14 16:54:44,682] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-14 16:54:44,683] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-14 16:54:44,944] [INFO] [__main__] Bot shutdown complete
[2025-12-14 16:54:44,944] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-14 17:01:46,458] [INFO] [Bot.database.crud] Database initialized at C:\Users\admin\PycharmProjects\v4\finance_bot\finance.db
[2025-12-14 17:01:46,459] [INFO] [__main__] Starting bot polling
[2025-12-14 17:01:46,459] [INFO] [aiogram.dispatcher] Start polling
[2025-12-14 17:01:46,637] [INFO] [aiogram.dispatcher] Run polling for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
[2025-12-14 17:03:06,675] [INFO] [Bot.database.crud] Initialized household questions for user 838347504 month 2025-12
[2025-12-14 17:03:06,910] [INFO] [Bot.handlers.start] User 838347504 started bot
[2025-12-14 17:03:06,997] [INFO] [aiogram.event] Update id=131880154 is handled. Duration 348 ms by bot id=8440100118
[2025-12-14 17:03:08,508] [INFO] [Bot.handlers.household_payments] User 838347504 started household payments for month 2025-12
[2025-12-14 17:03:08,508] [INFO] [aiogram.event] Update id=131880155 is handled. Duration 161 ms by bot id=8440100118
[2025-12-14 17:03:09,784] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -600.0
[2025-12-14 17:03:09,790] [INFO] [Bot.database.crud] Marked household question phone as paid for user 838347504 month 2025-12
[2025-12-14 17:03:09,790] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question phone
[2025-12-14 17:03:10,120] [INFO] [aiogram.event] Update id=131880156 is handled. Duration 508 ms by bot id=8440100118
[2025-12-14 17:03:11,102] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -700.0
[2025-12-14 17:03:11,107] [INFO] [Bot.database.crud] Marked household question internet as paid for user 838347504 month 2025-12
[2025-12-14 17:03:11,107] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question internet
[2025-12-14 17:03:11,311] [INFO] [aiogram.event] Update id=131880157 is handled. Duration 323 ms by bot id=8440100118
[2025-12-14 17:03:12,165] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -100.0
[2025-12-14 17:03:12,170] [INFO] [Bot.database.crud] Marked household question vpn as paid for user 838347504 month 2025-12
[2025-12-14 17:03:12,170] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question vpn
[2025-12-14 17:03:12,343] [INFO] [aiogram.event] Update id=131880158 is handled. Duration 261 ms by bot id=8440100118
[2025-12-14 17:03:13,315] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -2000.0
[2025-12-14 17:03:13,321] [INFO] [Bot.database.crud] Marked household question gpt as paid for user 838347504 month 2025-12
[2025-12-14 17:03:13,321] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question gpt
[2025-12-14 17:03:13,467] [INFO] [aiogram.event] Update id=131880159 is handled. Duration 234 ms by bot id=8440100118
[2025-12-14 17:03:14,572] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -400.0
[2025-12-14 17:03:14,577] [INFO] [Bot.database.crud] Marked household question yandex_sub as paid for user 838347504 month 2025-12
[2025-12-14 17:03:14,578] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question yandex_sub
[2025-12-14 17:03:14,736] [INFO] [aiogram.event] Update id=131880160 is handled. Duration 248 ms by bot id=8440100118
[2025-12-14 17:03:15,864] [INFO] [Bot.database.crud] Updated saving for user 838347504 category быт by -3000.0
[2025-12-14 17:03:15,869] [INFO] [Bot.database.crud] Marked household question rent as paid for user 838347504 month 2025-12
[2025-12-14 17:03:15,869] [INFO] [Bot.handlers.household_payments] User 838347504 answered YES for household question rent
[2025-12-14 17:03:15,870] [INFO] [Bot.database.crud] Fetched savings for user 838347504
[2025-12-14 17:03:15,943] [INFO] [Bot.handlers.household_payments] User 838347504 completed household payments for month 2025-12
[2025-12-14 17:03:15,944] [INFO] [aiogram.event] Update id=131880161 is handled. Duration 149 ms by bot id=8440100118
[2025-12-14 17:18:36,007] [INFO] [aiogram.dispatcher] Polling stopped
[2025-12-14 17:18:36,009] [ERROR] [aiogram.dispatcher] Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-12-14 17:18:36,009] [WARNING] [aiogram.dispatcher] Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 8440100118)
[2025-12-14 17:18:36,263] [INFO] [__main__] Bot shutdown complete
[2025-12-14 17:18:36,264] [INFO] [aiogram.dispatcher] Polling stopped for bot @IanDyniBot id=8440100118 - 'Моя Боль ЯньДунь'
